{"ast":null,"code":"/*\n  html2canvas 0.5.0-beta4 <http://html2canvas.hertzen.com>\n  Copyright (c) 2017 Niklas von Hertzen\n  2017-06-14 Custom build by Erik Koopmans, featuring latest bugfixes and features\n\n  Released under MIT License\n*/\n\n(function (f) {\n  if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n    module.exports = f();\n  } else if (typeof define === \"function\" && define.amd) {\n    define([], f);\n  } else {\n    var g;\n    if (typeof window !== \"undefined\") {\n      g = window;\n    } else if (typeof global !== \"undefined\") {\n      g = global;\n    } else if (typeof self !== \"undefined\") {\n      g = self;\n    } else {\n      g = this;\n    }\n    g.html2canvas = f();\n  }\n})(function () {\n  var define, module, exports;\n  return function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;\n          if (!u && a) return a(o, !0);\n          if (i) return i(o, !0);\n          var f = new Error(\"Cannot find module '\" + o + \"'\");\n          throw f.code = \"MODULE_NOT_FOUND\", f;\n        }\n        var l = n[o] = {\n          exports: {}\n        };\n        t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];\n          return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }\n      return n[o].exports;\n    }\n    var i = typeof require == \"function\" && require;\n    for (var o = 0; o < r.length; o++) s(r[o]);\n    return s;\n  }({\n    1: [function (_dereq_, module, exports) {\n      (function (global) {\n        /*! https://mths.be/punycode v1.4.1 by @mathias */\n        ;\n        (function (root) {\n          /** Detect free variables */\n          var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n          var freeModule = typeof module == 'object' && module && !module.nodeType && module;\n          var freeGlobal = typeof global == 'object' && global;\n          if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal) {\n            root = freeGlobal;\n          }\n\n          /**\n           * The `punycode` object.\n           * @name punycode\n           * @type Object\n           */\n          var punycode,\n            /** Highest positive signed 32-bit float value */\n            maxInt = 2147483647,\n            // aka. 0x7FFFFFFF or 2^31-1\n\n            /** Bootstring parameters */\n            base = 36,\n            tMin = 1,\n            tMax = 26,\n            skew = 38,\n            damp = 700,\n            initialBias = 72,\n            initialN = 128,\n            // 0x80\n            delimiter = '-',\n            // '\\x2D'\n\n            /** Regular expressions */\n            regexPunycode = /^xn--/,\n            regexNonASCII = /[^\\x20-\\x7E]/,\n            // unprintable ASCII chars + non-ASCII chars\n            regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g,\n            // RFC 3490 separators\n\n            /** Error messages */\n            errors = {\n              'overflow': 'Overflow: input needs wider integers to process',\n              'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n              'invalid-input': 'Invalid input'\n            },\n            /** Convenience shortcuts */\n            baseMinusTMin = base - tMin,\n            floor = Math.floor,\n            stringFromCharCode = String.fromCharCode,\n            /** Temporary variable */\n            key;\n\n          /*--------------------------------------------------------------------------*/\n\n          /**\n           * A generic error utility function.\n           * @private\n           * @param {String} type The error type.\n           * @returns {Error} Throws a `RangeError` with the applicable error message.\n           */\n          function error(type) {\n            throw new RangeError(errors[type]);\n          }\n\n          /**\n           * A generic `Array#map` utility function.\n           * @private\n           * @param {Array} array The array to iterate over.\n           * @param {Function} callback The function that gets called for every array\n           * item.\n           * @returns {Array} A new array of values returned by the callback function.\n           */\n          function map(array, fn) {\n            var length = array.length;\n            var result = [];\n            while (length--) {\n              result[length] = fn(array[length]);\n            }\n            return result;\n          }\n\n          /**\n           * A simple `Array#map`-like wrapper to work with domain name strings or email\n           * addresses.\n           * @private\n           * @param {String} domain The domain name or email address.\n           * @param {Function} callback The function that gets called for every\n           * character.\n           * @returns {Array} A new string of characters returned by the callback\n           * function.\n           */\n          function mapDomain(string, fn) {\n            var parts = string.split('@');\n            var result = '';\n            if (parts.length > 1) {\n              // In email addresses, only the domain name should be punycoded. Leave\n              // the local part (i.e. everything up to `@`) intact.\n              result = parts[0] + '@';\n              string = parts[1];\n            }\n            // Avoid `split(regex)` for IE8 compatibility. See #17.\n            string = string.replace(regexSeparators, '\\x2E');\n            var labels = string.split('.');\n            var encoded = map(labels, fn).join('.');\n            return result + encoded;\n          }\n\n          /**\n           * Creates an array containing the numeric code points of each Unicode\n           * character in the string. While JavaScript uses UCS-2 internally,\n           * this function will convert a pair of surrogate halves (each of which\n           * UCS-2 exposes as separate characters) into a single code point,\n           * matching UTF-16.\n           * @see `punycode.ucs2.encode`\n           * @see <https://mathiasbynens.be/notes/javascript-encoding>\n           * @memberOf punycode.ucs2\n           * @name decode\n           * @param {String} string The Unicode input string (UCS-2).\n           * @returns {Array} The new array of code points.\n           */\n          function ucs2decode(string) {\n            var output = [],\n              counter = 0,\n              length = string.length,\n              value,\n              extra;\n            while (counter < length) {\n              value = string.charCodeAt(counter++);\n              if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n                // high surrogate, and there is a next character\n                extra = string.charCodeAt(counter++);\n                if ((extra & 0xFC00) == 0xDC00) {\n                  // low surrogate\n                  output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n                } else {\n                  // unmatched surrogate; only append this code unit, in case the next\n                  // code unit is the high surrogate of a surrogate pair\n                  output.push(value);\n                  counter--;\n                }\n              } else {\n                output.push(value);\n              }\n            }\n            return output;\n          }\n\n          /**\n           * Creates a string based on an array of numeric code points.\n           * @see `punycode.ucs2.decode`\n           * @memberOf punycode.ucs2\n           * @name encode\n           * @param {Array} codePoints The array of numeric code points.\n           * @returns {String} The new Unicode string (UCS-2).\n           */\n          function ucs2encode(array) {\n            return map(array, function (value) {\n              var output = '';\n              if (value > 0xFFFF) {\n                value -= 0x10000;\n                output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n                value = 0xDC00 | value & 0x3FF;\n              }\n              output += stringFromCharCode(value);\n              return output;\n            }).join('');\n          }\n\n          /**\n           * Converts a basic code point into a digit/integer.\n           * @see `digitToBasic()`\n           * @private\n           * @param {Number} codePoint The basic numeric code point value.\n           * @returns {Number} The numeric value of a basic code point (for use in\n           * representing integers) in the range `0` to `base - 1`, or `base` if\n           * the code point does not represent a value.\n           */\n          function basicToDigit(codePoint) {\n            if (codePoint - 48 < 10) {\n              return codePoint - 22;\n            }\n            if (codePoint - 65 < 26) {\n              return codePoint - 65;\n            }\n            if (codePoint - 97 < 26) {\n              return codePoint - 97;\n            }\n            return base;\n          }\n\n          /**\n           * Converts a digit/integer into a basic code point.\n           * @see `basicToDigit()`\n           * @private\n           * @param {Number} digit The numeric value of a basic code point.\n           * @returns {Number} The basic code point whose value (when used for\n           * representing integers) is `digit`, which needs to be in the range\n           * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n           * used; else, the lowercase form is used. The behavior is undefined\n           * if `flag` is non-zero and `digit` has no uppercase form.\n           */\n          function digitToBasic(digit, flag) {\n            //  0..25 map to ASCII a..z or A..Z\n            // 26..35 map to ASCII 0..9\n            return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n          }\n\n          /**\n           * Bias adaptation function as per section 3.4 of RFC 3492.\n           * https://tools.ietf.org/html/rfc3492#section-3.4\n           * @private\n           */\n          function adapt(delta, numPoints, firstTime) {\n            var k = 0;\n            delta = firstTime ? floor(delta / damp) : delta >> 1;\n            delta += floor(delta / numPoints);\n            for /* no initialization */\n            (; delta > baseMinusTMin * tMax >> 1; k += base) {\n              delta = floor(delta / baseMinusTMin);\n            }\n            return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n          }\n\n          /**\n           * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n           * symbols.\n           * @memberOf punycode\n           * @param {String} input The Punycode string of ASCII-only symbols.\n           * @returns {String} The resulting string of Unicode symbols.\n           */\n          function decode(input) {\n            // Don't use UCS-2\n            var output = [],\n              inputLength = input.length,\n              out,\n              i = 0,\n              n = initialN,\n              bias = initialBias,\n              basic,\n              j,\n              index,\n              oldi,\n              w,\n              k,\n              digit,\n              t,\n              /** Cached calculation results */\n              baseMinusT;\n\n            // Handle the basic code points: let `basic` be the number of input code\n            // points before the last delimiter, or `0` if there is none, then copy\n            // the first basic code points to the output.\n\n            basic = input.lastIndexOf(delimiter);\n            if (basic < 0) {\n              basic = 0;\n            }\n            for (j = 0; j < basic; ++j) {\n              // if it's not a basic code point\n              if (input.charCodeAt(j) >= 0x80) {\n                error('not-basic');\n              }\n              output.push(input.charCodeAt(j));\n            }\n\n            // Main decoding loop: start just after the last delimiter if any basic code\n            // points were copied; start at the beginning otherwise.\n\n            for /* no final expression */\n            (index = basic > 0 ? basic + 1 : 0; index < inputLength;) {\n              // `index` is the index of the next character to be consumed.\n              // Decode a generalized variable-length integer into `delta`,\n              // which gets added to `i`. The overflow checking is easier\n              // if we increase `i` as we go, then subtract off its starting\n              // value at the end to obtain `delta`.\n              for /* no condition */\n              (oldi = i, w = 1, k = base;; k += base) {\n                if (index >= inputLength) {\n                  error('invalid-input');\n                }\n                digit = basicToDigit(input.charCodeAt(index++));\n                if (digit >= base || digit > floor((maxInt - i) / w)) {\n                  error('overflow');\n                }\n                i += digit * w;\n                t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n                if (digit < t) {\n                  break;\n                }\n                baseMinusT = base - t;\n                if (w > floor(maxInt / baseMinusT)) {\n                  error('overflow');\n                }\n                w *= baseMinusT;\n              }\n              out = output.length + 1;\n              bias = adapt(i - oldi, out, oldi == 0);\n\n              // `i` was supposed to wrap around from `out` to `0`,\n              // incrementing `n` each time, so we'll fix that now:\n              if (floor(i / out) > maxInt - n) {\n                error('overflow');\n              }\n              n += floor(i / out);\n              i %= out;\n\n              // Insert `n` at position `i` of the output\n              output.splice(i++, 0, n);\n            }\n            return ucs2encode(output);\n          }\n\n          /**\n           * Converts a string of Unicode symbols (e.g. a domain name label) to a\n           * Punycode string of ASCII-only symbols.\n           * @memberOf punycode\n           * @param {String} input The string of Unicode symbols.\n           * @returns {String} The resulting Punycode string of ASCII-only symbols.\n           */\n          function encode(input) {\n            var n,\n              delta,\n              handledCPCount,\n              basicLength,\n              bias,\n              j,\n              m,\n              q,\n              k,\n              t,\n              currentValue,\n              output = [],\n              /** `inputLength` will hold the number of code points in `input`. */\n              inputLength,\n              /** Cached calculation results */\n              handledCPCountPlusOne,\n              baseMinusT,\n              qMinusT;\n\n            // Convert the input in UCS-2 to Unicode\n            input = ucs2decode(input);\n\n            // Cache the length\n            inputLength = input.length;\n\n            // Initialize the state\n            n = initialN;\n            delta = 0;\n            bias = initialBias;\n\n            // Handle the basic code points\n            for (j = 0; j < inputLength; ++j) {\n              currentValue = input[j];\n              if (currentValue < 0x80) {\n                output.push(stringFromCharCode(currentValue));\n              }\n            }\n            handledCPCount = basicLength = output.length;\n\n            // `handledCPCount` is the number of code points that have been handled;\n            // `basicLength` is the number of basic code points.\n\n            // Finish the basic string - if it is not empty - with a delimiter\n            if (basicLength) {\n              output.push(delimiter);\n            }\n\n            // Main encoding loop:\n            while (handledCPCount < inputLength) {\n              // All non-basic code points < n have been handled already. Find the next\n              // larger one:\n              for (m = maxInt, j = 0; j < inputLength; ++j) {\n                currentValue = input[j];\n                if (currentValue >= n && currentValue < m) {\n                  m = currentValue;\n                }\n              }\n\n              // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n              // but guard against overflow\n              handledCPCountPlusOne = handledCPCount + 1;\n              if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n                error('overflow');\n              }\n              delta += (m - n) * handledCPCountPlusOne;\n              n = m;\n              for (j = 0; j < inputLength; ++j) {\n                currentValue = input[j];\n                if (currentValue < n && ++delta > maxInt) {\n                  error('overflow');\n                }\n                if (currentValue == n) {\n                  // Represent delta as a generalized variable-length integer\n                  for /* no condition */\n                  (q = delta, k = base;; k += base) {\n                    t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n                    if (q < t) {\n                      break;\n                    }\n                    qMinusT = q - t;\n                    baseMinusT = base - t;\n                    output.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n                    q = floor(qMinusT / baseMinusT);\n                  }\n                  output.push(stringFromCharCode(digitToBasic(q, 0)));\n                  bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n                  delta = 0;\n                  ++handledCPCount;\n                }\n              }\n              ++delta;\n              ++n;\n            }\n            return output.join('');\n          }\n\n          /**\n           * Converts a Punycode string representing a domain name or an email address\n           * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n           * it doesn't matter if you call it on a string that has already been\n           * converted to Unicode.\n           * @memberOf punycode\n           * @param {String} input The Punycoded domain name or email address to\n           * convert to Unicode.\n           * @returns {String} The Unicode representation of the given Punycode\n           * string.\n           */\n          function toUnicode(input) {\n            return mapDomain(input, function (string) {\n              return regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n            });\n          }\n\n          /**\n           * Converts a Unicode string representing a domain name or an email address to\n           * Punycode. Only the non-ASCII parts of the domain name will be converted,\n           * i.e. it doesn't matter if you call it with a domain that's already in\n           * ASCII.\n           * @memberOf punycode\n           * @param {String} input The domain name or email address to convert, as a\n           * Unicode string.\n           * @returns {String} The Punycode representation of the given domain name or\n           * email address.\n           */\n          function toASCII(input) {\n            return mapDomain(input, function (string) {\n              return regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n            });\n          }\n\n          /*--------------------------------------------------------------------------*/\n\n          /** Define the public API */\n          punycode = {\n            /**\n             * A string representing the current Punycode.js version number.\n             * @memberOf punycode\n             * @type String\n             */\n            'version': '1.4.1',\n            /**\n             * An object of methods to convert from JavaScript's internal character\n             * representation (UCS-2) to Unicode code points, and back.\n             * @see <https://mathiasbynens.be/notes/javascript-encoding>\n             * @memberOf punycode\n             * @type Object\n             */\n            'ucs2': {\n              'decode': ucs2decode,\n              'encode': ucs2encode\n            },\n            'decode': decode,\n            'encode': encode,\n            'toASCII': toASCII,\n            'toUnicode': toUnicode\n          };\n\n          /** Expose `punycode` */\n          // Some AMD build optimizers, like r.js, check for specific condition patterns\n          // like the following:\n          if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n            define('punycode', function () {\n              return punycode;\n            });\n          } else if (freeExports && freeModule) {\n            if (module.exports == freeExports) {\n              // in Node.js, io.js, or RingoJS v0.8.0+\n              freeModule.exports = punycode;\n            } else {\n              // in Narwhal or RingoJS v0.7.0-\n              for (key in punycode) {\n                punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n              }\n            }\n          } else {\n            // in Rhino or a web browser\n            root.punycode = punycode;\n          }\n        })(this);\n      }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n    }, {}],\n    2: [function (_dereq_, module, exports) {\n      var log = _dereq_('./log');\n      function restoreOwnerScroll(ownerDocument, x, y) {\n        if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n          ownerDocument.defaultView.scrollTo(x, y);\n        }\n      }\n      function cloneCanvasContents(canvas, clonedCanvas) {\n        try {\n          if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n          }\n        } catch (e) {\n          log(\"Unable to copy canvas content from\", canvas, e);\n        }\n      }\n      function cloneNode(node, javascriptEnabled) {\n        var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n        var child = node.firstChild;\n        while (child) {\n          if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n            clone.appendChild(cloneNode(child, javascriptEnabled));\n          }\n          child = child.nextSibling;\n        }\n        if (node.nodeType === 1) {\n          clone._scrollTop = node.scrollTop;\n          clone._scrollLeft = node.scrollLeft;\n          if (node.nodeName === \"CANVAS\") {\n            cloneCanvasContents(node, clone);\n          } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\n            clone.value = node.value;\n          }\n        }\n        return clone;\n      }\n      function initNode(node) {\n        if (node.nodeType === 1) {\n          node.scrollTop = node._scrollTop;\n          node.scrollLeft = node._scrollLeft;\n          var child = node.firstChild;\n          while (child) {\n            initNode(child);\n            child = child.nextSibling;\n          }\n        }\n      }\n      module.exports = function (ownerDocument, containerDocument, width, height, options, x, y) {\n        var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\n        var container = containerDocument.createElement(\"iframe\");\n        container.className = \"html2canvas-container\";\n        container.style.visibility = \"hidden\";\n        container.style.position = \"fixed\";\n        container.style.left = \"-10000px\";\n        container.style.top = \"0px\";\n        container.style.border = \"0\";\n        container.width = width;\n        container.height = height;\n        container.scrolling = \"no\"; // ios won't scroll without it\n        containerDocument.body.appendChild(container);\n        return new Promise(function (resolve) {\n          var documentClone = container.contentWindow.document;\n\n          /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n           if window url is about:blank, we can assign the url to current by writing onto the document\n           */\n          container.contentWindow.onload = container.onload = function () {\n            var interval = setInterval(function () {\n              if (documentClone.body.childNodes.length > 0) {\n                initNode(documentClone.documentElement);\n                clearInterval(interval);\n                if (options.type === \"view\") {\n                  container.contentWindow.scrollTo(x, y);\n                  if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\n                    documentClone.documentElement.style.top = -y + \"px\";\n                    documentClone.documentElement.style.left = -x + \"px\";\n                    documentClone.documentElement.style.position = 'absolute';\n                  }\n                }\n                resolve(container);\n              }\n            }, 50);\n          };\n          documentClone.open();\n          documentClone.write(\"<!DOCTYPE html><html></html>\");\n          // Chrome scrolls the parent document for some reason after the write to the cloned window???\n          restoreOwnerScroll(ownerDocument, x, y);\n          documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\n          documentClone.close();\n        });\n      };\n    }, {\n      \"./log\": 13\n    }],\n    3: [function (_dereq_, module, exports) {\n      // http://dev.w3.org/csswg/css-color/\n\n      function Color(value) {\n        this.r = 0;\n        this.g = 0;\n        this.b = 0;\n        this.a = null;\n        var result = this.fromArray(value) || this.namedColor(value) || this.rgb(value) || this.rgba(value) || this.hex6(value) || this.hex3(value);\n      }\n      Color.prototype.darken = function (amount) {\n        var a = 1 - amount;\n        return new Color([Math.round(this.r * a), Math.round(this.g * a), Math.round(this.b * a), this.a]);\n      };\n      Color.prototype.isTransparent = function () {\n        return this.a === 0;\n      };\n      Color.prototype.isBlack = function () {\n        return this.r === 0 && this.g === 0 && this.b === 0;\n      };\n      Color.prototype.fromArray = function (array) {\n        if (Array.isArray(array)) {\n          this.r = Math.min(array[0], 255);\n          this.g = Math.min(array[1], 255);\n          this.b = Math.min(array[2], 255);\n          if (array.length > 3) {\n            this.a = array[3];\n          }\n        }\n        return Array.isArray(array);\n      };\n      var _hex3 = /^#([a-f0-9]{3})$/i;\n      Color.prototype.hex3 = function (value) {\n        var match = null;\n        if ((match = value.match(_hex3)) !== null) {\n          this.r = parseInt(match[1][0] + match[1][0], 16);\n          this.g = parseInt(match[1][1] + match[1][1], 16);\n          this.b = parseInt(match[1][2] + match[1][2], 16);\n        }\n        return match !== null;\n      };\n      var _hex6 = /^#([a-f0-9]{6})$/i;\n      Color.prototype.hex6 = function (value) {\n        var match = null;\n        if ((match = value.match(_hex6)) !== null) {\n          this.r = parseInt(match[1].substring(0, 2), 16);\n          this.g = parseInt(match[1].substring(2, 4), 16);\n          this.b = parseInt(match[1].substring(4, 6), 16);\n        }\n        return match !== null;\n      };\n      var _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n      Color.prototype.rgb = function (value) {\n        var match = null;\n        if ((match = value.match(_rgb)) !== null) {\n          this.r = Number(match[1]);\n          this.g = Number(match[2]);\n          this.b = Number(match[3]);\n        }\n        return match !== null;\n      };\n      var _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\n      Color.prototype.rgba = function (value) {\n        var match = null;\n        if ((match = value.match(_rgba)) !== null) {\n          this.r = Number(match[1]);\n          this.g = Number(match[2]);\n          this.b = Number(match[3]);\n          this.a = Number(match[4]);\n        }\n        return match !== null;\n      };\n      Color.prototype.toString = function () {\n        return this.a !== null && this.a !== 1 ? \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" : \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\n      };\n      Color.prototype.namedColor = function (value) {\n        value = value.toLowerCase();\n        var color = colors[value];\n        if (color) {\n          this.r = color[0];\n          this.g = color[1];\n          this.b = color[2];\n        } else if (value === \"transparent\") {\n          this.r = this.g = this.b = this.a = 0;\n          return true;\n        }\n        return !!color;\n      };\n      Color.prototype.isColor = true;\n\n      // JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\n      var colors = {\n        \"aliceblue\": [240, 248, 255],\n        \"antiquewhite\": [250, 235, 215],\n        \"aqua\": [0, 255, 255],\n        \"aquamarine\": [127, 255, 212],\n        \"azure\": [240, 255, 255],\n        \"beige\": [245, 245, 220],\n        \"bisque\": [255, 228, 196],\n        \"black\": [0, 0, 0],\n        \"blanchedalmond\": [255, 235, 205],\n        \"blue\": [0, 0, 255],\n        \"blueviolet\": [138, 43, 226],\n        \"brown\": [165, 42, 42],\n        \"burlywood\": [222, 184, 135],\n        \"cadetblue\": [95, 158, 160],\n        \"chartreuse\": [127, 255, 0],\n        \"chocolate\": [210, 105, 30],\n        \"coral\": [255, 127, 80],\n        \"cornflowerblue\": [100, 149, 237],\n        \"cornsilk\": [255, 248, 220],\n        \"crimson\": [220, 20, 60],\n        \"cyan\": [0, 255, 255],\n        \"darkblue\": [0, 0, 139],\n        \"darkcyan\": [0, 139, 139],\n        \"darkgoldenrod\": [184, 134, 11],\n        \"darkgray\": [169, 169, 169],\n        \"darkgreen\": [0, 100, 0],\n        \"darkgrey\": [169, 169, 169],\n        \"darkkhaki\": [189, 183, 107],\n        \"darkmagenta\": [139, 0, 139],\n        \"darkolivegreen\": [85, 107, 47],\n        \"darkorange\": [255, 140, 0],\n        \"darkorchid\": [153, 50, 204],\n        \"darkred\": [139, 0, 0],\n        \"darksalmon\": [233, 150, 122],\n        \"darkseagreen\": [143, 188, 143],\n        \"darkslateblue\": [72, 61, 139],\n        \"darkslategray\": [47, 79, 79],\n        \"darkslategrey\": [47, 79, 79],\n        \"darkturquoise\": [0, 206, 209],\n        \"darkviolet\": [148, 0, 211],\n        \"deeppink\": [255, 20, 147],\n        \"deepskyblue\": [0, 191, 255],\n        \"dimgray\": [105, 105, 105],\n        \"dimgrey\": [105, 105, 105],\n        \"dodgerblue\": [30, 144, 255],\n        \"firebrick\": [178, 34, 34],\n        \"floralwhite\": [255, 250, 240],\n        \"forestgreen\": [34, 139, 34],\n        \"fuchsia\": [255, 0, 255],\n        \"gainsboro\": [220, 220, 220],\n        \"ghostwhite\": [248, 248, 255],\n        \"gold\": [255, 215, 0],\n        \"goldenrod\": [218, 165, 32],\n        \"gray\": [128, 128, 128],\n        \"green\": [0, 128, 0],\n        \"greenyellow\": [173, 255, 47],\n        \"grey\": [128, 128, 128],\n        \"honeydew\": [240, 255, 240],\n        \"hotpink\": [255, 105, 180],\n        \"indianred\": [205, 92, 92],\n        \"indigo\": [75, 0, 130],\n        \"ivory\": [255, 255, 240],\n        \"khaki\": [240, 230, 140],\n        \"lavender\": [230, 230, 250],\n        \"lavenderblush\": [255, 240, 245],\n        \"lawngreen\": [124, 252, 0],\n        \"lemonchiffon\": [255, 250, 205],\n        \"lightblue\": [173, 216, 230],\n        \"lightcoral\": [240, 128, 128],\n        \"lightcyan\": [224, 255, 255],\n        \"lightgoldenrodyellow\": [250, 250, 210],\n        \"lightgray\": [211, 211, 211],\n        \"lightgreen\": [144, 238, 144],\n        \"lightgrey\": [211, 211, 211],\n        \"lightpink\": [255, 182, 193],\n        \"lightsalmon\": [255, 160, 122],\n        \"lightseagreen\": [32, 178, 170],\n        \"lightskyblue\": [135, 206, 250],\n        \"lightslategray\": [119, 136, 153],\n        \"lightslategrey\": [119, 136, 153],\n        \"lightsteelblue\": [176, 196, 222],\n        \"lightyellow\": [255, 255, 224],\n        \"lime\": [0, 255, 0],\n        \"limegreen\": [50, 205, 50],\n        \"linen\": [250, 240, 230],\n        \"magenta\": [255, 0, 255],\n        \"maroon\": [128, 0, 0],\n        \"mediumaquamarine\": [102, 205, 170],\n        \"mediumblue\": [0, 0, 205],\n        \"mediumorchid\": [186, 85, 211],\n        \"mediumpurple\": [147, 112, 219],\n        \"mediumseagreen\": [60, 179, 113],\n        \"mediumslateblue\": [123, 104, 238],\n        \"mediumspringgreen\": [0, 250, 154],\n        \"mediumturquoise\": [72, 209, 204],\n        \"mediumvioletred\": [199, 21, 133],\n        \"midnightblue\": [25, 25, 112],\n        \"mintcream\": [245, 255, 250],\n        \"mistyrose\": [255, 228, 225],\n        \"moccasin\": [255, 228, 181],\n        \"navajowhite\": [255, 222, 173],\n        \"navy\": [0, 0, 128],\n        \"oldlace\": [253, 245, 230],\n        \"olive\": [128, 128, 0],\n        \"olivedrab\": [107, 142, 35],\n        \"orange\": [255, 165, 0],\n        \"orangered\": [255, 69, 0],\n        \"orchid\": [218, 112, 214],\n        \"palegoldenrod\": [238, 232, 170],\n        \"palegreen\": [152, 251, 152],\n        \"paleturquoise\": [175, 238, 238],\n        \"palevioletred\": [219, 112, 147],\n        \"papayawhip\": [255, 239, 213],\n        \"peachpuff\": [255, 218, 185],\n        \"peru\": [205, 133, 63],\n        \"pink\": [255, 192, 203],\n        \"plum\": [221, 160, 221],\n        \"powderblue\": [176, 224, 230],\n        \"purple\": [128, 0, 128],\n        \"rebeccapurple\": [102, 51, 153],\n        \"red\": [255, 0, 0],\n        \"rosybrown\": [188, 143, 143],\n        \"royalblue\": [65, 105, 225],\n        \"saddlebrown\": [139, 69, 19],\n        \"salmon\": [250, 128, 114],\n        \"sandybrown\": [244, 164, 96],\n        \"seagreen\": [46, 139, 87],\n        \"seashell\": [255, 245, 238],\n        \"sienna\": [160, 82, 45],\n        \"silver\": [192, 192, 192],\n        \"skyblue\": [135, 206, 235],\n        \"slateblue\": [106, 90, 205],\n        \"slategray\": [112, 128, 144],\n        \"slategrey\": [112, 128, 144],\n        \"snow\": [255, 250, 250],\n        \"springgreen\": [0, 255, 127],\n        \"steelblue\": [70, 130, 180],\n        \"tan\": [210, 180, 140],\n        \"teal\": [0, 128, 128],\n        \"thistle\": [216, 191, 216],\n        \"tomato\": [255, 99, 71],\n        \"turquoise\": [64, 224, 208],\n        \"violet\": [238, 130, 238],\n        \"wheat\": [245, 222, 179],\n        \"white\": [255, 255, 255],\n        \"whitesmoke\": [245, 245, 245],\n        \"yellow\": [255, 255, 0],\n        \"yellowgreen\": [154, 205, 50]\n      };\n      module.exports = Color;\n    }, {}],\n    4: [function (_dereq_, module, exports) {\n      var Support = _dereq_('./support');\n      var CanvasRenderer = _dereq_('./renderers/canvas');\n      var ImageLoader = _dereq_('./imageloader');\n      var NodeParser = _dereq_('./nodeparser');\n      var NodeContainer = _dereq_('./nodecontainer');\n      var log = _dereq_('./log');\n      var utils = _dereq_('./utils');\n      var createWindowClone = _dereq_('./clone');\n      var loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n      var getBounds = utils.getBounds;\n      var html2canvasNodeAttribute = \"data-html2canvas-node\";\n      var html2canvasCloneIndex = 0;\n      function html2canvas(nodeList, options) {\n        var index = html2canvasCloneIndex++;\n        options = options || {};\n        if (options.logging) {\n          log.options.logging = true;\n          log.options.start = Date.now();\n        }\n        options.async = typeof options.async === \"undefined\" ? true : options.async;\n        options.allowTaint = typeof options.allowTaint === \"undefined\" ? false : options.allowTaint;\n        options.removeContainer = typeof options.removeContainer === \"undefined\" ? true : options.removeContainer;\n        options.javascriptEnabled = typeof options.javascriptEnabled === \"undefined\" ? false : options.javascriptEnabled;\n        options.imageTimeout = typeof options.imageTimeout === \"undefined\" ? 10000 : options.imageTimeout;\n        options.renderer = typeof options.renderer === \"function\" ? options.renderer : CanvasRenderer;\n        options.strict = !!options.strict;\n        if (typeof nodeList === \"string\") {\n          if (typeof options.proxy !== \"string\") {\n            return Promise.reject(\"Proxy must be used when rendering url\");\n          }\n          var width = options.width != null ? options.width : window.innerWidth;\n          var height = options.height != null ? options.height : window.innerHeight;\n          return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function (container) {\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n          });\n        }\n        var node = (nodeList === undefined ? [document.documentElement] : nodeList.length ? nodeList : [nodeList])[0];\n        node.setAttribute(html2canvasNodeAttribute + index, index);\n        return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function (canvas) {\n          if (typeof options.onrendered === \"function\") {\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\n            options.onrendered(canvas);\n          }\n          return canvas;\n        });\n      }\n      html2canvas.CanvasRenderer = CanvasRenderer;\n      html2canvas.NodeContainer = NodeContainer;\n      html2canvas.log = log;\n      html2canvas.utils = utils;\n      var html2canvasExport = typeof document === \"undefined\" || typeof Object.create !== \"function\" || typeof document.createElement(\"canvas\").getContext !== \"function\" ? function () {\n        return Promise.reject(\"No canvas support\");\n      } : html2canvas;\n      module.exports = html2canvasExport;\n      if (typeof define === 'function' && define.amd) {\n        define('html2canvas', [], function () {\n          return html2canvasExport;\n        });\n      }\n      function renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n        return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function (container) {\n          log(\"Document cloned\");\n          var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n          var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\n          document.querySelector(selector).removeAttribute(attributeName);\n          var clonedWindow = container.contentWindow;\n          var node = clonedWindow.document.querySelector(selector);\n          var oncloneHandler = typeof options.onclone === \"function\" ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n          return oncloneHandler.then(function () {\n            return renderWindow(node, container, options, windowWidth, windowHeight);\n          });\n        });\n      }\n      function renderWindow(node, container, options, windowWidth, windowHeight) {\n        var clonedWindow = container.contentWindow;\n        var support = new Support(clonedWindow.document);\n        var imageLoader = new ImageLoader(options, support);\n        var bounds = getBounds(node);\n        var width = options.type === \"view\" ? windowWidth : bounds.right + 1;\n        var height = options.type === \"view\" ? windowHeight : bounds.bottom + 1;\n        var renderer = new options.renderer(width, height, imageLoader, options, document);\n        var parser = new NodeParser(node, renderer, support, imageLoader, options);\n        return parser.ready.then(function () {\n          log(\"Finished rendering\");\n          var canvas;\n          if (options.type === \"view\") {\n            canvas = crop(renderer.canvas, {\n              width: renderer.canvas.width,\n              height: renderer.canvas.height,\n              top: 0,\n              left: 0,\n              x: 0,\n              y: 0\n            });\n          } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n            canvas = renderer.canvas;\n          } else if (options.scale) {\n            var origBounds = {\n              width: options.width != null ? options.width : bounds.width,\n              height: options.height != null ? options.height : bounds.height,\n              top: bounds.top,\n              left: bounds.left,\n              x: 0,\n              y: 0\n            };\n            var cropBounds = {};\n            for (var key in origBounds) {\n              if (origBounds.hasOwnProperty(key)) {\n                cropBounds[key] = origBounds[key] * options.scale;\n              }\n            }\n            canvas = crop(renderer.canvas, cropBounds);\n            canvas.style.width = origBounds.width + 'px';\n            canvas.style.height = origBounds.height + 'px';\n          } else {\n            canvas = crop(renderer.canvas, {\n              width: options.width != null ? options.width : bounds.width,\n              height: options.height != null ? options.height : bounds.height,\n              top: bounds.top,\n              left: bounds.left,\n              x: 0,\n              y: 0\n            });\n          }\n          cleanupContainer(container, options);\n          return canvas;\n        });\n      }\n      function cleanupContainer(container, options) {\n        if (options.removeContainer) {\n          container.parentNode.removeChild(container);\n          log(\"Cleaned up container\");\n        }\n      }\n      function crop(canvas, bounds) {\n        var croppedCanvas = document.createElement(\"canvas\");\n        var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n        var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n        var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n        var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n        croppedCanvas.width = bounds.width;\n        croppedCanvas.height = bounds.height;\n        var width = x2 - x1;\n        var height = y2 - y1;\n        log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\n        log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\n        croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\n        return croppedCanvas;\n      }\n      function documentWidth(doc) {\n        return Math.max(Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth), Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth), Math.max(doc.body.clientWidth, doc.documentElement.clientWidth));\n      }\n      function documentHeight(doc) {\n        return Math.max(Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight), Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight), Math.max(doc.body.clientHeight, doc.documentElement.clientHeight));\n      }\n      function absoluteUrl(url) {\n        var link = document.createElement(\"a\");\n        link.href = url;\n        link.href = link.href;\n        return link;\n      }\n    }, {\n      \"./clone\": 2,\n      \"./imageloader\": 11,\n      \"./log\": 13,\n      \"./nodecontainer\": 14,\n      \"./nodeparser\": 15,\n      \"./proxy\": 16,\n      \"./renderers/canvas\": 20,\n      \"./support\": 22,\n      \"./utils\": 26\n    }],\n    5: [function (_dereq_, module, exports) {\n      var log = _dereq_('./log');\n      var smallImage = _dereq_('./utils').smallImage;\n      function DummyImageContainer(src) {\n        this.src = src;\n        log(\"DummyImageContainer for\", src);\n        if (!this.promise || !this.image) {\n          log(\"Initiating DummyImageContainer\");\n          DummyImageContainer.prototype.image = new Image();\n          var image = this.image;\n          DummyImageContainer.prototype.promise = new Promise(function (resolve, reject) {\n            image.onload = resolve;\n            image.onerror = reject;\n            image.src = smallImage();\n            if (image.complete === true) {\n              resolve(image);\n            }\n          });\n        }\n      }\n      module.exports = DummyImageContainer;\n    }, {\n      \"./log\": 13,\n      \"./utils\": 26\n    }],\n    6: [function (_dereq_, module, exports) {\n      var smallImage = _dereq_('./utils').smallImage;\n      function Font(family, size) {\n        var container = document.createElement('div'),\n          img = document.createElement('img'),\n          span = document.createElement('span'),\n          sampleText = 'Hidden Text',\n          baseline,\n          middle;\n        container.style.visibility = \"hidden\";\n        container.style.fontFamily = family;\n        container.style.fontSize = size;\n        container.style.margin = 0;\n        container.style.padding = 0;\n        document.body.appendChild(container);\n        img.src = smallImage();\n        img.width = 1;\n        img.height = 1;\n        img.style.margin = 0;\n        img.style.padding = 0;\n        img.style.verticalAlign = \"baseline\";\n        span.style.fontFamily = family;\n        span.style.fontSize = size;\n        span.style.margin = 0;\n        span.style.padding = 0;\n        span.appendChild(document.createTextNode(sampleText));\n        container.appendChild(span);\n        container.appendChild(img);\n        baseline = img.offsetTop - span.offsetTop + 1;\n        container.removeChild(span);\n        container.appendChild(document.createTextNode(sampleText));\n        container.style.lineHeight = \"normal\";\n        img.style.verticalAlign = \"super\";\n        middle = img.offsetTop - container.offsetTop + 1;\n        document.body.removeChild(container);\n        this.baseline = baseline;\n        this.lineWidth = 1;\n        this.middle = middle;\n      }\n      module.exports = Font;\n    }, {\n      \"./utils\": 26\n    }],\n    7: [function (_dereq_, module, exports) {\n      var Font = _dereq_('./font');\n      function FontMetrics() {\n        this.data = {};\n      }\n      FontMetrics.prototype.getMetrics = function (family, size) {\n        if (this.data[family + \"-\" + size] === undefined) {\n          this.data[family + \"-\" + size] = new Font(family, size);\n        }\n        return this.data[family + \"-\" + size];\n      };\n      module.exports = FontMetrics;\n    }, {\n      \"./font\": 6\n    }],\n    8: [function (_dereq_, module, exports) {\n      var utils = _dereq_('./utils');\n      var getBounds = utils.getBounds;\n      var loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n      function FrameContainer(container, sameOrigin, options) {\n        this.image = null;\n        this.src = container;\n        var self = this;\n        var bounds = getBounds(container);\n        this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function (resolve) {\n          if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\n            container.contentWindow.onload = container.onload = function () {\n              resolve(container);\n            };\n          } else {\n            resolve(container);\n          }\n        })).then(function (container) {\n          var html2canvas = _dereq_('./core');\n          return html2canvas(container.contentWindow.document.documentElement, {\n            type: 'view',\n            width: container.width,\n            height: container.height,\n            proxy: options.proxy,\n            javascriptEnabled: options.javascriptEnabled,\n            removeContainer: options.removeContainer,\n            allowTaint: options.allowTaint,\n            imageTimeout: options.imageTimeout / 2\n          });\n        }).then(function (canvas) {\n          return self.image = canvas;\n        });\n      }\n      FrameContainer.prototype.proxyLoad = function (proxy, bounds, options) {\n        var container = this.src;\n        return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n      };\n      module.exports = FrameContainer;\n    }, {\n      \"./core\": 4,\n      \"./proxy\": 16,\n      \"./utils\": 26\n    }],\n    9: [function (_dereq_, module, exports) {\n      function GradientContainer(imageData) {\n        this.src = imageData.value;\n        this.colorStops = [];\n        this.type = null;\n        this.x0 = 0.5;\n        this.y0 = 0.5;\n        this.x1 = 0.5;\n        this.y1 = 0.5;\n        this.promise = Promise.resolve(true);\n      }\n      GradientContainer.TYPES = {\n        LINEAR: 1,\n        RADIAL: 2\n      };\n\n      // TODO: support hsl[a], negative %/length values\n      // TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\n      GradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\n      module.exports = GradientContainer;\n    }, {}],\n    10: [function (_dereq_, module, exports) {\n      function ImageContainer(src, cors) {\n        this.src = src;\n        this.image = new Image();\n        var self = this;\n        this.tainted = null;\n        this.promise = new Promise(function (resolve, reject) {\n          self.image.onload = resolve;\n          self.image.onerror = reject;\n          if (cors) {\n            self.image.crossOrigin = \"anonymous\";\n          }\n          self.image.src = src;\n          if (self.image.complete === true) {\n            resolve(self.image);\n          }\n        });\n      }\n      module.exports = ImageContainer;\n    }, {}],\n    11: [function (_dereq_, module, exports) {\n      var log = _dereq_('./log');\n      var ImageContainer = _dereq_('./imagecontainer');\n      var DummyImageContainer = _dereq_('./dummyimagecontainer');\n      var ProxyImageContainer = _dereq_('./proxyimagecontainer');\n      var FrameContainer = _dereq_('./framecontainer');\n      var SVGContainer = _dereq_('./svgcontainer');\n      var SVGNodeContainer = _dereq_('./svgnodecontainer');\n      var LinearGradientContainer = _dereq_('./lineargradientcontainer');\n      var WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\n      var bind = _dereq_('./utils').bind;\n      function ImageLoader(options, support) {\n        this.link = null;\n        this.options = options;\n        this.support = support;\n        this.origin = this.getOrigin(window.location.href);\n      }\n      ImageLoader.prototype.findImages = function (nodes) {\n        var images = [];\n        nodes.reduce(function (imageNodes, container) {\n          switch (container.node.nodeName) {\n            case \"IMG\":\n              return imageNodes.concat([{\n                args: [container.node.src],\n                method: \"url\"\n              }]);\n            case \"svg\":\n            case \"IFRAME\":\n              return imageNodes.concat([{\n                args: [container.node],\n                method: container.node.nodeName\n              }]);\n          }\n          return imageNodes;\n        }, []).forEach(this.addImage(images, this.loadImage), this);\n        return images;\n      };\n      ImageLoader.prototype.findBackgroundImage = function (images, container) {\n        container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\n        return images;\n      };\n      ImageLoader.prototype.addImage = function (images, callback) {\n        return function (newImage) {\n          newImage.args.forEach(function (image) {\n            if (!this.imageExists(images, image)) {\n              images.splice(0, 0, callback.call(this, newImage));\n              log('Added image #' + images.length, typeof image === \"string\" ? image.substring(0, 100) : image);\n            }\n          }, this);\n        };\n      };\n      ImageLoader.prototype.hasImageBackground = function (imageData) {\n        return imageData.method !== \"none\";\n      };\n      ImageLoader.prototype.loadImage = function (imageData) {\n        if (imageData.method === \"url\") {\n          var src = imageData.args[0];\n          if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n            return new SVGContainer(src);\n          } else if (src.match(/data:image\\/.*;base64,/i)) {\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\n          } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n            return new ImageContainer(src, false);\n          } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n            return new ImageContainer(src, true);\n          } else if (this.options.proxy) {\n            return new ProxyImageContainer(src, this.options.proxy);\n          } else {\n            return new DummyImageContainer(src);\n          }\n        } else if (imageData.method === \"linear-gradient\") {\n          return new LinearGradientContainer(imageData);\n        } else if (imageData.method === \"gradient\") {\n          return new WebkitGradientContainer(imageData);\n        } else if (imageData.method === \"svg\") {\n          return new SVGNodeContainer(imageData.args[0], this.support.svg);\n        } else if (imageData.method === \"IFRAME\") {\n          return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n        } else {\n          return new DummyImageContainer(imageData);\n        }\n      };\n      ImageLoader.prototype.isSVG = function (src) {\n        return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\n      };\n      ImageLoader.prototype.imageExists = function (images, src) {\n        return images.some(function (image) {\n          return image.src === src;\n        });\n      };\n      ImageLoader.prototype.isSameOrigin = function (url) {\n        return this.getOrigin(url) === this.origin;\n      };\n      ImageLoader.prototype.getOrigin = function (url) {\n        var link = this.link || (this.link = document.createElement(\"a\"));\n        link.href = url;\n        link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n        return link.protocol + link.hostname + link.port;\n      };\n      ImageLoader.prototype.getPromise = function (container) {\n        return this.timeout(container, this.options.imageTimeout)['catch'](function () {\n          var dummy = new DummyImageContainer(container.src);\n          return dummy.promise.then(function (image) {\n            container.image = image;\n          });\n        });\n      };\n      ImageLoader.prototype.get = function (src) {\n        var found = null;\n        return this.images.some(function (img) {\n          return (found = img).src === src;\n        }) ? found : null;\n      };\n      ImageLoader.prototype.fetch = function (nodes) {\n        this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n        this.images.forEach(function (image, index) {\n          image.promise.then(function () {\n            log(\"Succesfully loaded image #\" + (index + 1), image);\n          }, function (e) {\n            log(\"Failed loading image #\" + (index + 1), image, e);\n          });\n        });\n        this.ready = Promise.all(this.images.map(this.getPromise, this));\n        log(\"Finished searching images\");\n        return this;\n      };\n      ImageLoader.prototype.timeout = function (container, timeout) {\n        var timer;\n        var promise = Promise.race([container.promise, new Promise(function (res, reject) {\n          timer = setTimeout(function () {\n            log(\"Timed out loading image\", container);\n            reject(container);\n          }, timeout);\n        })]).then(function (container) {\n          clearTimeout(timer);\n          return container;\n        });\n        promise['catch'](function () {\n          clearTimeout(timer);\n        });\n        return promise;\n      };\n      module.exports = ImageLoader;\n    }, {\n      \"./dummyimagecontainer\": 5,\n      \"./framecontainer\": 8,\n      \"./imagecontainer\": 10,\n      \"./lineargradientcontainer\": 12,\n      \"./log\": 13,\n      \"./proxyimagecontainer\": 17,\n      \"./svgcontainer\": 23,\n      \"./svgnodecontainer\": 24,\n      \"./utils\": 26,\n      \"./webkitgradientcontainer\": 27\n    }],\n    12: [function (_dereq_, module, exports) {\n      var GradientContainer = _dereq_('./gradientcontainer');\n      var Color = _dereq_('./color');\n      function LinearGradientContainer(imageData) {\n        GradientContainer.apply(this, arguments);\n        this.type = GradientContainer.TYPES.LINEAR;\n        var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test(imageData.args[0]) || !GradientContainer.REGEXP_COLORSTOP.test(imageData.args[0]);\n        if (hasDirection) {\n          imageData.args[0].split(/\\s+/).reverse().forEach(function (position, index) {\n            switch (position) {\n              case \"left\":\n                this.x0 = 0;\n                this.x1 = 1;\n                break;\n              case \"top\":\n                this.y0 = 0;\n                this.y1 = 1;\n                break;\n              case \"right\":\n                this.x0 = 1;\n                this.x1 = 0;\n                break;\n              case \"bottom\":\n                this.y0 = 1;\n                this.y1 = 0;\n                break;\n              case \"to\":\n                var y0 = this.y0;\n                var x0 = this.x0;\n                this.y0 = this.y1;\n                this.x0 = this.x1;\n                this.x1 = x0;\n                this.y1 = y0;\n                break;\n              case \"center\":\n                break;\n              // centered by default\n              // Firefox internally converts position keywords to percentages:\n              // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\n              default:\n                // percentage or absolute length\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\n                var ratio = parseFloat(position, 10) * 1e-2;\n                if (isNaN(ratio)) {\n                  // invalid or unhandled value\n                  break;\n                }\n                if (index === 0) {\n                  this.y0 = ratio;\n                  this.y1 = 1 - this.y0;\n                } else {\n                  this.x0 = ratio;\n                  this.x1 = 1 - this.x0;\n                }\n                break;\n            }\n          }, this);\n        } else {\n          this.y0 = 0;\n          this.y1 = 1;\n        }\n        this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function (colorStop) {\n          var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\n          var value = +colorStopMatch[2];\n          var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\n          return {\n            color: new Color(colorStopMatch[1]),\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\n            stop: unit === \"%\" ? value / 100 : null\n          };\n        });\n        if (this.colorStops[0].stop === null) {\n          this.colorStops[0].stop = 0;\n        }\n        if (this.colorStops[this.colorStops.length - 1].stop === null) {\n          this.colorStops[this.colorStops.length - 1].stop = 1;\n        }\n\n        // calculates and fills-in explicit stop positions when omitted from rule\n        this.colorStops.forEach(function (colorStop, index) {\n          if (colorStop.stop === null) {\n            this.colorStops.slice(index).some(function (find, count) {\n              if (find.stop !== null) {\n                colorStop.stop = (find.stop - this.colorStops[index - 1].stop) / (count + 1) + this.colorStops[index - 1].stop;\n                return true;\n              } else {\n                return false;\n              }\n            }, this);\n          }\n        }, this);\n      }\n      LinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n      // TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\n      LinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\n      module.exports = LinearGradientContainer;\n    }, {\n      \"./color\": 3,\n      \"./gradientcontainer\": 9\n    }],\n    13: [function (_dereq_, module, exports) {\n      var logger = function logger() {\n        if (logger.options.logging && window.console && window.console.log) {\n          Function.prototype.bind.call(window.console.log, window.console).apply(window.console, [Date.now() - logger.options.start + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\n        }\n      };\n      logger.options = {\n        logging: false\n      };\n      module.exports = logger;\n    }, {}],\n    14: [function (_dereq_, module, exports) {\n      var Color = _dereq_('./color');\n      var utils = _dereq_('./utils');\n      var getBounds = utils.getBounds;\n      var parseBackgrounds = utils.parseBackgrounds;\n      var offsetBounds = utils.offsetBounds;\n      function NodeContainer(node, parent) {\n        this.node = node;\n        this.parent = parent;\n        this.stack = null;\n        this.bounds = null;\n        this.borders = null;\n        this.clip = [];\n        this.backgroundClip = [];\n        this.offsetBounds = null;\n        this.visible = null;\n        this.computedStyles = null;\n        this.colors = {};\n        this.styles = {};\n        this.backgroundImages = null;\n        this.transformData = null;\n        this.transformMatrix = null;\n        this.isPseudoElement = false;\n        this.opacity = null;\n      }\n      NodeContainer.prototype.cloneTo = function (stack) {\n        stack.visible = this.visible;\n        stack.borders = this.borders;\n        stack.bounds = this.bounds;\n        stack.clip = this.clip;\n        stack.backgroundClip = this.backgroundClip;\n        stack.computedStyles = this.computedStyles;\n        stack.styles = this.styles;\n        stack.backgroundImages = this.backgroundImages;\n        stack.opacity = this.opacity;\n      };\n      NodeContainer.prototype.getOpacity = function () {\n        return this.opacity === null ? this.opacity = this.cssFloat('opacity') : this.opacity;\n      };\n      NodeContainer.prototype.assignStack = function (stack) {\n        this.stack = stack;\n        stack.children.push(this);\n      };\n      NodeContainer.prototype.isElementVisible = function () {\n        return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : this.css('display') !== \"none\" && this.css('visibility') !== \"hidden\" && !this.node.hasAttribute(\"data-html2canvas-ignore\") && (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\");\n      };\n      NodeContainer.prototype.css = function (attribute) {\n        if (!this.computedStyles) {\n          this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\n        }\n        return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n      };\n      NodeContainer.prototype.prefixedCss = function (attribute) {\n        var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n        var value = this.css(attribute);\n        if (value === undefined) {\n          prefixes.some(function (prefix) {\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n            return value !== undefined;\n          }, this);\n        }\n        return value === undefined ? null : value;\n      };\n      NodeContainer.prototype.computedStyle = function (type) {\n        return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n      };\n      NodeContainer.prototype.cssInt = function (attribute) {\n        var value = parseInt(this.css(attribute), 10);\n        return isNaN(value) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n      };\n\n      NodeContainer.prototype.color = function (attribute) {\n        return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n      };\n      NodeContainer.prototype.cssFloat = function (attribute) {\n        var value = parseFloat(this.css(attribute));\n        return isNaN(value) ? 0 : value;\n      };\n      NodeContainer.prototype.fontWeight = function () {\n        var weight = this.css(\"fontWeight\");\n        switch (parseInt(weight, 10)) {\n          case 401:\n            weight = \"bold\";\n            break;\n          case 400:\n            weight = \"normal\";\n            break;\n        }\n        return weight;\n      };\n      NodeContainer.prototype.parseClip = function () {\n        var matches = this.css('clip').match(this.CLIP);\n        if (matches) {\n          return {\n            top: parseInt(matches[1], 10),\n            right: parseInt(matches[2], 10),\n            bottom: parseInt(matches[3], 10),\n            left: parseInt(matches[4], 10)\n          };\n        }\n        return null;\n      };\n      NodeContainer.prototype.parseBackgroundImages = function () {\n        return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\n      };\n      NodeContainer.prototype.cssList = function (property, index) {\n        var value = (this.css(property) || '').split(',');\n        value = value[index || 0] || value[0] || 'auto';\n        value = value.trim().split(' ');\n        if (value.length === 1) {\n          value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\n        }\n        return value;\n      };\n      NodeContainer.prototype.parseBackgroundSize = function (bounds, image, index) {\n        var size = this.cssList(\"backgroundSize\", index);\n        var width, height;\n        if (isPercentage(size[0])) {\n          width = bounds.width * parseFloat(size[0]) / 100;\n        } else if (/contain|cover/.test(size[0])) {\n          var targetRatio = bounds.width / bounds.height,\n            currentRatio = image.width / image.height;\n          return targetRatio < currentRatio ^ size[0] === 'contain' ? {\n            width: bounds.height * currentRatio,\n            height: bounds.height\n          } : {\n            width: bounds.width,\n            height: bounds.width / currentRatio\n          };\n        } else {\n          width = parseInt(size[0], 10);\n        }\n        if (size[0] === 'auto' && size[1] === 'auto') {\n          height = image.height;\n        } else if (size[1] === 'auto') {\n          height = width / image.width * image.height;\n        } else if (isPercentage(size[1])) {\n          height = bounds.height * parseFloat(size[1]) / 100;\n        } else {\n          height = parseInt(size[1], 10);\n        }\n        if (size[0] === 'auto') {\n          width = height / image.height * image.width;\n        }\n        return {\n          width: width,\n          height: height\n        };\n      };\n      NodeContainer.prototype.parseBackgroundPosition = function (bounds, image, index, backgroundSize) {\n        var position = this.cssList('backgroundPosition', index);\n        var left, top;\n        if (isPercentage(position[0])) {\n          left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n        } else {\n          left = parseInt(position[0], 10);\n        }\n        if (position[1] === 'auto') {\n          top = left / image.width * image.height;\n        } else if (isPercentage(position[1])) {\n          top = (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\n        } else {\n          top = parseInt(position[1], 10);\n        }\n        if (position[0] === 'auto') {\n          left = top / image.height * image.width;\n        }\n        return {\n          left: left,\n          top: top\n        };\n      };\n      NodeContainer.prototype.parseBackgroundRepeat = function (index) {\n        return this.cssList(\"backgroundRepeat\", index)[0];\n      };\n      NodeContainer.prototype.parseTextShadows = function () {\n        var textShadow = this.css(\"textShadow\");\n        var results = [];\n        if (textShadow && textShadow !== 'none') {\n          var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n          for (var i = 0; shadows && i < shadows.length; i++) {\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n            results.push({\n              color: new Color(s[0]),\n              offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n              offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n              blur: s[3] ? s[3].replace('px', '') : 0\n            });\n          }\n        }\n        return results;\n      };\n      NodeContainer.prototype.parseTransform = function () {\n        if (!this.transformData) {\n          if (this.hasTransform()) {\n            var offset = this.parseBounds();\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\n            origin[0] += offset.left;\n            origin[1] += offset.top;\n            this.transformData = {\n              origin: origin,\n              matrix: this.parseTransformMatrix()\n            };\n          } else {\n            this.transformData = {\n              origin: [0, 0],\n              matrix: [1, 0, 0, 1, 0, 0]\n            };\n          }\n        }\n        return this.transformData;\n      };\n      NodeContainer.prototype.parseTransformMatrix = function () {\n        if (!this.transformMatrix) {\n          var transform = this.prefixedCss(\"transform\");\n          var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n          this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n        }\n        return this.transformMatrix;\n      };\n      NodeContainer.prototype.inverseTransform = function () {\n        var transformData = this.parseTransform();\n        return {\n          origin: transformData.origin,\n          matrix: matrixInverse(transformData.matrix)\n        };\n      };\n      NodeContainer.prototype.parseBounds = function () {\n        return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n      };\n      NodeContainer.prototype.hasTransform = function () {\n        return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || this.parent && this.parent.hasTransform();\n      };\n      NodeContainer.prototype.getValue = function () {\n        var value = this.node.value || \"\";\n        if (this.node.tagName === \"SELECT\") {\n          value = selectionValue(this.node);\n        } else if (this.node.type === \"password\") {\n          value = Array(value.length + 1).join(\"\\u2022\"); // jshint ignore:line\n        }\n\n        return value.length === 0 ? this.node.placeholder || \"\" : value;\n      };\n      NodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\n      NodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\n      NodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\n      NodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n      function selectionValue(node) {\n        var option = node.options[node.selectedIndex || 0];\n        return option ? option.text || \"\" : \"\";\n      }\n      function parseMatrix(match) {\n        if (match && match[1] === \"matrix\") {\n          return match[2].split(\",\").map(function (s) {\n            return parseFloat(s.trim());\n          });\n        } else if (match && match[1] === \"matrix3d\") {\n          var matrix3d = match[2].split(\",\").map(function (s) {\n            return parseFloat(s.trim());\n          });\n          return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\n        }\n      }\n      function matrixInverse(m) {\n        // This is programmed specifically for transform matrices, which have a fixed structure.\n        var a = m[0],\n          b = m[2],\n          c = m[4],\n          d = m[1],\n          e = m[3],\n          f = m[5];\n        var det = a * e - b * d;\n        var M = [e, -d, -b, a, b * f - c * e, c * d - a * f].map(function (val) {\n          return val / det;\n        });\n        return M;\n      }\n      function isPercentage(value) {\n        return value.toString().indexOf(\"%\") !== -1;\n      }\n      function removePx(str) {\n        return str.replace(\"px\", \"\");\n      }\n      function asFloat(str) {\n        return parseFloat(str);\n      }\n      module.exports = NodeContainer;\n    }, {\n      \"./color\": 3,\n      \"./utils\": 26\n    }],\n    15: [function (_dereq_, module, exports) {\n      var log = _dereq_('./log');\n      var punycode = _dereq_('punycode');\n      var NodeContainer = _dereq_('./nodecontainer');\n      var TextContainer = _dereq_('./textcontainer');\n      var PseudoElementContainer = _dereq_('./pseudoelementcontainer');\n      var FontMetrics = _dereq_('./fontmetrics');\n      var Color = _dereq_('./color');\n      var StackingContext = _dereq_('./stackingcontext');\n      var utils = _dereq_('./utils');\n      var bind = utils.bind;\n      var getBounds = utils.getBounds;\n      var parseBackgrounds = utils.parseBackgrounds;\n      var offsetBounds = utils.offsetBounds;\n      function NodeParser(element, renderer, support, imageLoader, options) {\n        log(\"Starting NodeParser\");\n        this.renderer = renderer;\n        this.options = options;\n        this.range = null;\n        this.support = support;\n        this.renderQueue = [];\n        this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n        var parent = new NodeContainer(element, null);\n        if (options.background) {\n          renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n        }\n        if (element === element.ownerDocument.documentElement) {\n          // http://www.w3.org/TR/css3-background/#special-backgrounds\n          var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\n          renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n        }\n        parent.visibile = parent.isElementVisible();\n        this.createPseudoHideStyles(element.ownerDocument);\n        this.disableAnimations(element.ownerDocument);\n        this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function (container) {\n          return container.visible = container.isElementVisible();\n        }).map(this.getPseudoElements, this));\n        this.fontMetrics = new FontMetrics();\n        log(\"Fetched nodes, total:\", this.nodes.length);\n        log(\"Calculate overflow clips\");\n        this.calculateOverflowClips();\n        log(\"Start fetching images\");\n        this.images = imageLoader.fetch(this.nodes.filter(isElement));\n        this.ready = this.images.ready.then(bind(function () {\n          log(\"Images loaded, starting parsing\");\n          log(\"Creating stacking contexts\");\n          this.createStackingContexts();\n          log(\"Sorting stacking contexts\");\n          this.sortStackingContexts(this.stack);\n          this.parse(this.stack);\n          log(\"Render queue created with \" + this.renderQueue.length + \" items\");\n          return new Promise(bind(function (resolve) {\n            if (!options.async) {\n              this.renderQueue.forEach(this.paint, this);\n              resolve();\n            } else if (typeof options.async === \"function\") {\n              options.async.call(this, this.renderQueue, resolve);\n            } else if (this.renderQueue.length > 0) {\n              this.renderIndex = 0;\n              this.asyncRenderer(this.renderQueue, resolve);\n            } else {\n              resolve();\n            }\n          }, this));\n        }, this));\n      }\n      NodeParser.prototype.calculateOverflowClips = function () {\n        this.nodes.forEach(function (container) {\n          if (isElement(container)) {\n            if (isPseudoElement(container)) {\n              container.appendToDOM();\n            }\n            container.borders = this.parseBorders(container);\n            var clip = container.css('overflow') === \"hidden\" ? [container.borders.clip] : [];\n            var cssClip = container.parseClip();\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\n              clip.push([[\"rect\", container.bounds.left + cssClip.left, container.bounds.top + cssClip.top, cssClip.right - cssClip.left, cssClip.bottom - cssClip.top]]);\n            }\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n            container.backgroundClip = container.css('overflow') !== \"hidden\" ? container.clip.concat([container.borders.clip]) : container.clip;\n            if (isPseudoElement(container)) {\n              container.cleanDOM();\n            }\n          } else if (isTextNode(container)) {\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\n          }\n          if (!isPseudoElement(container)) {\n            container.bounds = null;\n          }\n        }, this);\n      };\n      function hasParentClip(container) {\n        return container.parent && container.parent.clip.length;\n      }\n      NodeParser.prototype.asyncRenderer = function (queue, resolve, asyncTimer) {\n        asyncTimer = asyncTimer || Date.now();\n        this.paint(queue[this.renderIndex++]);\n        if (queue.length === this.renderIndex) {\n          resolve();\n        } else if (asyncTimer + 20 > Date.now()) {\n          this.asyncRenderer(queue, resolve, asyncTimer);\n        } else {\n          setTimeout(bind(function () {\n            this.asyncRenderer(queue, resolve);\n          }, this), 0);\n        }\n      };\n      NodeParser.prototype.createPseudoHideStyles = function (document) {\n        this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' + '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\n      };\n      NodeParser.prototype.disableAnimations = function (document) {\n        this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' + '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\n      };\n      NodeParser.prototype.createStyles = function (document, styles) {\n        var hidePseudoElements = document.createElement('style');\n        hidePseudoElements.innerHTML = styles;\n        document.body.appendChild(hidePseudoElements);\n      };\n      NodeParser.prototype.getPseudoElements = function (container) {\n        var nodes = [[container]];\n        if (container.node.nodeType === Node.ELEMENT_NODE) {\n          var before = this.getPseudoElement(container, \":before\");\n          var after = this.getPseudoElement(container, \":after\");\n          if (before) {\n            nodes.push(before);\n          }\n          if (after) {\n            nodes.push(after);\n          }\n        }\n        return flatten(nodes);\n      };\n      function toCamelCase(str) {\n        return str.replace(/(\\-[a-z])/g, function (match) {\n          return match.toUpperCase().replace('-', '');\n        });\n      }\n      NodeParser.prototype.getPseudoElement = function (container, type) {\n        var style = container.computedStyle(type);\n        if (!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\n          return null;\n        }\n        var content = stripQuotes(style.content);\n        var isImage = content.substr(0, 3) === 'url';\n        var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n        var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n        for (var i = style.length - 1; i >= 0; i--) {\n          var property = toCamelCase(style.item(i));\n          pseudoNode.style[property] = style[property];\n        }\n        pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n        if (isImage) {\n          pseudoNode.src = parseBackgrounds(content)[0].args[0];\n          return [pseudoContainer];\n        } else {\n          var text = document.createTextNode(content);\n          pseudoNode.appendChild(text);\n          return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n        }\n      };\n      NodeParser.prototype.getChildren = function (parentContainer) {\n        return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function (node) {\n          var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\n          return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : [] : container;\n        }, this));\n      };\n      NodeParser.prototype.newStackingContext = function (container, hasOwnStacking) {\n        var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n        container.cloneTo(stack);\n        var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n        parentStack.contexts.push(stack);\n        container.stack = stack;\n      };\n      NodeParser.prototype.createStackingContexts = function () {\n        this.nodes.forEach(function (container) {\n          if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\n            this.newStackingContext(container, true);\n          } else if (isElement(container) && (isPositioned(container) && zIndex0(container) || isInlineBlock(container) || isFloating(container))) {\n            this.newStackingContext(container, false);\n          } else {\n            container.assignStack(container.parent.stack);\n          }\n        }, this);\n      };\n      NodeParser.prototype.isBodyWithTransparentRoot = function (container) {\n        return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\n      };\n      NodeParser.prototype.isRootElement = function (container) {\n        return container.parent === null;\n      };\n      NodeParser.prototype.sortStackingContexts = function (stack) {\n        stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n        stack.contexts.forEach(this.sortStackingContexts, this);\n      };\n      NodeParser.prototype.parseTextBounds = function (container) {\n        return function (text, index, textList) {\n          if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\n              var offset = textList.slice(0, index).join(\"\").length;\n              return this.getRangeBounds(container.node, offset, text.length);\n            } else if (container.node && typeof container.node.data === \"string\") {\n              var replacementNode = container.node.splitText(text.length);\n              var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n              container.node = replacementNode;\n              return bounds;\n            }\n          } else if (!this.support.rangeBounds || container.parent.hasTransform()) {\n            container.node = container.node.splitText(text.length);\n          }\n          return {};\n        };\n      };\n      NodeParser.prototype.getWrapperBounds = function (node, transform) {\n        var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n        var parent = node.parentNode,\n          backupText = node.cloneNode(true);\n        wrapper.appendChild(node.cloneNode(true));\n        parent.replaceChild(wrapper, node);\n        var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n        parent.replaceChild(backupText, wrapper);\n        return bounds;\n      };\n      NodeParser.prototype.getRangeBounds = function (node, offset, length) {\n        var range = this.range || (this.range = node.ownerDocument.createRange());\n        range.setStart(node, offset);\n        range.setEnd(node, offset + length);\n        return range.getBoundingClientRect();\n      };\n      function ClearTransform() {}\n      NodeParser.prototype.parse = function (stack) {\n        // http://www.w3.org/TR/CSS21/visuren.html#z-index\n        var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n        var descendantElements = stack.children.filter(isElement);\n        var descendantNonFloats = descendantElements.filter(not(isFloating));\n        var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n        var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n        var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n        var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n        var text = stack.children.filter(isTextNode).filter(hasText);\n        var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n        negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats).concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function (container) {\n          this.renderQueue.push(container);\n          if (isStackingContext(container)) {\n            this.parse(container);\n            this.renderQueue.push(new ClearTransform());\n          }\n        }, this);\n      };\n      NodeParser.prototype.paint = function (container) {\n        try {\n          if (container instanceof ClearTransform) {\n            this.renderer.ctx.restore();\n          } else if (isTextNode(container)) {\n            if (isPseudoElement(container.parent)) {\n              container.parent.appendToDOM();\n            }\n            this.paintText(container);\n            if (isPseudoElement(container.parent)) {\n              container.parent.cleanDOM();\n            }\n          } else {\n            this.paintNode(container);\n          }\n        } catch (e) {\n          log(e);\n          if (this.options.strict) {\n            throw e;\n          }\n        }\n      };\n      NodeParser.prototype.paintNode = function (container) {\n        if (isStackingContext(container)) {\n          this.renderer.setOpacity(container.opacity);\n          this.renderer.ctx.save();\n          if (container.hasTransform()) {\n            this.renderer.setTransform(container.parseTransform());\n          }\n        }\n        if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\n          this.paintCheckbox(container);\n        } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\n          this.paintRadio(container);\n        } else {\n          this.paintElement(container);\n        }\n      };\n      NodeParser.prototype.paintElement = function (container) {\n        var bounds = container.parseBounds();\n        this.renderer.clip(container.backgroundClip, function () {\n          this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n        }, this, container);\n        this.renderer.mask(container.backgroundClip, function () {\n          this.renderer.renderShadows(container, container.borders.clip);\n        }, this, container);\n        this.renderer.clip(container.clip, function () {\n          this.renderer.renderBorders(container.borders.borders);\n        }, this, container);\n        this.renderer.clip(container.backgroundClip, function () {\n          switch (container.node.nodeName) {\n            case \"svg\":\n            case \"IFRAME\":\n              var imgContainer = this.images.get(container.node);\n              if (imgContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n              } else {\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\n              }\n              break;\n            case \"IMG\":\n              var imageContainer = this.images.get(container.node.src);\n              if (imageContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n              } else {\n                log(\"Error loading <img>\", container.node.src);\n              }\n              break;\n            case \"CANVAS\":\n              this.renderer.renderImage(container, bounds, container.borders, {\n                image: container.node\n              });\n              break;\n            case \"SELECT\":\n            case \"INPUT\":\n            case \"TEXTAREA\":\n              this.paintFormValue(container);\n              break;\n          }\n        }, this, container);\n      };\n      NodeParser.prototype.paintCheckbox = function (container) {\n        var b = container.parseBounds();\n        var size = Math.min(b.width, b.height);\n        var bounds = {\n          width: size - 1,\n          height: size - 1,\n          top: b.top,\n          left: b.left\n        };\n        var r = [3, 3];\n        var radius = [r, r, r, r];\n        var borders = [1, 1, 1, 1].map(function (w) {\n          return {\n            color: new Color('#A5A5A5'),\n            width: w\n          };\n        });\n        var borderPoints = calculateCurvePoints(bounds, radius, borders);\n        this.renderer.clip(container.backgroundClip, function () {\n          this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\n          this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n          if (container.node.checked) {\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', size - 3 + \"px\", 'arial');\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\n          }\n        }, this, container);\n      };\n      NodeParser.prototype.paintRadio = function (container) {\n        var bounds = container.parseBounds();\n        var size = Math.min(bounds.width, bounds.height) - 2;\n        this.renderer.clip(container.backgroundClip, function () {\n          this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n          if (container.node.checked) {\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n          }\n        }, this, container);\n      };\n      NodeParser.prototype.paintFormValue = function (container) {\n        var value = container.getValue();\n        if (value.length > 0) {\n          var document = container.node.ownerDocument;\n          var wrapper = document.createElement('html2canvaswrapper');\n          var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color', 'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom', 'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth', 'boxSizing', 'whiteSpace', 'wordWrap'];\n          properties.forEach(function (property) {\n            try {\n              wrapper.style[property] = container.css(property);\n            } catch (e) {\n              // Older IE has issues with \"border\"\n              log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\n            }\n          });\n          var bounds = container.parseBounds();\n          wrapper.style.position = \"fixed\";\n          wrapper.style.left = bounds.left + \"px\";\n          wrapper.style.top = bounds.top + \"px\";\n          wrapper.textContent = value;\n          document.body.appendChild(wrapper);\n          this.paintText(new TextContainer(wrapper.firstChild, container));\n          document.body.removeChild(wrapper);\n        }\n      };\n      NodeParser.prototype.paintText = function (container) {\n        container.applyTextTransform();\n        var characters = punycode.ucs2.decode(container.node.data);\n        var wordRendering = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data);\n        var textList = wordRendering ? getWords(characters) : characters.map(function (character) {\n          return punycode.ucs2.encode([character]);\n        });\n        if (!wordRendering) {\n          container.parent.node.style.fontVariantLigatures = 'none';\n        }\n        var weight = container.parent.fontWeight();\n        var size = container.parent.css('fontSize');\n        var family = container.parent.css('fontFamily');\n        var shadows = container.parent.parseTextShadows();\n        this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n        if (shadows.length) {\n          // TODO: support multiple text shadows\n          this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n        } else {\n          this.renderer.clearShadow();\n        }\n        this.renderer.clip(container.parent.clip, function () {\n          textList.map(this.parseTextBounds(container), this).forEach(function (bounds, index) {\n            if (bounds) {\n              this.renderer.text(textList[index], bounds.left, bounds.bottom);\n              this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n            }\n          }, this);\n        }, this, container.parent);\n      };\n      NodeParser.prototype.renderTextDecoration = function (container, bounds, metrics) {\n        switch (container.css(\"textDecoration\").split(\" \")[0]) {\n          case \"underline\":\n            // Draws a line at the baseline of the font\n            // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n            this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n            break;\n          case \"overline\":\n            this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\n            break;\n          case \"line-through\":\n            // TODO try and find exact position for line-through\n            this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n            break;\n        }\n      };\n      var borderColorTransforms = {\n        inset: [[\"darken\", 0.60], [\"darken\", 0.10], [\"darken\", 0.10], [\"darken\", 0.60]]\n      };\n      NodeParser.prototype.parseBorders = function (container) {\n        var nodeBounds = container.parseBounds();\n        var radius = getBorderRadiusData(container);\n        var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function (side, index) {\n          var style = container.css('border' + side + 'Style');\n          var color = container.color('border' + side + 'Color');\n          if (style === \"inset\" && color.isBlack()) {\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\n          }\n\n          var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n          return {\n            width: container.cssInt('border' + side + 'Width'),\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n            style: style,\n            pathArgs: null,\n            args: null\n          };\n        });\n        var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n        return {\n          clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n          borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n        };\n      };\n      function calculateBorders(borders, nodeBounds, borderPoints, radius) {\n        var pathBounds = {\n          top: nodeBounds.top + borders[0].width / 2,\n          right: nodeBounds.right - borders[1].width / 2,\n          bottom: nodeBounds.bottom - borders[2].width / 2,\n          left: nodeBounds.left + borders[3].width / 2\n        };\n        return borders.map(function (border, borderSide) {\n          if (border.width > 0) {\n            var bx = nodeBounds.left;\n            var by = nodeBounds.top;\n            var bw = nodeBounds.width;\n            var bh = nodeBounds.height - borders[2].width;\n            switch (borderSide) {\n              case 0:\n                // top border\n                bh = borders[0].width;\n                border.args = drawSide({\n                  c1: [bx, by],\n                  c2: [bx + bw, by],\n                  c3: [bx + bw - borders[1].width, by + bh],\n                  c4: [bx + borders[3].width, by + bh]\n                }, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\n                border.pathArgs = drawSidePath({\n                  c1: [pathBounds.left, pathBounds.top],\n                  c2: [pathBounds.right, pathBounds.top]\n                }, radius[0], radius[1], borderPoints.topLeft, borderPoints.topRight);\n                break;\n              case 1:\n                // right border\n                bx = nodeBounds.left + nodeBounds.width - borders[1].width;\n                bw = borders[1].width;\n                border.args = drawSide({\n                  c1: [bx + bw, by],\n                  c2: [bx + bw, by + bh + borders[2].width],\n                  c3: [bx, by + bh],\n                  c4: [bx, by + borders[0].width]\n                }, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\n                border.pathArgs = drawSidePath({\n                  c1: [pathBounds.right, pathBounds.top],\n                  c2: [pathBounds.right, pathBounds.bottom]\n                }, radius[1], radius[2], borderPoints.topRight, borderPoints.bottomRight);\n                break;\n              case 2:\n                // bottom border\n                by = by + nodeBounds.height - borders[2].width;\n                bh = borders[2].width;\n                border.args = drawSide({\n                  c1: [bx + bw, by + bh],\n                  c2: [bx, by + bh],\n                  c3: [bx + borders[3].width, by],\n                  c4: [bx + bw - borders[3].width, by]\n                }, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\n                border.pathArgs = drawSidePath({\n                  c1: [pathBounds.right, pathBounds.bottom],\n                  c2: [pathBounds.left, pathBounds.bottom]\n                }, radius[2], radius[3], borderPoints.bottomRight, borderPoints.bottomLeft);\n                break;\n              case 3:\n                // left border\n                bw = borders[3].width;\n                border.args = drawSide({\n                  c1: [bx, by + bh + borders[2].width],\n                  c2: [bx, by],\n                  c3: [bx + bw, by + borders[0].width],\n                  c4: [bx + bw, by + bh]\n                }, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\n                border.pathArgs = drawSidePath({\n                  c1: [pathBounds.left, pathBounds.bottom],\n                  c2: [pathBounds.left, pathBounds.top]\n                }, radius[3], radius[0], borderPoints.bottomLeft, borderPoints.topLeft);\n                break;\n            }\n          }\n          return border;\n        });\n      }\n      NodeParser.prototype.parseBackgroundClip = function (container, borderPoints, borders, radius, bounds) {\n        var backgroundClip = container.css('backgroundClip'),\n          borderArgs = [];\n        switch (backgroundClip) {\n          case \"content-box\":\n          case \"padding-box\":\n            parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\n            parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\n            parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\n            parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\n            break;\n          default:\n            parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n            parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n            parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\n            parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n            break;\n        }\n        return borderArgs;\n      };\n      function getCurvePoints(x, y, r1, r2) {\n        var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n        var ox = r1 * kappa,\n          // control point offset horizontal\n          oy = r2 * kappa,\n          // control point offset vertical\n          xm = x + r1,\n          // x-middle\n          ym = y + r2; // y-middle\n        return {\n          topLeft: bezierCurve({\n            x: x,\n            y: ym\n          }, {\n            x: x,\n            y: ym - oy\n          }, {\n            x: xm - ox,\n            y: y\n          }, {\n            x: xm,\n            y: y\n          }),\n          topRight: bezierCurve({\n            x: x,\n            y: y\n          }, {\n            x: x + ox,\n            y: y\n          }, {\n            x: xm,\n            y: ym - oy\n          }, {\n            x: xm,\n            y: ym\n          }),\n          bottomRight: bezierCurve({\n            x: xm,\n            y: y\n          }, {\n            x: xm,\n            y: y + oy\n          }, {\n            x: x + ox,\n            y: ym\n          }, {\n            x: x,\n            y: ym\n          }),\n          bottomLeft: bezierCurve({\n            x: xm,\n            y: ym\n          }, {\n            x: xm - ox,\n            y: ym\n          }, {\n            x: x,\n            y: y + oy\n          }, {\n            x: x,\n            y: y\n          })\n        };\n      }\n      function calculateCurvePoints(bounds, borderRadius, borders) {\n        var x = bounds.left,\n          y = bounds.top,\n          width = bounds.width,\n          height = bounds.height,\n          tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\n          tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\n          trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\n          trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\n          brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\n          brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\n          blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\n          blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\n        var topWidth = width - trh,\n          rightHeight = height - brv,\n          bottomWidth = width - brh,\n          leftHeight = height - blv;\n        return {\n          topLeft: getCurvePoints(x + borders[3].width / 2, y + borders[0].width / 2, Math.max(0, tlh - borders[3].width / 2), Math.max(0, tlv - borders[0].width / 2)).topLeft.subdivide(0.5),\n          topRight: getCurvePoints(x + Math.min(topWidth, width + borders[3].width / 2), y + borders[0].width / 2, topWidth > width + borders[3].width / 2 ? 0 : trh - borders[3].width / 2, trv - borders[0].width / 2).topRight.subdivide(0.5),\n          bottomRight: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width / 2), y + Math.min(rightHeight, height + borders[0].width / 2), Math.max(0, brh - borders[1].width / 2), brv - borders[2].width / 2).bottomRight.subdivide(0.5),\n          bottomLeft: getCurvePoints(x + borders[3].width / 2, y + leftHeight, Math.max(0, blh - borders[3].width / 2), blv - borders[2].width / 2).bottomLeft.subdivide(0.5),\n          topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n          topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\n          topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n          topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, topWidth > width + borders[3].width ? 0 : trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\n          bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n          bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width), brv - borders[2].width).bottomRight.subdivide(0.5),\n          bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n          bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n        };\n      }\n      function bezierCurve(start, startControl, endControl, end) {\n        var lerp = function lerp(a, b, t) {\n          return {\n            x: a.x + (b.x - a.x) * t,\n            y: a.y + (b.y - a.y) * t\n          };\n        };\n        return {\n          start: start,\n          startControl: startControl,\n          endControl: endControl,\n          end: end,\n          subdivide: function subdivide(t) {\n            var ab = lerp(start, startControl, t),\n              bc = lerp(startControl, endControl, t),\n              cd = lerp(endControl, end, t),\n              abbc = lerp(ab, bc, t),\n              bccd = lerp(bc, cd, t),\n              dest = lerp(abbc, bccd, t);\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n          },\n          curveTo: function curveTo(borderArgs) {\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n          },\n          curveToReversed: function curveToReversed(borderArgs) {\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n          }\n        };\n      }\n      function drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n        var borderArgs = [];\n        if (radius1[0] > 0 || radius1[1] > 0) {\n          borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\n          outer1[1].curveTo(borderArgs);\n        } else {\n          borderArgs.push([\"line\", borderData.c1[0], borderData.c1[1]]);\n        }\n        if (radius2[0] > 0 || radius2[1] > 0) {\n          borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\n          outer2[0].curveTo(borderArgs);\n          borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\n          inner2[0].curveToReversed(borderArgs);\n        } else {\n          borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n          borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\n        }\n        if (radius1[0] > 0 || radius1[1] > 0) {\n          borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\n          inner1[1].curveToReversed(borderArgs);\n        } else {\n          borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\n        }\n        return borderArgs;\n      }\n      function drawSidePath(borderData, radius1, radius2, curve1, curve2) {\n        var borderArgs = [];\n        if (radius1[0] > 0 || radius1[1] > 0) {\n          borderArgs.push([\"line\", curve1[1].start.x, curve1[1].start.y]);\n          curve1[1].curveTo(borderArgs);\n        } else {\n          borderArgs.push([\"line\", borderData.c1[0], borderData.c1[1]]);\n        }\n        if (radius2[0] > 0 || radius2[1] > 0) {\n          borderArgs.push([\"line\", curve2[0].start.x, curve2[0].start.y]);\n          curve2[0].curveTo(borderArgs);\n        } else {\n          borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n        }\n        return borderArgs;\n      }\n      function parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n        if (radius1[0] > 0 || radius1[1] > 0) {\n          borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\n          corner1[0].curveTo(borderArgs);\n          corner1[1].curveTo(borderArgs);\n        } else {\n          borderArgs.push([\"line\", x, y]);\n        }\n        if (radius2[0] > 0 || radius2[1] > 0) {\n          borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\n        }\n      }\n      function negativeZIndex(container) {\n        return container.cssInt(\"zIndex\") < 0;\n      }\n      function positiveZIndex(container) {\n        return container.cssInt(\"zIndex\") > 0;\n      }\n      function zIndex0(container) {\n        return container.cssInt(\"zIndex\") === 0;\n      }\n      function inlineLevel(container) {\n        return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n      }\n      function isStackingContext(container) {\n        return container instanceof StackingContext;\n      }\n      function hasText(container) {\n        return container.node.data.trim().length > 0;\n      }\n      function noLetterSpacing(container) {\n        return /^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\"));\n      }\n      function getBorderRadiusData(container) {\n        return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function (side) {\n          var value = container.css('border' + side + 'Radius');\n          var arr = value.split(\" \");\n          if (arr.length <= 1) {\n            arr[1] = arr[0];\n          }\n          return arr.map(asInt);\n        });\n      }\n      function renderableNode(node) {\n        return node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE;\n      }\n      function isPositionedForStacking(container) {\n        var position = container.css(\"position\");\n        var zIndex = [\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1 ? container.css(\"zIndex\") : \"auto\";\n        return zIndex !== \"auto\";\n      }\n      function isPositioned(container) {\n        return container.css(\"position\") !== \"static\";\n      }\n      function isFloating(container) {\n        return container.css(\"float\") !== \"none\";\n      }\n      function isInlineBlock(container) {\n        return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n      }\n      function not(callback) {\n        var context = this;\n        return function () {\n          return !callback.apply(context, arguments);\n        };\n      }\n      function isElement(container) {\n        return container.node.nodeType === Node.ELEMENT_NODE;\n      }\n      function isPseudoElement(container) {\n        return container.isPseudoElement === true;\n      }\n      function isTextNode(container) {\n        return container.node.nodeType === Node.TEXT_NODE;\n      }\n      function zIndexSort(contexts) {\n        return function (a, b) {\n          return a.cssInt(\"zIndex\") + contexts.indexOf(a) / contexts.length - (b.cssInt(\"zIndex\") + contexts.indexOf(b) / contexts.length);\n        };\n      }\n      function hasOpacity(container) {\n        return container.getOpacity() < 1;\n      }\n      function asInt(value) {\n        return parseInt(value, 10);\n      }\n      function getWidth(border) {\n        return border.width;\n      }\n      function nonIgnoredElement(nodeContainer) {\n        return nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1;\n      }\n      function flatten(arrays) {\n        return [].concat.apply([], arrays);\n      }\n      function stripQuotes(content) {\n        var first = content.substr(0, 1);\n        return first === content.substr(content.length - 1) && first.match(/'|\"/) ? content.substr(1, content.length - 2) : content;\n      }\n      function getWords(characters) {\n        var words = [],\n          i = 0,\n          onWordBoundary = false,\n          word;\n        while (characters.length) {\n          if (isWordBoundary(characters[i]) === onWordBoundary) {\n            word = characters.splice(0, i);\n            if (word.length) {\n              words.push(punycode.ucs2.encode(word));\n            }\n            onWordBoundary = !onWordBoundary;\n            i = 0;\n          } else {\n            i++;\n          }\n          if (i >= characters.length) {\n            word = characters.splice(0, i);\n            if (word.length) {\n              words.push(punycode.ucs2.encode(word));\n            }\n          }\n        }\n        return words;\n      }\n      function isWordBoundary(characterCode) {\n        return [32,\n        // <space>\n        13,\n        // \\r\n        10,\n        // \\n\n        9,\n        // \\t\n        45 // -\n        ].indexOf(characterCode) !== -1;\n      }\n      function hasUnicode(string) {\n        return /[^\\u0000-\\u00ff]/.test(string);\n      }\n      module.exports = NodeParser;\n    }, {\n      \"./color\": 3,\n      \"./fontmetrics\": 7,\n      \"./log\": 13,\n      \"./nodecontainer\": 14,\n      \"./pseudoelementcontainer\": 18,\n      \"./stackingcontext\": 21,\n      \"./textcontainer\": 25,\n      \"./utils\": 26,\n      \"punycode\": 1\n    }],\n    16: [function (_dereq_, module, exports) {\n      var XHR = _dereq_('./xhr');\n      var utils = _dereq_('./utils');\n      var log = _dereq_('./log');\n      var createWindowClone = _dereq_('./clone');\n      var decode64 = utils.decode64;\n      function Proxy(src, proxyUrl, document) {\n        var supportsCORS = ('withCredentials' in new XMLHttpRequest());\n        if (!proxyUrl) {\n          return Promise.reject(\"No proxy configured\");\n        }\n        var callback = createCallback(supportsCORS);\n        var url = createProxyUrl(proxyUrl, src, callback);\n        return supportsCORS ? XHR(url) : jsonp(document, url, callback).then(function (response) {\n          return decode64(response.content);\n        });\n      }\n      var proxyCount = 0;\n      function ProxyURL(src, proxyUrl, document) {\n        var supportsCORSImage = ('crossOrigin' in new Image());\n        var callback = createCallback(supportsCORSImage);\n        var url = createProxyUrl(proxyUrl, src, callback);\n        return supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function (response) {\n          return \"data:\" + response.type + \";base64,\" + response.content;\n        });\n      }\n      function jsonp(document, url, callback) {\n        return new Promise(function (resolve, reject) {\n          var s = document.createElement(\"script\");\n          var cleanup = function cleanup() {\n            delete window.html2canvas.proxy[callback];\n            document.body.removeChild(s);\n          };\n          window.html2canvas.proxy[callback] = function (response) {\n            cleanup();\n            resolve(response);\n          };\n          s.src = url;\n          s.onerror = function (e) {\n            cleanup();\n            reject(e);\n          };\n          document.body.appendChild(s);\n        });\n      }\n      function createCallback(useCORS) {\n        return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + ++proxyCount + \"_\" + Math.round(Math.random() * 100000) : \"\";\n      }\n      function createProxyUrl(proxyUrl, src, callback) {\n        return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\n      }\n      function documentFromHTML(src) {\n        return function (html) {\n          var parser = new DOMParser(),\n            doc;\n          try {\n            doc = parser.parseFromString(html, \"text/html\");\n          } catch (e) {\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\n            doc = document.implementation.createHTMLDocument(\"\");\n            try {\n              doc.open();\n              doc.write(html);\n              doc.close();\n            } catch (ee) {\n              log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\n              doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n            }\n          }\n\n          var b = doc.querySelector(\"base\");\n          if (!b || !b.href.host) {\n            var base = doc.createElement(\"base\");\n            base.href = src;\n            doc.head.insertBefore(base, doc.head.firstChild);\n          }\n          return doc;\n        };\n      }\n      function loadUrlDocument(src, proxy, document, width, height, options) {\n        return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function (doc) {\n          return createWindowClone(doc, document, width, height, options, 0, 0);\n        });\n      }\n      exports.Proxy = Proxy;\n      exports.ProxyURL = ProxyURL;\n      exports.loadUrlDocument = loadUrlDocument;\n    }, {\n      \"./clone\": 2,\n      \"./log\": 13,\n      \"./utils\": 26,\n      \"./xhr\": 28\n    }],\n    17: [function (_dereq_, module, exports) {\n      var ProxyURL = _dereq_('./proxy').ProxyURL;\n      function ProxyImageContainer(src, proxy) {\n        var link = document.createElement(\"a\");\n        link.href = src;\n        src = link.href;\n        this.src = src;\n        this.image = new Image();\n        var self = this;\n        this.promise = new Promise(function (resolve, reject) {\n          self.image.crossOrigin = \"Anonymous\";\n          self.image.onload = resolve;\n          self.image.onerror = reject;\n          new ProxyURL(src, proxy, document).then(function (url) {\n            self.image.src = url;\n          })['catch'](reject);\n        });\n      }\n      module.exports = ProxyImageContainer;\n    }, {\n      \"./proxy\": 16\n    }],\n    18: [function (_dereq_, module, exports) {\n      var NodeContainer = _dereq_('./nodecontainer');\n      function PseudoElementContainer(node, parent, type) {\n        NodeContainer.call(this, node, parent);\n        this.isPseudoElement = true;\n        this.before = type === \":before\";\n      }\n      PseudoElementContainer.prototype.cloneTo = function (stack) {\n        PseudoElementContainer.prototype.cloneTo.call(this, stack);\n        stack.isPseudoElement = true;\n        stack.before = this.before;\n      };\n      PseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n      PseudoElementContainer.prototype.appendToDOM = function () {\n        if (this.before) {\n          this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n        } else {\n          this.parent.node.appendChild(this.node);\n        }\n        this.parent.node.className += \" \" + this.getHideClass();\n      };\n      PseudoElementContainer.prototype.cleanDOM = function () {\n        this.node.parentNode.removeChild(this.node);\n        this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\n      };\n      PseudoElementContainer.prototype.getHideClass = function () {\n        return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\n      };\n      PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\n      PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\n      module.exports = PseudoElementContainer;\n    }, {\n      \"./nodecontainer\": 14\n    }],\n    19: [function (_dereq_, module, exports) {\n      var log = _dereq_('./log');\n      function Renderer(width, height, images, options, document) {\n        this.width = width;\n        this.height = height;\n        this.images = images;\n        this.options = options;\n        this.document = document;\n      }\n      Renderer.prototype.renderImage = function (container, bounds, borderData, imageContainer) {\n        var paddingLeft = container.cssInt('paddingLeft'),\n          paddingTop = container.cssInt('paddingTop'),\n          paddingRight = container.cssInt('paddingRight'),\n          paddingBottom = container.cssInt('paddingBottom'),\n          borders = borderData.borders;\n        var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n        var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n        this.drawImage(imageContainer, 0, 0, imageContainer.image.width || width, imageContainer.image.height || height, bounds.left + paddingLeft + borders[3].width, bounds.top + paddingTop + borders[0].width, width, height);\n      };\n      Renderer.prototype.renderBackground = function (container, bounds, borderData) {\n        if (bounds.height > 0 && bounds.width > 0) {\n          this.renderBackgroundColor(container, bounds);\n          this.renderBackgroundImage(container, bounds, borderData);\n        }\n      };\n      Renderer.prototype.renderBackgroundColor = function (container, bounds) {\n        var color = container.color(\"backgroundColor\");\n        if (!color.isTransparent()) {\n          this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n        }\n      };\n      Renderer.prototype.renderShadows = function (container, shape) {\n        var boxShadow = container.css('boxShadow');\n        if (boxShadow !== 'none') {\n          var shadows = boxShadow.split(/,(?![^(]*\\))/);\n          this.shadow(shape, shadows);\n        }\n      };\n      Renderer.prototype.renderBorders = function (borders) {\n        borders.forEach(this.renderBorder, this);\n      };\n      Renderer.prototype.renderBorder = function (data) {\n        if (!data.color.isTransparent() && data.args !== null) {\n          if (data.style === 'dashed' || data.style === 'dotted') {\n            var dash = data.style === 'dashed' ? 3 : data.width;\n            this.ctx.setLineDash([dash]);\n            this.path(data.pathArgs);\n            this.ctx.strokeStyle = data.color;\n            this.ctx.lineWidth = data.width;\n            this.ctx.stroke();\n          } else {\n            this.drawShape(data.args, data.color);\n          }\n        }\n      };\n      Renderer.prototype.renderBackgroundImage = function (container, bounds, borderData) {\n        var backgroundImages = container.parseBackgroundImages();\n        backgroundImages.reverse().forEach(function (backgroundImage, index, arr) {\n          switch (backgroundImage.method) {\n            case \"url\":\n              var image = this.images.get(backgroundImage.args[0]);\n              if (image) {\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index + 1), borderData);\n              } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n              }\n              break;\n            case \"linear-gradient\":\n            case \"gradient\":\n              var gradientImage = this.images.get(backgroundImage.value);\n              if (gradientImage) {\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\n              } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n              }\n              break;\n            case \"none\":\n              break;\n            default:\n              log(\"Unknown background-image type\", backgroundImage.args[0]);\n          }\n        }, this);\n      };\n      Renderer.prototype.renderBackgroundRepeating = function (container, bounds, imageContainer, index, borderData) {\n        var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n        var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n        var repeat = container.parseBackgroundRepeat(index);\n        switch (repeat) {\n          case \"repeat-x\":\n          case \"repeat no-repeat\":\n            this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\n            break;\n          case \"repeat-y\":\n          case \"no-repeat repeat\":\n            this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\n            break;\n          case \"no-repeat\":\n            this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\n            break;\n          default:\n            this.renderBackgroundRepeat(imageContainer, position, size, {\n              top: bounds.top,\n              left: bounds.left\n            }, borderData[3], borderData[0]);\n            break;\n        }\n      };\n      module.exports = Renderer;\n    }, {\n      \"./log\": 13\n    }],\n    20: [function (_dereq_, module, exports) {\n      var Renderer = _dereq_('../renderer');\n      var LinearGradientContainer = _dereq_('../lineargradientcontainer');\n      var log = _dereq_('../log');\n      function CanvasRenderer(width, height) {\n        Renderer.apply(this, arguments);\n        this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\n        this.ctx = this.canvas.getContext(\"2d\");\n        if (!this.options.canvas) {\n          if (this.options.dpi) {\n            this.options.scale = this.options.dpi / 96; // 1 CSS inch = 96px.\n          }\n\n          if (this.options.scale) {\n            this.canvas.style.width = width + 'px';\n            this.canvas.style.height = height + 'px';\n            this.canvas.width = Math.floor(width * this.options.scale);\n            this.canvas.height = Math.floor(height * this.options.scale);\n            this.ctx.scale(this.options.scale, this.options.scale);\n          } else {\n            this.canvas.width = width;\n            this.canvas.height = height;\n          }\n        }\n        this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\n        this.ctx.textBaseline = \"bottom\";\n        this.variables = {};\n        log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\n      }\n      CanvasRenderer.prototype = Object.create(Renderer.prototype);\n      CanvasRenderer.prototype.setFillStyle = function (fillStyle) {\n        this.ctx.fillStyle = typeof fillStyle === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n        return this.ctx;\n      };\n      CanvasRenderer.prototype.rectangle = function (left, top, width, height, color) {\n        this.setFillStyle(color).fillRect(left, top, width, height);\n      };\n      CanvasRenderer.prototype.circle = function (left, top, size, color) {\n        this.setFillStyle(color);\n        this.ctx.beginPath();\n        this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI * 2, true);\n        this.ctx.closePath();\n        this.ctx.fill();\n      };\n      CanvasRenderer.prototype.circleStroke = function (left, top, size, color, stroke, strokeColor) {\n        this.circle(left, top, size, color);\n        this.ctx.strokeStyle = strokeColor.toString();\n        this.ctx.stroke();\n      };\n      CanvasRenderer.prototype.shadow = function (shape, shadows) {\n        var parseShadow = function parseShadow(str) {\n          var propertyFilters = {\n            color: /^(#|rgb|hsl|(?!(inset|initial|inherit))\\D+)/i,\n            inset: /^inset/i,\n            px: /px$/i\n          };\n          var pxPropertyNames = ['x', 'y', 'blur', 'spread'];\n          var properties = str.split(/ (?![^(]*\\))/);\n          var info = {};\n          for (var key in propertyFilters) {\n            info[key] = properties.filter(propertyFilters[key].test.bind(propertyFilters[key]));\n            info[key] = info[key].length === 0 ? null : info[key].length === 1 ? info[key][0] : info[key];\n          }\n          for (var i = 0; i < info.px.length; i++) {\n            info[pxPropertyNames[i]] = parseInt(info.px[i]);\n          }\n          return info;\n        };\n        var drawShadow = function drawShadow(shadow) {\n          var info = parseShadow(shadow);\n          if (!info.inset) {\n            context.shadowOffsetX = info.x;\n            context.shadowOffsetY = info.y;\n            context.shadowColor = info.color;\n            context.shadowBlur = info.blur;\n            context.fill();\n          }\n        };\n        var context = this.setFillStyle('white');\n        context.save();\n        this.shape(shape);\n        shadows.forEach(drawShadow, this);\n        context.restore();\n      };\n      CanvasRenderer.prototype.drawShape = function (shape, color) {\n        this.shape(shape);\n        this.setFillStyle(color).fill();\n      };\n      CanvasRenderer.prototype.taints = function (imageContainer) {\n        if (imageContainer.tainted === null) {\n          this.taintCtx.drawImage(imageContainer.image, 0, 0);\n          try {\n            this.taintCtx.getImageData(0, 0, 1, 1);\n            imageContainer.tainted = false;\n          } catch (e) {\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\n            imageContainer.tainted = true;\n          }\n        }\n        return imageContainer.tainted;\n      };\n      CanvasRenderer.prototype.drawImage = function (imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n        if (!this.taints(imageContainer) || this.options.allowTaint) {\n          this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n        }\n      };\n      CanvasRenderer.prototype.clip = function (shapes, callback, context, container) {\n        this.ctx.save();\n        if (container && container.hasTransform()) {\n          this.setTransform(container.inverseTransform());\n          shapes.filter(hasEntries).forEach(function (shape) {\n            this.shape(shape).clip();\n          }, this);\n          this.setTransform(container.parseTransform());\n        } else {\n          shapes.filter(hasEntries).forEach(function (shape) {\n            this.shape(shape).clip();\n          }, this);\n        }\n        callback.call(context);\n        this.ctx.restore();\n      };\n      CanvasRenderer.prototype.mask = function (shapes, callback, context, container) {\n        var borderClip = shapes[shapes.length - 1];\n        if (borderClip && borderClip.length) {\n          var canvasBorderCCW = [\"rect\", this.canvas.width, 0, -this.canvas.width, this.canvas.height];\n          var maskShape = [canvasBorderCCW].concat(borderClip).concat([borderClip[0]]);\n          shapes = shapes.slice(0, -1).concat([maskShape]);\n        }\n        this.clip(shapes, callback, context, container);\n      };\n      CanvasRenderer.prototype.shape = function (shape) {\n        this.ctx.beginPath();\n        shape.forEach(function (point, index) {\n          if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n          } else {\n            this.ctx[index === 0 ? \"moveTo\" : point[0] + \"To\"].apply(this.ctx, point.slice(1));\n          }\n        }, this);\n        this.ctx.closePath();\n        return this.ctx;\n      };\n      CanvasRenderer.prototype.path = function (shape) {\n        this.ctx.beginPath();\n        shape.forEach(function (point, index) {\n          if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n          } else {\n            this.ctx[index === 0 ? \"moveTo\" : point[0] + \"To\"].apply(this.ctx, point.slice(1));\n          }\n        }, this);\n        return this.ctx;\n      };\n      CanvasRenderer.prototype.font = function (color, style, variant, weight, size, family) {\n        variant = /^(normal|small-caps)$/i.test(variant) ? variant : '';\n        this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\n      };\n      CanvasRenderer.prototype.fontShadow = function (color, offsetX, offsetY, blur) {\n        this.setVariable(\"shadowColor\", color.toString()).setVariable(\"shadowOffsetY\", offsetX).setVariable(\"shadowOffsetX\", offsetY).setVariable(\"shadowBlur\", blur);\n      };\n      CanvasRenderer.prototype.clearShadow = function () {\n        this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\n      };\n      CanvasRenderer.prototype.setOpacity = function (opacity) {\n        this.ctx.globalAlpha = opacity;\n      };\n      CanvasRenderer.prototype.setTransform = function (transform) {\n        this.ctx.translate(transform.origin[0], transform.origin[1]);\n        this.ctx.transform.apply(this.ctx, transform.matrix);\n        this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n      };\n      CanvasRenderer.prototype.setVariable = function (property, value) {\n        if (this.variables[property] !== value) {\n          this.variables[property] = this.ctx[property] = value;\n        }\n        return this;\n      };\n      CanvasRenderer.prototype.text = function (text, left, bottom) {\n        this.ctx.fillText(text, left, bottom);\n      };\n      CanvasRenderer.prototype.backgroundRepeatShape = function (imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n        var shape = [[\"line\", Math.round(left), Math.round(top)], [\"line\", Math.round(left + width), Math.round(top)], [\"line\", Math.round(left + width), Math.round(height + top)], [\"line\", Math.round(left), Math.round(height + top)]];\n        this.clip([shape], function () {\n          this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n        }, this);\n      };\n      CanvasRenderer.prototype.renderBackgroundRepeat = function (imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n        var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft),\n          offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n        this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\n        this.ctx.translate(offsetX, offsetY);\n        this.ctx.fill();\n        this.ctx.translate(-offsetX, -offsetY);\n      };\n      CanvasRenderer.prototype.renderBackgroundGradient = function (gradientImage, bounds) {\n        if (gradientImage instanceof LinearGradientContainer) {\n          var gradient = this.ctx.createLinearGradient(bounds.left + bounds.width * gradientImage.x0, bounds.top + bounds.height * gradientImage.y0, bounds.left + bounds.width * gradientImage.x1, bounds.top + bounds.height * gradientImage.y1);\n          gradientImage.colorStops.forEach(function (colorStop) {\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n          });\n          this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n        }\n      };\n      CanvasRenderer.prototype.resizeImage = function (imageContainer, size) {\n        var image = imageContainer.image;\n        if (image.width === size.width && image.height === size.height) {\n          return image;\n        }\n        var ctx,\n          canvas = document.createElement('canvas');\n        canvas.width = size.width;\n        canvas.height = size.height;\n        ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height);\n        return canvas;\n      };\n      function hasEntries(array) {\n        return array.length > 0;\n      }\n      module.exports = CanvasRenderer;\n    }, {\n      \"../lineargradientcontainer\": 12,\n      \"../log\": 13,\n      \"../renderer\": 19\n    }],\n    21: [function (_dereq_, module, exports) {\n      var NodeContainer = _dereq_('./nodecontainer');\n      function StackingContext(hasOwnStacking, opacity, element, parent) {\n        NodeContainer.call(this, element, parent);\n        this.ownStacking = hasOwnStacking;\n        this.contexts = [];\n        this.children = [];\n        this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n      }\n      StackingContext.prototype = Object.create(NodeContainer.prototype);\n      StackingContext.prototype.getParentStack = function (context) {\n        var parentStack = this.parent ? this.parent.stack : null;\n        return parentStack ? parentStack.ownStacking ? parentStack : parentStack.getParentStack(context) : context.stack;\n      };\n      module.exports = StackingContext;\n    }, {\n      \"./nodecontainer\": 14\n    }],\n    22: [function (_dereq_, module, exports) {\n      function Support(document) {\n        this.rangeBounds = this.testRangeBounds(document);\n        this.cors = this.testCORS();\n        this.svg = this.testSVG();\n      }\n      Support.prototype.testRangeBounds = function (document) {\n        var range,\n          testElement,\n          rangeBounds,\n          rangeHeight,\n          support = false;\n        if (document.createRange) {\n          range = document.createRange();\n          if (range.getBoundingClientRect) {\n            testElement = document.createElement('boundtest');\n            testElement.style.height = \"123px\";\n            testElement.style.display = \"block\";\n            document.body.appendChild(testElement);\n            range.selectNode(testElement);\n            rangeBounds = range.getBoundingClientRect();\n            rangeHeight = rangeBounds.height;\n            if (rangeHeight === 123) {\n              support = true;\n            }\n            document.body.removeChild(testElement);\n          }\n        }\n        return support;\n      };\n      Support.prototype.testCORS = function () {\n        return typeof new Image().crossOrigin !== \"undefined\";\n      };\n      Support.prototype.testSVG = function () {\n        var img = new Image();\n        var canvas = document.createElement(\"canvas\");\n        var ctx = canvas.getContext(\"2d\");\n        img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n        try {\n          ctx.drawImage(img, 0, 0);\n          canvas.toDataURL();\n        } catch (e) {\n          return false;\n        }\n        return true;\n      };\n      module.exports = Support;\n    }, {}],\n    23: [function (_dereq_, module, exports) {\n      var XHR = _dereq_('./xhr');\n      var decode64 = _dereq_('./utils').decode64;\n      function SVGContainer(src) {\n        this.src = src;\n        this.image = null;\n        var self = this;\n        this.promise = this.hasFabric().then(function () {\n          return self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src);\n        }).then(function (svg) {\n          return new Promise(function (resolve) {\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n          });\n        });\n      }\n      SVGContainer.prototype.hasFabric = function () {\n        return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\n      };\n      SVGContainer.prototype.inlineFormatting = function (src) {\n        return /^data:image\\/svg\\+xml;base64,/.test(src) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n      };\n      SVGContainer.prototype.removeContentType = function (src) {\n        return src.replace(/^data:image\\/svg\\+xml(;base64)?,/, '');\n      };\n      SVGContainer.prototype.isInline = function (src) {\n        return /^data:image\\/svg\\+xml/i.test(src);\n      };\n      SVGContainer.prototype.createCanvas = function (resolve) {\n        var self = this;\n        return function (objects, options) {\n          var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\n          self.image = canvas.lowerCanvasEl;\n          canvas.setWidth(options.width).setHeight(options.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options)).renderAll();\n          resolve(canvas.lowerCanvasEl);\n        };\n      };\n      SVGContainer.prototype.decode64 = function (str) {\n        return typeof window.atob === \"function\" ? window.atob(str) : decode64(str);\n      };\n      module.exports = SVGContainer;\n    }, {\n      \"./utils\": 26,\n      \"./xhr\": 28\n    }],\n    24: [function (_dereq_, module, exports) {\n      var SVGContainer = _dereq_('./svgcontainer');\n      function SVGNodeContainer(node, _native) {\n        this.src = node;\n        this.image = null;\n        var self = this;\n        this.promise = _native ? new Promise(function (resolve, reject) {\n          self.image = new Image();\n          self.image.onload = resolve;\n          self.image.onerror = reject;\n          self.image.src = \"data:image/svg+xml,\" + new XMLSerializer().serializeToString(node);\n          if (self.image.complete === true) {\n            resolve(self.image);\n          }\n        }) : this.hasFabric().then(function () {\n          return new Promise(function (resolve) {\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n          });\n        });\n      }\n      SVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n      module.exports = SVGNodeContainer;\n    }, {\n      \"./svgcontainer\": 23\n    }],\n    25: [function (_dereq_, module, exports) {\n      var NodeContainer = _dereq_('./nodecontainer');\n      function TextContainer(node, parent) {\n        NodeContainer.call(this, node, parent);\n      }\n      TextContainer.prototype = Object.create(NodeContainer.prototype);\n      TextContainer.prototype.applyTextTransform = function () {\n        this.node.data = this.transform(this.parent.css(\"textTransform\"));\n      };\n      TextContainer.prototype.transform = function (transform) {\n        var text = this.node.data;\n        switch (transform) {\n          case \"lowercase\":\n            return text.toLowerCase();\n          case \"capitalize\":\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n          case \"uppercase\":\n            return text.toUpperCase();\n          default:\n            return text;\n        }\n      };\n      function capitalize(m, p1, p2) {\n        if (m.length > 0) {\n          return p1 + p2.toUpperCase();\n        }\n      }\n      module.exports = TextContainer;\n    }, {\n      \"./nodecontainer\": 14\n    }],\n    26: [function (_dereq_, module, exports) {\n      exports.smallImage = function smallImage() {\n        return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n      };\n      exports.bind = function (callback, context) {\n        return function () {\n          return callback.apply(context, arguments);\n        };\n      };\n\n      /*\n       * base64-arraybuffer\n       * https://github.com/niklasvh/base64-arraybuffer\n       *\n       * Copyright (c) 2012 Niklas von Hertzen\n       * Licensed under the MIT license.\n       */\n\n      exports.decode64 = function (base64) {\n        var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n        var len = base64.length,\n          i,\n          encoded1,\n          encoded2,\n          encoded3,\n          encoded4,\n          byte1,\n          byte2,\n          byte3;\n        var output = \"\";\n        for (i = 0; i < len; i += 4) {\n          encoded1 = chars.indexOf(base64[i]);\n          encoded2 = chars.indexOf(base64[i + 1]);\n          encoded3 = chars.indexOf(base64[i + 2]);\n          encoded4 = chars.indexOf(base64[i + 3]);\n          byte1 = encoded1 << 2 | encoded2 >> 4;\n          byte2 = (encoded2 & 15) << 4 | encoded3 >> 2;\n          byte3 = (encoded3 & 3) << 6 | encoded4;\n          if (encoded3 === 64) {\n            output += String.fromCharCode(byte1);\n          } else if (encoded4 === 64 || encoded4 === -1) {\n            output += String.fromCharCode(byte1, byte2);\n          } else {\n            output += String.fromCharCode(byte1, byte2, byte3);\n          }\n        }\n        return output;\n      };\n      exports.getBounds = function (node) {\n        if (node.getBoundingClientRect) {\n          var clientRect = node.getBoundingClientRect();\n          var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n          return {\n            top: clientRect.top,\n            bottom: clientRect.bottom || clientRect.top + clientRect.height,\n            right: clientRect.left + width,\n            left: clientRect.left,\n            width: width,\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n          };\n        }\n        return {};\n      };\n      exports.offsetBounds = function (node) {\n        var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {\n          top: 0,\n          left: 0\n        };\n        return {\n          top: node.offsetTop + parent.top,\n          bottom: node.offsetTop + node.offsetHeight + parent.top,\n          right: node.offsetLeft + parent.left + node.offsetWidth,\n          left: node.offsetLeft + parent.left,\n          width: node.offsetWidth,\n          height: node.offsetHeight\n        };\n      };\n      exports.parseBackgrounds = function (backgroundImage) {\n        var whitespace = ' \\r\\n\\t',\n          method,\n          definition,\n          prefix,\n          prefix_i,\n          block,\n          results = [],\n          mode = 0,\n          numParen = 0,\n          quote,\n          args;\n        var appendResult = function appendResult() {\n          if (method) {\n            if (definition.substr(0, 1) === '\"') {\n              definition = definition.substr(1, definition.length - 2);\n            }\n            if (definition) {\n              args.push(definition);\n            }\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1) + 1) > 0) {\n              prefix = method.substr(0, prefix_i);\n              method = method.substr(prefix_i);\n            }\n            results.push({\n              prefix: prefix,\n              method: method.toLowerCase(),\n              value: block,\n              args: args,\n              image: null\n            });\n          }\n          args = [];\n          method = prefix = definition = block = '';\n        };\n        args = [];\n        method = prefix = definition = block = '';\n        backgroundImage.split(\"\").forEach(function (c) {\n          if (mode === 0 && whitespace.indexOf(c) > -1) {\n            return;\n          }\n          switch (c) {\n            case '\"':\n              if (!quote) {\n                quote = c;\n              } else if (quote === c) {\n                quote = null;\n              }\n              break;\n            case '(':\n              if (quote) {\n                break;\n              } else if (mode === 0) {\n                mode = 1;\n                block += c;\n                return;\n              } else {\n                numParen++;\n              }\n              break;\n            case ')':\n              if (quote) {\n                break;\n              } else if (mode === 1) {\n                if (numParen === 0) {\n                  mode = 0;\n                  block += c;\n                  appendResult();\n                  return;\n                } else {\n                  numParen--;\n                }\n              }\n              break;\n            case ',':\n              if (quote) {\n                break;\n              } else if (mode === 0) {\n                appendResult();\n                return;\n              } else if (mode === 1) {\n                if (numParen === 0 && !method.match(/^url$/i)) {\n                  args.push(definition);\n                  definition = '';\n                  block += c;\n                  return;\n                }\n              }\n              break;\n          }\n          block += c;\n          if (mode === 0) {\n            method += c;\n          } else {\n            definition += c;\n          }\n        });\n        appendResult();\n        return results;\n      };\n    }, {}],\n    27: [function (_dereq_, module, exports) {\n      var GradientContainer = _dereq_('./gradientcontainer');\n      function WebkitGradientContainer(imageData) {\n        GradientContainer.apply(this, arguments);\n        this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\n      }\n      WebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n      module.exports = WebkitGradientContainer;\n    }, {\n      \"./gradientcontainer\": 9\n    }],\n    28: [function (_dereq_, module, exports) {\n      function XHR(url) {\n        return new Promise(function (resolve, reject) {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', url);\n          xhr.onload = function () {\n            if (xhr.status === 200) {\n              resolve(xhr.responseText);\n            } else {\n              reject(new Error(xhr.statusText));\n            }\n          };\n          xhr.onerror = function () {\n            reject(new Error(\"Network Error\"));\n          };\n          xhr.send();\n        });\n      }\n      module.exports = XHR;\n    }, {}]\n  }, {}, [4])(4);\n});","map":{"version":3,"names":["f","exports","module","define","amd","g","window","global","self","html2canvas","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","root","freeExports","nodeType","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","key","error","type","RangeError","map","array","fn","result","mapDomain","string","parts","split","replace","labels","encoded","join","ucs2decode","output","counter","value","extra","charCodeAt","push","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","inputLength","out","bias","basic","j","index","oldi","w","baseMinusT","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","test","slice","toLowerCase","toASCII","hasOwnProperty","log","restoreOwnerScroll","ownerDocument","x","y","defaultView","pageXOffset","pageYOffset","scrollTo","cloneCanvasContents","canvas","clonedCanvas","width","height","getContext","putImageData","getImageData","cloneNode","node","javascriptEnabled","clone","document","createTextNode","nodeValue","child","firstChild","nodeName","appendChild","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","initNode","containerDocument","options","documentElement","container","createElement","className","style","visibility","position","left","top","border","scrolling","body","Promise","resolve","documentClone","contentWindow","onload","interval","setInterval","childNodes","clearInterval","navigator","userAgent","scrollY","scrollX","open","write","replaceChild","adoptNode","close","Color","b","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","round","isTransparent","isBlack","Array","isArray","min","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","color","colors","isColor","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasNodeAttribute","html2canvasCloneIndex","nodeList","logging","start","Date","now","async","allowTaint","removeContainer","imageTimeout","renderer","strict","proxy","reject","innerWidth","innerHeight","absoluteUrl","then","renderWindow","undefined","setAttribute","renderDocument","onrendered","html2canvasExport","Object","create","windowWidth","windowHeight","html2canvasIndex","attributeName","selector","querySelector","removeAttribute","clonedWindow","oncloneHandler","onclone","support","imageLoader","bounds","right","bottom","parser","ready","crop","scale","origBounds","cropBounds","cleanupContainer","parentNode","removeChild","croppedCanvas","x1","max","x2","y1","y2","drawImage","documentWidth","doc","scrollWidth","offsetWidth","clientWidth","documentHeight","scrollHeight","offsetHeight","clientHeight","url","link","href","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","Font","family","size","img","span","sampleText","baseline","middle","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","FontMetrics","data","getMetrics","FrameContainer","sameOrigin","proxyLoad","URL","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","ImageContainer","cors","tainted","crossOrigin","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","bind","origin","getOrigin","location","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","dummy","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","logger","console","Function","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefixes","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","cssList","property","trim","isPercentage","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","removePx","asFloat","matrix","parseTransformMatrix","transform","parseMatrix","MATRIX_PROPERTY","inverseTransform","matrixInverse","getValue","tagName","selectionValue","placeholder","option","selectedIndex","text","matrix3d","c","d","det","M","val","indexOf","str","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","paint","renderIndex","asyncRenderer","appendToDOM","parseBorders","cssClip","hasParentClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","innerHTML","ELEMENT_NODE","getPseudoElement","after","toCamelCase","content","display","stripQuotes","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","parentStack","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","zIndexSort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","ClearTransform","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","ctx","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","mask","renderShadows","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","properties","message","textContent","applyTextTransform","characters","ucs2","wordRendering","letterRendering","noLetterSpacing","hasUnicode","getWords","character","fontVariantLigatures","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","getBorderRadiusData","side","colorTransform","pathArgs","parseBackgroundClip","pathBounds","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","drawSidePath","topLeft","topRight","bottomRightOuter","bottomRightInner","bottomRight","bottomLeftOuter","bottomLeftInner","bottomLeft","borderArgs","parseCorner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","bezierCurve","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","curve1","curve2","corner1","corner2","arr","asInt","zIndex","context","nodeContainer","arrays","first","words","onWordBoundary","word","isWordBoundary","characterCode","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","ProxyURL","supportsCORSImage","cleanup","random","encodeURIComponent","documentFromHTML","html","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","getHideClass","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","shape","boxShadow","shadow","renderBorder","dash","setLineDash","path","strokeStyle","stroke","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","repeat","backgroundRepeatShape","renderBackgroundRepeat","dpi","taintCtx","textBaseline","variables","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","strokeColor","parseShadow","propertyFilters","px","pxPropertyNames","info","drawShadow","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","hasEntries","borderClip","canvasBorderCCW","maskShape","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","ownStacking","testRangeBounds","testCORS","testSVG","testElement","rangeHeight","selectNode","toDataURL","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","_native","XMLSerializer","serializeToString","parseSVGDocument","capitalize","p1","p2","base64","chars","len","encoded1","encoded2","encoded3","encoded4","byte1","byte2","byte3","clientRect","offsetParent","offsetLeft","whitespace","definition","prefix_i","block","mode","numParen","quote","appendResult","xhr","status","responseText","statusText","send"],"sources":["/home/ashish/docpdf/pdfdoc/research-ranking-app/my-app/node_modules/html2canvas/dist/html2canvas.js"],"sourcesContent":["/*\n  html2canvas 0.5.0-beta4 <http://html2canvas.hertzen.com>\n  Copyright (c) 2017 Niklas von Hertzen\n  2017-06-14 Custom build by Erik Koopmans, featuring latest bugfixes and features\n\n  Released under MIT License\n*/\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.html2canvas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n}\n\nfunction cloneCanvasContents(canvas, clonedCanvas) {\n    try {\n        if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n        }\n    } catch(e) {\n        log(\"Unable to copy canvas content from\", canvas, e);\n    }\n}\n\nfunction cloneNode(node, javascriptEnabled) {\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n\n    var child = node.firstChild;\n    while(child) {\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n            clone.appendChild(cloneNode(child, javascriptEnabled));\n        }\n        child = child.nextSibling;\n    }\n\n    if (node.nodeType === 1) {\n        clone._scrollTop = node.scrollTop;\n        clone._scrollLeft = node.scrollLeft;\n        if (node.nodeName === \"CANVAS\") {\n            cloneCanvasContents(node, clone);\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\n            clone.value = node.value;\n        }\n    }\n\n    return clone;\n}\n\nfunction initNode(node) {\n    if (node.nodeType === 1) {\n        node.scrollTop = node._scrollTop;\n        node.scrollLeft = node._scrollLeft;\n\n        var child = node.firstChild;\n        while(child) {\n            initNode(child);\n            child = child.nextSibling;\n        }\n    }\n}\n\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\n    var container = containerDocument.createElement(\"iframe\");\n\n    container.className = \"html2canvas-container\";\n    container.style.visibility = \"hidden\";\n    container.style.position = \"fixed\";\n    container.style.left = \"-10000px\";\n    container.style.top = \"0px\";\n    container.style.border = \"0\";\n    container.width = width;\n    container.height = height;\n    container.scrolling = \"no\"; // ios won't scroll without it\n    containerDocument.body.appendChild(container);\n\n    return new Promise(function(resolve) {\n        var documentClone = container.contentWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        container.contentWindow.onload = container.onload = function() {\n            var interval = setInterval(function() {\n                if (documentClone.body.childNodes.length > 0) {\n                    initNode(documentClone.documentElement);\n                    clearInterval(interval);\n                    if (options.type === \"view\") {\n                        container.contentWindow.scrollTo(x, y);\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\n                            documentClone.documentElement.style.top = (-y) + \"px\";\n                            documentClone.documentElement.style.left = (-x) + \"px\";\n                            documentClone.documentElement.style.position = 'absolute';\n                        }\n                    }\n                    resolve(container);\n                }\n            }, 50);\n        };\n\n        documentClone.open();\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(ownerDocument, x, y);\n        documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\n        documentClone.close();\n    });\n};\n\n},{\"./log\":13}],3:[function(_dereq_,module,exports){\n// http://dev.w3.org/csswg/css-color/\n\nfunction Color(value) {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = null;\n    var result = this.fromArray(value) ||\n        this.namedColor(value) ||\n        this.rgb(value) ||\n        this.rgba(value) ||\n        this.hex6(value) ||\n        this.hex3(value);\n}\n\nColor.prototype.darken = function(amount) {\n    var a = 1 - amount;\n    return  new Color([\n        Math.round(this.r * a),\n        Math.round(this.g * a),\n        Math.round(this.b * a),\n        this.a\n    ]);\n};\n\nColor.prototype.isTransparent = function() {\n    return this.a === 0;\n};\n\nColor.prototype.isBlack = function() {\n    return this.r === 0 && this.g === 0 && this.b === 0;\n};\n\nColor.prototype.fromArray = function(array) {\n    if (Array.isArray(array)) {\n        this.r = Math.min(array[0], 255);\n        this.g = Math.min(array[1], 255);\n        this.b = Math.min(array[2], 255);\n        if (array.length > 3) {\n            this.a = array[3];\n        }\n    }\n\n    return (Array.isArray(array));\n};\n\nvar _hex3 = /^#([a-f0-9]{3})$/i;\n\nColor.prototype.hex3 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex3)) !== null) {\n        this.r = parseInt(match[1][0] + match[1][0], 16);\n        this.g = parseInt(match[1][1] + match[1][1], 16);\n        this.b = parseInt(match[1][2] + match[1][2], 16);\n    }\n    return match !== null;\n};\n\nvar _hex6 = /^#([a-f0-9]{6})$/i;\n\nColor.prototype.hex6 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex6)) !== null) {\n        this.r = parseInt(match[1].substring(0, 2), 16);\n        this.g = parseInt(match[1].substring(2, 4), 16);\n        this.b = parseInt(match[1].substring(4, 6), 16);\n    }\n    return match !== null;\n};\n\n\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\nColor.prototype.rgb = function(value) {\n    var match = null;\n    if ((match = value.match(_rgb)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n    }\n    return match !== null;\n};\n\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\n\nColor.prototype.rgba = function(value) {\n    var match = null;\n    if ((match = value.match(_rgba)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n        this.a = Number(match[4]);\n    }\n    return match !== null;\n};\n\nColor.prototype.toString = function() {\n    return this.a !== null && this.a !== 1 ?\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\n};\n\nColor.prototype.namedColor = function(value) {\n    value = value.toLowerCase();\n    var color = colors[value];\n    if (color) {\n        this.r = color[0];\n        this.g = color[1];\n        this.b = color[2];\n    } else if (value === \"transparent\") {\n        this.r = this.g = this.b = this.a = 0;\n        return true;\n    }\n\n    return !!color;\n};\n\nColor.prototype.isColor = true;\n\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\nvar colors = {\n    \"aliceblue\": [240, 248, 255],\n    \"antiquewhite\": [250, 235, 215],\n    \"aqua\": [0, 255, 255],\n    \"aquamarine\": [127, 255, 212],\n    \"azure\": [240, 255, 255],\n    \"beige\": [245, 245, 220],\n    \"bisque\": [255, 228, 196],\n    \"black\": [0, 0, 0],\n    \"blanchedalmond\": [255, 235, 205],\n    \"blue\": [0, 0, 255],\n    \"blueviolet\": [138, 43, 226],\n    \"brown\": [165, 42, 42],\n    \"burlywood\": [222, 184, 135],\n    \"cadetblue\": [95, 158, 160],\n    \"chartreuse\": [127, 255, 0],\n    \"chocolate\": [210, 105, 30],\n    \"coral\": [255, 127, 80],\n    \"cornflowerblue\": [100, 149, 237],\n    \"cornsilk\": [255, 248, 220],\n    \"crimson\": [220, 20, 60],\n    \"cyan\": [0, 255, 255],\n    \"darkblue\": [0, 0, 139],\n    \"darkcyan\": [0, 139, 139],\n    \"darkgoldenrod\": [184, 134, 11],\n    \"darkgray\": [169, 169, 169],\n    \"darkgreen\": [0, 100, 0],\n    \"darkgrey\": [169, 169, 169],\n    \"darkkhaki\": [189, 183, 107],\n    \"darkmagenta\": [139, 0, 139],\n    \"darkolivegreen\": [85, 107, 47],\n    \"darkorange\": [255, 140, 0],\n    \"darkorchid\": [153, 50, 204],\n    \"darkred\": [139, 0, 0],\n    \"darksalmon\": [233, 150, 122],\n    \"darkseagreen\": [143, 188, 143],\n    \"darkslateblue\": [72, 61, 139],\n    \"darkslategray\": [47, 79, 79],\n    \"darkslategrey\": [47, 79, 79],\n    \"darkturquoise\": [0, 206, 209],\n    \"darkviolet\": [148, 0, 211],\n    \"deeppink\": [255, 20, 147],\n    \"deepskyblue\": [0, 191, 255],\n    \"dimgray\": [105, 105, 105],\n    \"dimgrey\": [105, 105, 105],\n    \"dodgerblue\": [30, 144, 255],\n    \"firebrick\": [178, 34, 34],\n    \"floralwhite\": [255, 250, 240],\n    \"forestgreen\": [34, 139, 34],\n    \"fuchsia\": [255, 0, 255],\n    \"gainsboro\": [220, 220, 220],\n    \"ghostwhite\": [248, 248, 255],\n    \"gold\": [255, 215, 0],\n    \"goldenrod\": [218, 165, 32],\n    \"gray\": [128, 128, 128],\n    \"green\": [0, 128, 0],\n    \"greenyellow\": [173, 255, 47],\n    \"grey\": [128, 128, 128],\n    \"honeydew\": [240, 255, 240],\n    \"hotpink\": [255, 105, 180],\n    \"indianred\": [205, 92, 92],\n    \"indigo\": [75, 0, 130],\n    \"ivory\": [255, 255, 240],\n    \"khaki\": [240, 230, 140],\n    \"lavender\": [230, 230, 250],\n    \"lavenderblush\": [255, 240, 245],\n    \"lawngreen\": [124, 252, 0],\n    \"lemonchiffon\": [255, 250, 205],\n    \"lightblue\": [173, 216, 230],\n    \"lightcoral\": [240, 128, 128],\n    \"lightcyan\": [224, 255, 255],\n    \"lightgoldenrodyellow\": [250, 250, 210],\n    \"lightgray\": [211, 211, 211],\n    \"lightgreen\": [144, 238, 144],\n    \"lightgrey\": [211, 211, 211],\n    \"lightpink\": [255, 182, 193],\n    \"lightsalmon\": [255, 160, 122],\n    \"lightseagreen\": [32, 178, 170],\n    \"lightskyblue\": [135, 206, 250],\n    \"lightslategray\": [119, 136, 153],\n    \"lightslategrey\": [119, 136, 153],\n    \"lightsteelblue\": [176, 196, 222],\n    \"lightyellow\": [255, 255, 224],\n    \"lime\": [0, 255, 0],\n    \"limegreen\": [50, 205, 50],\n    \"linen\": [250, 240, 230],\n    \"magenta\": [255, 0, 255],\n    \"maroon\": [128, 0, 0],\n    \"mediumaquamarine\": [102, 205, 170],\n    \"mediumblue\": [0, 0, 205],\n    \"mediumorchid\": [186, 85, 211],\n    \"mediumpurple\": [147, 112, 219],\n    \"mediumseagreen\": [60, 179, 113],\n    \"mediumslateblue\": [123, 104, 238],\n    \"mediumspringgreen\": [0, 250, 154],\n    \"mediumturquoise\": [72, 209, 204],\n    \"mediumvioletred\": [199, 21, 133],\n    \"midnightblue\": [25, 25, 112],\n    \"mintcream\": [245, 255, 250],\n    \"mistyrose\": [255, 228, 225],\n    \"moccasin\": [255, 228, 181],\n    \"navajowhite\": [255, 222, 173],\n    \"navy\": [0, 0, 128],\n    \"oldlace\": [253, 245, 230],\n    \"olive\": [128, 128, 0],\n    \"olivedrab\": [107, 142, 35],\n    \"orange\": [255, 165, 0],\n    \"orangered\": [255, 69, 0],\n    \"orchid\": [218, 112, 214],\n    \"palegoldenrod\": [238, 232, 170],\n    \"palegreen\": [152, 251, 152],\n    \"paleturquoise\": [175, 238, 238],\n    \"palevioletred\": [219, 112, 147],\n    \"papayawhip\": [255, 239, 213],\n    \"peachpuff\": [255, 218, 185],\n    \"peru\": [205, 133, 63],\n    \"pink\": [255, 192, 203],\n    \"plum\": [221, 160, 221],\n    \"powderblue\": [176, 224, 230],\n    \"purple\": [128, 0, 128],\n    \"rebeccapurple\": [102, 51, 153],\n    \"red\": [255, 0, 0],\n    \"rosybrown\": [188, 143, 143],\n    \"royalblue\": [65, 105, 225],\n    \"saddlebrown\": [139, 69, 19],\n    \"salmon\": [250, 128, 114],\n    \"sandybrown\": [244, 164, 96],\n    \"seagreen\": [46, 139, 87],\n    \"seashell\": [255, 245, 238],\n    \"sienna\": [160, 82, 45],\n    \"silver\": [192, 192, 192],\n    \"skyblue\": [135, 206, 235],\n    \"slateblue\": [106, 90, 205],\n    \"slategray\": [112, 128, 144],\n    \"slategrey\": [112, 128, 144],\n    \"snow\": [255, 250, 250],\n    \"springgreen\": [0, 255, 127],\n    \"steelblue\": [70, 130, 180],\n    \"tan\": [210, 180, 140],\n    \"teal\": [0, 128, 128],\n    \"thistle\": [216, 191, 216],\n    \"tomato\": [255, 99, 71],\n    \"turquoise\": [64, 224, 208],\n    \"violet\": [238, 130, 238],\n    \"wheat\": [245, 222, 179],\n    \"white\": [255, 255, 255],\n    \"whitesmoke\": [245, 245, 245],\n    \"yellow\": [255, 255, 0],\n    \"yellowgreen\": [154, 205, 50]\n};\n\nmodule.exports = Color;\n\n},{}],4:[function(_dereq_,module,exports){\nvar Support = _dereq_('./support');\nvar CanvasRenderer = _dereq_('./renderers/canvas');\nvar ImageLoader = _dereq_('./imageloader');\nvar NodeParser = _dereq_('./nodeparser');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar log = _dereq_('./log');\nvar utils = _dereq_('./utils');\nvar createWindowClone = _dereq_('./clone');\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\nvar getBounds = utils.getBounds;\n\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\nvar html2canvasCloneIndex = 0;\n\nfunction html2canvas(nodeList, options) {\n    var index = html2canvasCloneIndex++;\n    options = options || {};\n    if (options.logging) {\n        log.options.logging = true;\n        log.options.start = Date.now();\n    }\n\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\n    options.strict = !!options.strict;\n\n    if (typeof(nodeList) === \"string\") {\n        if (typeof(options.proxy) !== \"string\") {\n            return Promise.reject(\"Proxy must be used when rendering url\");\n        }\n        var width = options.width != null ? options.width : window.innerWidth;\n        var height = options.height != null ? options.height : window.innerHeight;\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n        });\n    }\n\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\n    node.setAttribute(html2canvasNodeAttribute + index, index);\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\n        if (typeof(options.onrendered) === \"function\") {\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\n            options.onrendered(canvas);\n        }\n        return canvas;\n    });\n}\n\nhtml2canvas.CanvasRenderer = CanvasRenderer;\nhtml2canvas.NodeContainer = NodeContainer;\nhtml2canvas.log = log;\nhtml2canvas.utils = utils;\n\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\n    return Promise.reject(\"No canvas support\");\n} : html2canvas;\n\nmodule.exports = html2canvasExport;\n\nif (typeof(define) === 'function' && define.amd) {\n    define('html2canvas', [], function() {\n        return html2canvasExport;\n    });\n}\n\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\n        log(\"Document cloned\");\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\n        document.querySelector(selector).removeAttribute(attributeName);\n        var clonedWindow = container.contentWindow;\n        var node = clonedWindow.document.querySelector(selector);\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n        return oncloneHandler.then(function() {\n            return renderWindow(node, container, options, windowWidth, windowHeight);\n        });\n    });\n}\n\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\n    var clonedWindow = container.contentWindow;\n    var support = new Support(clonedWindow.document);\n    var imageLoader = new ImageLoader(options, support);\n    var bounds = getBounds(node);\n    var width = options.type === \"view\" ? windowWidth : bounds.right + 1;\n    var height = options.type === \"view\" ? windowHeight : bounds.bottom + 1;\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\n    return parser.ready.then(function() {\n        log(\"Finished rendering\");\n        var canvas;\n\n        if (options.type === \"view\") {\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n            canvas = renderer.canvas;\n        } else if (options.scale) {\n            var origBounds = {width: options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0};\n            var cropBounds = {};\n            for (var key in origBounds) {\n                if (origBounds.hasOwnProperty(key)) { cropBounds[key] = origBounds[key] * options.scale; }\n            }\n            canvas = crop(renderer.canvas, cropBounds);\n            canvas.style.width = origBounds.width + 'px';\n            canvas.style.height = origBounds.height + 'px';\n        } else {\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\n        }\n\n        cleanupContainer(container, options);\n        return canvas;\n    });\n}\n\nfunction cleanupContainer(container, options) {\n    if (options.removeContainer) {\n        container.parentNode.removeChild(container);\n        log(\"Cleaned up container\");\n    }\n}\n\nfunction crop(canvas, bounds) {\n    var croppedCanvas = document.createElement(\"canvas\");\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n    croppedCanvas.width = bounds.width;\n    croppedCanvas.height =  bounds.height;\n    var width = x2-x1;\n    var height = y2-y1;\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\n    return croppedCanvas;\n}\n\nfunction documentWidth (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\n    );\n}\n\nfunction documentHeight (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\n    );\n}\n\nfunction absoluteUrl(url) {\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.href = link.href;\n    return link;\n}\n\n},{\"./clone\":2,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],5:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction DummyImageContainer(src) {\n    this.src = src;\n    log(\"DummyImageContainer for\", src);\n    if (!this.promise || !this.image) {\n        log(\"Initiating DummyImageContainer\");\n        DummyImageContainer.prototype.image = new Image();\n        var image = this.image;\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\n            image.onload = resolve;\n            image.onerror = reject;\n            image.src = smallImage();\n            if (image.complete === true) {\n                resolve(image);\n            }\n        });\n    }\n}\n\nmodule.exports = DummyImageContainer;\n\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction Font(family, size) {\n    var container = document.createElement('div'),\n        img = document.createElement('img'),\n        span = document.createElement('span'),\n        sampleText = 'Hidden Text',\n        baseline,\n        middle;\n\n    container.style.visibility = \"hidden\";\n    container.style.fontFamily = family;\n    container.style.fontSize = size;\n    container.style.margin = 0;\n    container.style.padding = 0;\n\n    document.body.appendChild(container);\n\n    img.src = smallImage();\n    img.width = 1;\n    img.height = 1;\n\n    img.style.margin = 0;\n    img.style.padding = 0;\n    img.style.verticalAlign = \"baseline\";\n\n    span.style.fontFamily = family;\n    span.style.fontSize = size;\n    span.style.margin = 0;\n    span.style.padding = 0;\n\n    span.appendChild(document.createTextNode(sampleText));\n    container.appendChild(span);\n    container.appendChild(img);\n    baseline = (img.offsetTop - span.offsetTop) + 1;\n\n    container.removeChild(span);\n    container.appendChild(document.createTextNode(sampleText));\n\n    container.style.lineHeight = \"normal\";\n    img.style.verticalAlign = \"super\";\n\n    middle = (img.offsetTop-container.offsetTop) + 1;\n\n    document.body.removeChild(container);\n\n    this.baseline = baseline;\n    this.lineWidth = 1;\n    this.middle = middle;\n}\n\nmodule.exports = Font;\n\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\nvar Font = _dereq_('./font');\n\nfunction FontMetrics() {\n    this.data = {};\n}\n\nFontMetrics.prototype.getMetrics = function(family, size) {\n    if (this.data[family + \"-\" + size] === undefined) {\n        this.data[family + \"-\" + size] = new Font(family, size);\n    }\n    return this.data[family + \"-\" + size];\n};\n\nmodule.exports = FontMetrics;\n\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n\nfunction FrameContainer(container, sameOrigin, options) {\n    this.image = null;\n    this.src = container;\n    var self = this;\n    var bounds = getBounds(container);\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\n            container.contentWindow.onload = container.onload = function() {\n                resolve(container);\n            };\n        } else {\n            resolve(container);\n        }\n    })).then(function(container) {\n        var html2canvas = _dereq_('./core');\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\n    }).then(function(canvas) {\n        return self.image = canvas;\n    });\n}\n\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\n    var container = this.src;\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n};\n\nmodule.exports = FrameContainer;\n\n},{\"./core\":4,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\nfunction GradientContainer(imageData) {\n    this.src = imageData.value;\n    this.colorStops = [];\n    this.type = null;\n    this.x0 = 0.5;\n    this.y0 = 0.5;\n    this.x1 = 0.5;\n    this.y1 = 0.5;\n    this.promise = Promise.resolve(true);\n}\n\nGradientContainer.TYPES = {\n    LINEAR: 1,\n    RADIAL: 2\n};\n\n// TODO: support hsl[a], negative %/length values\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\n\nmodule.exports = GradientContainer;\n\n},{}],10:[function(_dereq_,module,exports){\nfunction ImageContainer(src, cors) {\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.tainted = null;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        if (cors) {\n            self.image.crossOrigin = \"anonymous\";\n        }\n        self.image.src = src;\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    });\n}\n\nmodule.exports = ImageContainer;\n\n},{}],11:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar ImageContainer = _dereq_('./imagecontainer');\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\nvar FrameContainer = _dereq_('./framecontainer');\nvar SVGContainer = _dereq_('./svgcontainer');\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\nvar bind = _dereq_('./utils').bind;\n\nfunction ImageLoader(options, support) {\n    this.link = null;\n    this.options = options;\n    this.support = support;\n    this.origin = this.getOrigin(window.location.href);\n}\n\nImageLoader.prototype.findImages = function(nodes) {\n    var images = [];\n    nodes.reduce(function(imageNodes, container) {\n        switch(container.node.nodeName) {\n        case \"IMG\":\n            return imageNodes.concat([{\n                args: [container.node.src],\n                method: \"url\"\n            }]);\n        case \"svg\":\n        case \"IFRAME\":\n            return imageNodes.concat([{\n                args: [container.node],\n                method: container.node.nodeName\n            }]);\n        }\n        return imageNodes;\n    }, []).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.findBackgroundImage = function(images, container) {\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.addImage = function(images, callback) {\n    return function(newImage) {\n        newImage.args.forEach(function(image) {\n            if (!this.imageExists(images, image)) {\n                images.splice(0, 0, callback.call(this, newImage));\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\n            }\n        }, this);\n    };\n};\n\nImageLoader.prototype.hasImageBackground = function(imageData) {\n    return imageData.method !== \"none\";\n};\n\nImageLoader.prototype.loadImage = function(imageData) {\n    if (imageData.method === \"url\") {\n        var src = imageData.args[0];\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n            return new SVGContainer(src);\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n            return new ImageContainer(src, false);\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n            return new ImageContainer(src, true);\n        } else if (this.options.proxy) {\n            return new ProxyImageContainer(src, this.options.proxy);\n        } else {\n            return new DummyImageContainer(src);\n        }\n    } else if (imageData.method === \"linear-gradient\") {\n        return new LinearGradientContainer(imageData);\n    } else if (imageData.method === \"gradient\") {\n        return new WebkitGradientContainer(imageData);\n    } else if (imageData.method === \"svg\") {\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\n    } else if (imageData.method === \"IFRAME\") {\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n    } else {\n        return new DummyImageContainer(imageData);\n    }\n};\n\nImageLoader.prototype.isSVG = function(src) {\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\n};\n\nImageLoader.prototype.imageExists = function(images, src) {\n    return images.some(function(image) {\n        return image.src === src;\n    });\n};\n\nImageLoader.prototype.isSameOrigin = function(url) {\n    return (this.getOrigin(url) === this.origin);\n};\n\nImageLoader.prototype.getOrigin = function(url) {\n    var link = this.link || (this.link = document.createElement(\"a\"));\n    link.href = url;\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n    return link.protocol + link.hostname + link.port;\n};\n\nImageLoader.prototype.getPromise = function(container) {\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\n        var dummy = new DummyImageContainer(container.src);\n        return dummy.promise.then(function(image) {\n            container.image = image;\n        });\n    });\n};\n\nImageLoader.prototype.get = function(src) {\n    var found = null;\n    return this.images.some(function(img) {\n        return (found = img).src === src;\n    }) ? found : null;\n};\n\nImageLoader.prototype.fetch = function(nodes) {\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n    this.images.forEach(function(image, index) {\n        image.promise.then(function() {\n            log(\"Succesfully loaded image #\"+ (index+1), image);\n        }, function(e) {\n            log(\"Failed loading image #\"+ (index+1), image, e);\n        });\n    });\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\n    log(\"Finished searching images\");\n    return this;\n};\n\nImageLoader.prototype.timeout = function(container, timeout) {\n    var timer;\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\n        timer = setTimeout(function() {\n            log(\"Timed out loading image\", container);\n            reject(container);\n        }, timeout);\n    })]).then(function(container) {\n        clearTimeout(timer);\n        return container;\n    });\n    promise['catch'](function() {\n        clearTimeout(timer);\n    });\n    return promise;\n};\n\nmodule.exports = ImageLoader;\n\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\nvar Color = _dereq_('./color');\n\nfunction LinearGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = GradientContainer.TYPES.LINEAR;\n\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\n\n    if (hasDirection) {\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\n            switch(position) {\n            case \"left\":\n                this.x0 = 0;\n                this.x1 = 1;\n                break;\n            case \"top\":\n                this.y0 = 0;\n                this.y1 = 1;\n                break;\n            case \"right\":\n                this.x0 = 1;\n                this.x1 = 0;\n                break;\n            case \"bottom\":\n                this.y0 = 1;\n                this.y1 = 0;\n                break;\n            case \"to\":\n                var y0 = this.y0;\n                var x0 = this.x0;\n                this.y0 = this.y1;\n                this.x0 = this.x1;\n                this.x1 = x0;\n                this.y1 = y0;\n                break;\n            case \"center\":\n                break; // centered by default\n            // Firefox internally converts position keywords to percentages:\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\n            default: // percentage or absolute length\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\n                var ratio = parseFloat(position, 10) * 1e-2;\n                if (isNaN(ratio)) { // invalid or unhandled value\n                    break;\n                }\n                if (index === 0) {\n                    this.y0 = ratio;\n                    this.y1 = 1 - this.y0;\n                } else {\n                    this.x0 = ratio;\n                    this.x1 = 1 - this.x0;\n                }\n                break;\n            }\n        }, this);\n    } else {\n        this.y0 = 0;\n        this.y1 = 1;\n    }\n\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\n        var value = +colorStopMatch[2];\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\n        return {\n            color: new Color(colorStopMatch[1]),\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\n            stop: unit === \"%\" ? value / 100 : null\n        };\n    });\n\n    if (this.colorStops[0].stop === null) {\n        this.colorStops[0].stop = 0;\n    }\n\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\n        this.colorStops[this.colorStops.length - 1].stop = 1;\n    }\n\n    // calculates and fills-in explicit stop positions when omitted from rule\n    this.colorStops.forEach(function(colorStop, index) {\n        if (colorStop.stop === null) {\n            this.colorStops.slice(index).some(function(find, count) {\n                if (find.stop !== null) {\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\n                    return true;\n                } else {\n                    return false;\n                }\n            }, this);\n        }\n    }, this);\n}\n\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\n\nmodule.exports = LinearGradientContainer;\n\n},{\"./color\":3,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\nvar logger = function() {\n    if (logger.options.logging && window.console && window.console.log) {\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\n    }\n};\n\nlogger.options = {logging: false};\nmodule.exports = logger;\n\n},{}],14:[function(_dereq_,module,exports){\nvar Color = _dereq_('./color');\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeContainer(node, parent) {\n    this.node = node;\n    this.parent = parent;\n    this.stack = null;\n    this.bounds = null;\n    this.borders = null;\n    this.clip = [];\n    this.backgroundClip = [];\n    this.offsetBounds = null;\n    this.visible = null;\n    this.computedStyles = null;\n    this.colors = {};\n    this.styles = {};\n    this.backgroundImages = null;\n    this.transformData = null;\n    this.transformMatrix = null;\n    this.isPseudoElement = false;\n    this.opacity = null;\n}\n\nNodeContainer.prototype.cloneTo = function(stack) {\n    stack.visible = this.visible;\n    stack.borders = this.borders;\n    stack.bounds = this.bounds;\n    stack.clip = this.clip;\n    stack.backgroundClip = this.backgroundClip;\n    stack.computedStyles = this.computedStyles;\n    stack.styles = this.styles;\n    stack.backgroundImages = this.backgroundImages;\n    stack.opacity = this.opacity;\n};\n\nNodeContainer.prototype.getOpacity = function() {\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\n};\n\nNodeContainer.prototype.assignStack = function(stack) {\n    this.stack = stack;\n    stack.children.push(this);\n};\n\nNodeContainer.prototype.isElementVisible = function() {\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\n        this.css('display') !== \"none\" &&\n        this.css('visibility') !== \"hidden\" &&\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\n    );\n};\n\nNodeContainer.prototype.css = function(attribute) {\n    if (!this.computedStyles) {\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\n    }\n\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n};\n\nNodeContainer.prototype.prefixedCss = function(attribute) {\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    var value = this.css(attribute);\n    if (value === undefined) {\n        prefixes.some(function(prefix) {\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n            return value !== undefined;\n        }, this);\n    }\n    return value === undefined ? null : value;\n};\n\nNodeContainer.prototype.computedStyle = function(type) {\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n};\n\nNodeContainer.prototype.cssInt = function(attribute) {\n    var value = parseInt(this.css(attribute), 10);\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n};\n\nNodeContainer.prototype.color = function(attribute) {\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n};\n\nNodeContainer.prototype.cssFloat = function(attribute) {\n    var value = parseFloat(this.css(attribute));\n    return (isNaN(value)) ? 0 : value;\n};\n\nNodeContainer.prototype.fontWeight = function() {\n    var weight = this.css(\"fontWeight\");\n    switch(parseInt(weight, 10)){\n    case 401:\n        weight = \"bold\";\n        break;\n    case 400:\n        weight = \"normal\";\n        break;\n    }\n    return weight;\n};\n\nNodeContainer.prototype.parseClip = function() {\n    var matches = this.css('clip').match(this.CLIP);\n    if (matches) {\n        return {\n            top: parseInt(matches[1], 10),\n            right: parseInt(matches[2], 10),\n            bottom: parseInt(matches[3], 10),\n            left: parseInt(matches[4], 10)\n        };\n    }\n    return null;\n};\n\nNodeContainer.prototype.parseBackgroundImages = function() {\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\n};\n\nNodeContainer.prototype.cssList = function(property, index) {\n    var value = (this.css(property) || '').split(',');\n    value = value[index || 0] || value[0] || 'auto';\n    value = value.trim().split(' ');\n    if (value.length === 1) {\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\n    }\n    return value;\n};\n\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\n    var size = this.cssList(\"backgroundSize\", index);\n    var width, height;\n\n    if (isPercentage(size[0])) {\n        width = bounds.width * parseFloat(size[0]) / 100;\n    } else if (/contain|cover/.test(size[0])) {\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\n    } else {\n        width = parseInt(size[0], 10);\n    }\n\n    if (size[0] === 'auto' && size[1] === 'auto') {\n        height = image.height;\n    } else if (size[1] === 'auto') {\n        height = width / image.width * image.height;\n    } else if (isPercentage(size[1])) {\n        height =  bounds.height * parseFloat(size[1]) / 100;\n    } else {\n        height = parseInt(size[1], 10);\n    }\n\n    if (size[0] === 'auto') {\n        width = height / image.height * image.width;\n    }\n\n    return {width: width, height: height};\n};\n\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\n    var position = this.cssList('backgroundPosition', index);\n    var left, top;\n\n    if (isPercentage(position[0])){\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n    } else {\n        left = parseInt(position[0], 10);\n    }\n\n    if (position[1] === 'auto') {\n        top = left / image.width * image.height;\n    } else if (isPercentage(position[1])){\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\n    } else {\n        top = parseInt(position[1], 10);\n    }\n\n    if (position[0] === 'auto') {\n        left = top / image.height * image.width;\n    }\n\n    return {left: left, top: top};\n};\n\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\n    return this.cssList(\"backgroundRepeat\", index)[0];\n};\n\nNodeContainer.prototype.parseTextShadows = function() {\n    var textShadow = this.css(\"textShadow\");\n    var results = [];\n\n    if (textShadow && textShadow !== 'none') {\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n        for (var i = 0; shadows && (i < shadows.length); i++) {\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n            results.push({\n                color: new Color(s[0]),\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n                blur: s[3] ? s[3].replace('px', '') : 0\n            });\n        }\n    }\n    return results;\n};\n\nNodeContainer.prototype.parseTransform = function() {\n    if (!this.transformData) {\n        if (this.hasTransform()) {\n            var offset = this.parseBounds();\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\n            origin[0] += offset.left;\n            origin[1] += offset.top;\n            this.transformData = {\n                origin: origin,\n                matrix: this.parseTransformMatrix()\n            };\n        } else {\n            this.transformData = {\n                origin: [0, 0],\n                matrix: [1, 0, 0, 1, 0, 0]\n            };\n        }\n    }\n    return this.transformData;\n};\n\nNodeContainer.prototype.parseTransformMatrix = function() {\n    if (!this.transformMatrix) {\n        var transform = this.prefixedCss(\"transform\");\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n    }\n    return this.transformMatrix;\n};\n\nNodeContainer.prototype.inverseTransform = function() {\n    var transformData = this.parseTransform();\n    return { origin: transformData.origin, matrix: matrixInverse(transformData.matrix) };\n};\n\nNodeContainer.prototype.parseBounds = function() {\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n};\n\nNodeContainer.prototype.hasTransform = function() {\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\n};\n\nNodeContainer.prototype.getValue = function() {\n    var value = this.node.value || \"\";\n    if (this.node.tagName === \"SELECT\") {\n        value = selectionValue(this.node);\n    } else if (this.node.type === \"password\") {\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\n    }\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\n};\n\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n\nfunction selectionValue(node) {\n    var option = node.options[node.selectedIndex || 0];\n    return option ? (option.text || \"\") : \"\";\n}\n\nfunction parseMatrix(match) {\n    if (match && match[1] === \"matrix\") {\n        return match[2].split(\",\").map(function(s) {\n            return parseFloat(s.trim());\n        });\n    } else if (match && match[1] === \"matrix3d\") {\n        var matrix3d = match[2].split(\",\").map(function(s) {\n          return parseFloat(s.trim());\n        });\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\n    }\n}\n\nfunction matrixInverse(m) {\n    // This is programmed specifically for transform matrices, which have a fixed structure.\n    var a = m[0], b = m[2], c = m[4], d = m[1], e = m[3], f = m[5];\n    var det = a*e - b*d;\n    var M = [e, -d, -b, a, b*f-c*e, c*d-a*f].map(function(val) { return val/det; });\n    return M;\n}\n\nfunction isPercentage(value) {\n    return value.toString().indexOf(\"%\") !== -1;\n}\n\nfunction removePx(str) {\n    return str.replace(\"px\", \"\");\n}\n\nfunction asFloat(str) {\n    return parseFloat(str);\n}\n\nmodule.exports = NodeContainer;\n\n},{\"./color\":3,\"./utils\":26}],15:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar punycode = _dereq_('punycode');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar TextContainer = _dereq_('./textcontainer');\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\nvar FontMetrics = _dereq_('./fontmetrics');\nvar Color = _dereq_('./color');\nvar StackingContext = _dereq_('./stackingcontext');\nvar utils = _dereq_('./utils');\nvar bind = utils.bind;\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeParser(element, renderer, support, imageLoader, options) {\n    log(\"Starting NodeParser\");\n    this.renderer = renderer;\n    this.options = options;\n    this.range = null;\n    this.support = support;\n    this.renderQueue = [];\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n    var parent = new NodeContainer(element, null);\n    if (options.background) {\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n    }\n    if (element === element.ownerDocument.documentElement) {\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n    }\n    parent.visibile = parent.isElementVisible();\n    this.createPseudoHideStyles(element.ownerDocument);\n    this.disableAnimations(element.ownerDocument);\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\n        return container.visible = container.isElementVisible();\n    }).map(this.getPseudoElements, this));\n    this.fontMetrics = new FontMetrics();\n    log(\"Fetched nodes, total:\", this.nodes.length);\n    log(\"Calculate overflow clips\");\n    this.calculateOverflowClips();\n    log(\"Start fetching images\");\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\n    this.ready = this.images.ready.then(bind(function() {\n        log(\"Images loaded, starting parsing\");\n        log(\"Creating stacking contexts\");\n        this.createStackingContexts();\n        log(\"Sorting stacking contexts\");\n        this.sortStackingContexts(this.stack);\n        this.parse(this.stack);\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\n        return new Promise(bind(function(resolve) {\n            if (!options.async) {\n                this.renderQueue.forEach(this.paint, this);\n                resolve();\n            } else if (typeof(options.async) === \"function\") {\n                options.async.call(this, this.renderQueue, resolve);\n            } else if (this.renderQueue.length > 0){\n                this.renderIndex = 0;\n                this.asyncRenderer(this.renderQueue, resolve);\n            } else {\n                resolve();\n            }\n        }, this));\n    }, this));\n}\n\nNodeParser.prototype.calculateOverflowClips = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container)) {\n            if (isPseudoElement(container)) {\n                container.appendToDOM();\n            }\n            container.borders = this.parseBorders(container);\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\n            var cssClip = container.parseClip();\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\n                clip.push([[\"rect\",\n                        container.bounds.left + cssClip.left,\n                        container.bounds.top + cssClip.top,\n                        cssClip.right - cssClip.left,\n                        cssClip.bottom - cssClip.top\n                ]]);\n            }\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\n            if (isPseudoElement(container)) {\n                container.cleanDOM();\n            }\n        } else if (isTextNode(container)) {\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\n        }\n        if (!isPseudoElement(container)) {\n            container.bounds = null;\n        }\n    }, this);\n};\n\nfunction hasParentClip(container) {\n    return container.parent && container.parent.clip.length;\n}\n\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\n    asyncTimer = asyncTimer || Date.now();\n    this.paint(queue[this.renderIndex++]);\n    if (queue.length === this.renderIndex) {\n        resolve();\n    } else if (asyncTimer + 20 > Date.now()) {\n        this.asyncRenderer(queue, resolve, asyncTimer);\n    } else {\n        setTimeout(bind(function() {\n            this.asyncRenderer(queue, resolve);\n        }, this), 0);\n    }\n};\n\nNodeParser.prototype.createPseudoHideStyles = function(document) {\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\n};\n\nNodeParser.prototype.disableAnimations = function(document) {\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\n};\n\nNodeParser.prototype.createStyles = function(document, styles) {\n    var hidePseudoElements = document.createElement('style');\n    hidePseudoElements.innerHTML = styles;\n    document.body.appendChild(hidePseudoElements);\n};\n\nNodeParser.prototype.getPseudoElements = function(container) {\n    var nodes = [[container]];\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\n        var before = this.getPseudoElement(container, \":before\");\n        var after = this.getPseudoElement(container, \":after\");\n\n        if (before) {\n            nodes.push(before);\n        }\n\n        if (after) {\n            nodes.push(after);\n        }\n    }\n    return flatten(nodes);\n};\n\nfunction toCamelCase(str) {\n    return str.replace(/(\\-[a-z])/g, function(match){\n        return match.toUpperCase().replace('-','');\n    });\n}\n\nNodeParser.prototype.getPseudoElement = function(container, type) {\n    var style = container.computedStyle(type);\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\n        return null;\n    }\n\n    var content = stripQuotes(style.content);\n    var isImage = content.substr(0, 3) === 'url';\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n\n    for (var i = style.length-1; i >= 0; i--) {\n        var property = toCamelCase(style.item(i));\n        pseudoNode.style[property] = style[property];\n    }\n\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n    if (isImage) {\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\n        return [pseudoContainer];\n    } else {\n        var text = document.createTextNode(content);\n        pseudoNode.appendChild(text);\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n    }\n};\n\n\nNodeParser.prototype.getChildren = function(parentContainer) {\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\n    }, this));\n};\n\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n    container.cloneTo(stack);\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n    parentStack.contexts.push(stack);\n    container.stack = stack;\n};\n\nNodeParser.prototype.createStackingContexts = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\n            this.newStackingContext(container, true);\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\n            this.newStackingContext(container, false);\n        } else {\n            container.assignStack(container.parent.stack);\n        }\n    }, this);\n};\n\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\n};\n\nNodeParser.prototype.isRootElement = function(container) {\n    return container.parent === null;\n};\n\nNodeParser.prototype.sortStackingContexts = function(stack) {\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n    stack.contexts.forEach(this.sortStackingContexts, this);\n};\n\nNodeParser.prototype.parseTextBounds = function(container) {\n    return function(text, index, textList) {\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\n                var offset = textList.slice(0, index).join(\"\").length;\n                return this.getRangeBounds(container.node, offset, text.length);\n            } else if (container.node && typeof(container.node.data) === \"string\") {\n                var replacementNode = container.node.splitText(text.length);\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n                container.node = replacementNode;\n                return bounds;\n            }\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\n            container.node = container.node.splitText(text.length);\n        }\n        return {};\n    };\n};\n\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n    var parent = node.parentNode,\n        backupText = node.cloneNode(true);\n\n    wrapper.appendChild(node.cloneNode(true));\n    parent.replaceChild(wrapper, node);\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n    parent.replaceChild(backupText, wrapper);\n    return bounds;\n};\n\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\n    var range = this.range || (this.range = node.ownerDocument.createRange());\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range.getBoundingClientRect();\n};\n\nfunction ClearTransform() {}\n\nNodeParser.prototype.parse = function(stack) {\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n    var descendantElements = stack.children.filter(isElement);\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n    var text = stack.children.filter(isTextNode).filter(hasText);\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\n            this.renderQueue.push(container);\n            if (isStackingContext(container)) {\n                this.parse(container);\n                this.renderQueue.push(new ClearTransform());\n            }\n        }, this);\n};\n\nNodeParser.prototype.paint = function(container) {\n    try {\n        if (container instanceof ClearTransform) {\n            this.renderer.ctx.restore();\n        } else if (isTextNode(container)) {\n            if (isPseudoElement(container.parent)) {\n                container.parent.appendToDOM();\n            }\n            this.paintText(container);\n            if (isPseudoElement(container.parent)) {\n                container.parent.cleanDOM();\n            }\n        } else {\n            this.paintNode(container);\n        }\n    } catch(e) {\n        log(e);\n        if (this.options.strict) {\n            throw e;\n        }\n    }\n};\n\nNodeParser.prototype.paintNode = function(container) {\n    if (isStackingContext(container)) {\n        this.renderer.setOpacity(container.opacity);\n        this.renderer.ctx.save();\n        if (container.hasTransform()) {\n            this.renderer.setTransform(container.parseTransform());\n        }\n    }\n\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\n        this.paintCheckbox(container);\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\n        this.paintRadio(container);\n    } else {\n        this.paintElement(container);\n    }\n};\n\nNodeParser.prototype.paintElement = function(container) {\n    var bounds = container.parseBounds();\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n    }, this, container);\n\n    this.renderer.mask(container.backgroundClip, function() {\n        this.renderer.renderShadows(container, container.borders.clip);\n    }, this, container);\n\n    this.renderer.clip(container.clip, function() {\n        this.renderer.renderBorders(container.borders.borders);\n    }, this, container);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        switch (container.node.nodeName) {\n        case \"svg\":\n        case \"IFRAME\":\n            var imgContainer = this.images.get(container.node);\n            if (imgContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n            } else {\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\n            }\n            break;\n        case \"IMG\":\n            var imageContainer = this.images.get(container.node.src);\n            if (imageContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n            } else {\n                log(\"Error loading <img>\", container.node.src);\n            }\n            break;\n        case \"CANVAS\":\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\n            break;\n        case \"SELECT\":\n        case \"INPUT\":\n        case \"TEXTAREA\":\n            this.paintFormValue(container);\n            break;\n        }\n    }, this, container);\n};\n\nNodeParser.prototype.paintCheckbox = function(container) {\n    var b = container.parseBounds();\n\n    var size = Math.min(b.width, b.height);\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\n    var r = [3, 3];\n    var radius = [r, r, r, r];\n    var borders = [1,1,1,1].map(function(w) {\n        return {color: new Color('#A5A5A5'), width: w};\n    });\n\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n        if (container.node.checked) {\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\n        }\n    }, this, container);\n};\n\nNodeParser.prototype.paintRadio = function(container) {\n    var bounds = container.parseBounds();\n\n    var size = Math.min(bounds.width, bounds.height) - 2;\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n        if (container.node.checked) {\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n        }\n    }, this, container);\n};\n\nNodeParser.prototype.paintFormValue = function(container) {\n    var value = container.getValue();\n    if (value.length > 0) {\n        var document = container.node.ownerDocument;\n        var wrapper = document.createElement('html2canvaswrapper');\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\n            'boxSizing', 'whiteSpace', 'wordWrap'];\n\n        properties.forEach(function(property) {\n            try {\n                wrapper.style[property] = container.css(property);\n            } catch(e) {\n                // Older IE has issues with \"border\"\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\n            }\n        });\n        var bounds = container.parseBounds();\n        wrapper.style.position = \"fixed\";\n        wrapper.style.left = bounds.left + \"px\";\n        wrapper.style.top = bounds.top + \"px\";\n        wrapper.textContent = value;\n        document.body.appendChild(wrapper);\n        this.paintText(new TextContainer(wrapper.firstChild, container));\n        document.body.removeChild(wrapper);\n    }\n};\n\nNodeParser.prototype.paintText = function(container) {\n    container.applyTextTransform();\n    var characters = punycode.ucs2.decode(container.node.data);\n    var wordRendering = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data);\n    var textList = wordRendering ? getWords(characters) : characters.map(function(character) {\n        return punycode.ucs2.encode([character]);\n    });\n    if (!wordRendering) {\n        container.parent.node.style.fontVariantLigatures = 'none';\n    }\n\n    var weight = container.parent.fontWeight();\n    var size = container.parent.css('fontSize');\n    var family = container.parent.css('fontFamily');\n    var shadows = container.parent.parseTextShadows();\n\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n    if (shadows.length) {\n        // TODO: support multiple text shadows\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n    } else {\n        this.renderer.clearShadow();\n    }\n\n    this.renderer.clip(container.parent.clip, function() {\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\n            if (bounds) {\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n            }\n        }, this);\n    }, this, container.parent);\n};\n\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\n    case \"underline\":\n        // Draws a line at the baseline of the font\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"overline\":\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"line-through\":\n        // TODO try and find exact position for line-through\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    }\n};\n\nvar borderColorTransforms = {\n    inset: [\n        [\"darken\", 0.60],\n        [\"darken\", 0.10],\n        [\"darken\", 0.10],\n        [\"darken\", 0.60]\n    ]\n};\n\nNodeParser.prototype.parseBorders = function(container) {\n    var nodeBounds = container.parseBounds();\n    var radius = getBorderRadiusData(container);\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\n        var style = container.css('border' + side + 'Style');\n        var color = container.color('border' + side + 'Color');\n        if (style === \"inset\" && color.isBlack()) {\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\n        }\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n        return {\n            width: container.cssInt('border' + side + 'Width'),\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n            style: style,\n            pathArgs: null,\n            args: null\n        };\n    });\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n\n    return {\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n    };\n};\n\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\n    var pathBounds = {\n        top: nodeBounds.top + borders[0].width/2,\n        right: nodeBounds.right - borders[1].width/2,\n        bottom: nodeBounds.bottom - borders[2].width/2,\n        left: nodeBounds.left + borders[3].width/2\n    };\n    return borders.map(function(border, borderSide) {\n        if (border.width > 0) {\n            var bx = nodeBounds.left;\n            var by = nodeBounds.top;\n            var bw = nodeBounds.width;\n            var bh = nodeBounds.height - (borders[2].width);\n\n            switch(borderSide) {\n            case 0:\n                // top border\n                bh = borders[0].width;\n                border.args = drawSide({\n                        c1: [bx, by],\n                        c2: [bx + bw, by],\n                        c3: [bx + bw - borders[1].width, by + bh],\n                        c4: [bx + borders[3].width, by + bh]\n                    }, radius[0], radius[1],\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\n                border.pathArgs = drawSidePath({\n                        c1: [pathBounds.left, pathBounds.top],\n                        c2: [pathBounds.right, pathBounds.top]\n                    }, radius[0], radius[1],\n                    borderPoints.topLeft, borderPoints.topRight);\n                break;\n            case 1:\n                // right border\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\n                bw = borders[1].width;\n\n                border.args = drawSide({\n                        c1: [bx + bw, by],\n                        c2: [bx + bw, by + bh + borders[2].width],\n                        c3: [bx, by + bh],\n                        c4: [bx, by + borders[0].width]\n                    }, radius[1], radius[2],\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\n                border.pathArgs = drawSidePath({\n                        c1: [pathBounds.right, pathBounds.top],\n                        c2: [pathBounds.right, pathBounds.bottom]\n                    }, radius[1], radius[2],\n                    borderPoints.topRight, borderPoints.bottomRight);\n                break;\n            case 2:\n                // bottom border\n                by = (by + nodeBounds.height) - (borders[2].width);\n                bh = borders[2].width;\n                border.args = drawSide({\n                        c1: [bx + bw, by + bh],\n                        c2: [bx, by + bh],\n                        c3: [bx + borders[3].width, by],\n                        c4: [bx + bw - borders[3].width, by]\n                    }, radius[2], radius[3],\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\n                border.pathArgs = drawSidePath({\n                        c1: [pathBounds.right, pathBounds.bottom],\n                        c2: [pathBounds.left, pathBounds.bottom]\n                    }, radius[2], radius[3],\n                    borderPoints.bottomRight, borderPoints.bottomLeft);\n                break;\n            case 3:\n                // left border\n                bw = borders[3].width;\n                border.args = drawSide({\n                        c1: [bx, by + bh + borders[2].width],\n                        c2: [bx, by],\n                        c3: [bx + bw, by + borders[0].width],\n                        c4: [bx + bw, by + bh]\n                    }, radius[3], radius[0],\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\n                border.pathArgs = drawSidePath({\n                        c1: [pathBounds.left, pathBounds.bottom],\n                        c2: [pathBounds.left, pathBounds.top]\n                    }, radius[3], radius[0],\n                    borderPoints.bottomLeft, borderPoints.topLeft);\n                break;\n            }\n        }\n        return border;\n    });\n}\n\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\n    var backgroundClip = container.css('backgroundClip'),\n        borderArgs = [];\n\n    switch(backgroundClip) {\n    case \"content-box\":\n    case \"padding-box\":\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\n        break;\n\n    default:\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n        break;\n    }\n\n    return borderArgs;\n};\n\nfunction getCurvePoints(x, y, r1, r2) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = (r1) * kappa, // control point offset horizontal\n        oy = (r2) * kappa, // control point offset vertical\n        xm = x + r1, // x-middle\n        ym = y + r2; // y-middle\n    return {\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\n    };\n}\n\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\n    var x = bounds.left,\n        y = bounds.top,\n        width = bounds.width,\n        height = bounds.height,\n\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\n\n    var topWidth = width - trh,\n        rightHeight = height - brv,\n        bottomWidth = width - brh,\n        leftHeight = height - blv;\n\n    return {\n        topLeft: getCurvePoints(x + borders[3].width/2, y + borders[0].width/2, Math.max(0, tlh - borders[3].width/2), Math.max(0, tlv - borders[0].width/2)).topLeft.subdivide(0.5),\n        topRight: getCurvePoints(x + Math.min(topWidth, width + borders[3].width/2), y + borders[0].width/2, (topWidth > width + borders[3].width/2) ? 0 :trh - borders[3].width/2, trv - borders[0].width/2).topRight.subdivide(0.5),\n        bottomRight: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width/2), y + Math.min(rightHeight, height + borders[0].width/2), Math.max(0, brh - borders[1].width/2),  brv - borders[2].width/2).bottomRight.subdivide(0.5),\n        bottomLeft: getCurvePoints(x + borders[3].width/2, y + leftHeight, Math.max(0, blh - borders[3].width/2), blv - borders[2].width/2).bottomLeft.subdivide(0.5),\n\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n    };\n}\n\nfunction bezierCurve(start, startControl, endControl, end) {\n    var lerp = function (a, b, t) {\n        return {\n            x: a.x + (b.x - a.x) * t,\n            y: a.y + (b.y - a.y) * t\n        };\n    };\n\n    return {\n        start: start,\n        startControl: startControl,\n        endControl: endControl,\n        end: end,\n        subdivide: function(t) {\n            var ab = lerp(start, startControl, t),\n                bc = lerp(startControl, endControl, t),\n                cd = lerp(endControl, end, t),\n                abbc = lerp(ab, bc, t),\n                bccd = lerp(bc, cd, t),\n                dest = lerp(abbc, bccd, t);\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n        },\n        curveTo: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n        },\n        curveToReversed: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n        }\n    };\n}\n\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n    var borderArgs = [];\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\n        outer1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\n        outer2[0].curveTo(borderArgs);\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\n        inner2[0].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\n    }\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\n        inner1[1].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\n    }\n\n    return borderArgs;\n}\n\nfunction drawSidePath(borderData, radius1, radius2, curve1, curve2) {\n    var borderArgs = [];\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", curve1[1].start.x, curve1[1].start.y]);\n        curve1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\n    }\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", curve2[0].start.x, curve2[0].start.y]);\n        curve2[0].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c2[0], borderData.c2[1]]);\n    }\n\n    return borderArgs;\n}\n\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\n        corner1[0].curveTo(borderArgs);\n        corner1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([\"line\", x, y]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\n    }\n}\n\nfunction negativeZIndex(container) {\n    return container.cssInt(\"zIndex\") < 0;\n}\n\nfunction positiveZIndex(container) {\n    return container.cssInt(\"zIndex\") > 0;\n}\n\nfunction zIndex0(container) {\n    return container.cssInt(\"zIndex\") === 0;\n}\n\nfunction inlineLevel(container) {\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction isStackingContext(container) {\n    return (container instanceof StackingContext);\n}\n\nfunction hasText(container) {\n    return container.node.data.trim().length > 0;\n}\n\nfunction noLetterSpacing(container) {\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\n}\n\nfunction getBorderRadiusData(container) {\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\n        var value = container.css('border' + side + 'Radius');\n        var arr = value.split(\" \");\n        if (arr.length <= 1) {\n            arr[1] = arr[0];\n        }\n        return arr.map(asInt);\n    });\n}\n\nfunction renderableNode(node) {\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\n}\n\nfunction isPositionedForStacking(container) {\n    var position = container.css(\"position\");\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\n    return zIndex !== \"auto\";\n}\n\nfunction isPositioned(container) {\n    return container.css(\"position\") !== \"static\";\n}\n\nfunction isFloating(container) {\n    return container.css(\"float\") !== \"none\";\n}\n\nfunction isInlineBlock(container) {\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction not(callback) {\n    var context = this;\n    return function() {\n        return !callback.apply(context, arguments);\n    };\n}\n\nfunction isElement(container) {\n    return container.node.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction isPseudoElement(container) {\n    return container.isPseudoElement === true;\n}\n\nfunction isTextNode(container) {\n    return container.node.nodeType === Node.TEXT_NODE;\n}\n\nfunction zIndexSort(contexts) {\n    return function(a, b) {\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\n    };\n}\n\nfunction hasOpacity(container) {\n    return container.getOpacity() < 1;\n}\n\nfunction asInt(value) {\n    return parseInt(value, 10);\n}\n\nfunction getWidth(border) {\n    return border.width;\n}\n\nfunction nonIgnoredElement(nodeContainer) {\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\n}\n\nfunction flatten(arrays) {\n    return [].concat.apply([], arrays);\n}\n\nfunction stripQuotes(content) {\n    var first = content.substr(0, 1);\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\n}\n\nfunction getWords(characters) {\n    var words = [], i = 0, onWordBoundary = false, word;\n    while(characters.length) {\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n            onWordBoundary =! onWordBoundary;\n            i = 0;\n        } else {\n            i++;\n        }\n\n        if (i >= characters.length) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n        }\n    }\n    return words;\n}\n\nfunction isWordBoundary(characterCode) {\n    return [\n        32, // <space>\n        13, // \\r\n        10, // \\n\n        9, // \\t\n        45 // -\n    ].indexOf(characterCode) !== -1;\n}\n\nfunction hasUnicode(string) {\n    return (/[^\\u0000-\\u00ff]/).test(string);\n}\n\nmodule.exports = NodeParser;\n\n},{\"./color\":3,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":1}],16:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar utils = _dereq_('./utils');\nvar log = _dereq_('./log');\nvar createWindowClone = _dereq_('./clone');\nvar decode64 = utils.decode64;\n\nfunction Proxy(src, proxyUrl, document) {\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\n    if (!proxyUrl) {\n        return Promise.reject(\"No proxy configured\");\n    }\n    var callback = createCallback(supportsCORS);\n    var url = createProxyUrl(proxyUrl, src, callback);\n\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\n        return decode64(response.content);\n    }));\n}\nvar proxyCount = 0;\n\nfunction ProxyURL(src, proxyUrl, document) {\n    var supportsCORSImage = ('crossOrigin' in new Image());\n    var callback = createCallback(supportsCORSImage);\n    var url = createProxyUrl(proxyUrl, src, callback);\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\n        return \"data:\" + response.type + \";base64,\" + response.content;\n    }));\n}\n\nfunction jsonp(document, url, callback) {\n    return new Promise(function(resolve, reject) {\n        var s = document.createElement(\"script\");\n        var cleanup = function() {\n            delete window.html2canvas.proxy[callback];\n            document.body.removeChild(s);\n        };\n        window.html2canvas.proxy[callback] = function(response) {\n            cleanup();\n            resolve(response);\n        };\n        s.src = url;\n        s.onerror = function(e) {\n            cleanup();\n            reject(e);\n        };\n        document.body.appendChild(s);\n    });\n}\n\nfunction createCallback(useCORS) {\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\n}\n\nfunction createProxyUrl(proxyUrl, src, callback) {\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\n}\n\nfunction documentFromHTML(src) {\n    return function(html) {\n        var parser = new DOMParser(), doc;\n        try {\n            doc = parser.parseFromString(html, \"text/html\");\n        } catch(e) {\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\n            doc = document.implementation.createHTMLDocument(\"\");\n            try {\n                doc.open();\n                doc.write(html);\n                doc.close();\n            } catch(ee) {\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n            }\n        }\n\n        var b = doc.querySelector(\"base\");\n        if (!b || !b.href.host) {\n            var base = doc.createElement(\"base\");\n            base.href = src;\n            doc.head.insertBefore(base, doc.head.firstChild);\n        }\n\n        return doc;\n    };\n}\n\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\n        return createWindowClone(doc, document, width, height, options, 0, 0);\n    });\n}\n\nexports.Proxy = Proxy;\nexports.ProxyURL = ProxyURL;\nexports.loadUrlDocument = loadUrlDocument;\n\n},{\"./clone\":2,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\n\nfunction ProxyImageContainer(src, proxy) {\n    var link = document.createElement(\"a\");\n    link.href = src;\n    src = link.href;\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.crossOrigin = \"Anonymous\";\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n\n        new ProxyURL(src, proxy, document).then(function(url) {\n            self.image.src = url;\n        })['catch'](reject);\n    });\n}\n\nmodule.exports = ProxyImageContainer;\n\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction PseudoElementContainer(node, parent, type) {\n    NodeContainer.call(this, node, parent);\n    this.isPseudoElement = true;\n    this.before = type === \":before\";\n}\n\nPseudoElementContainer.prototype.cloneTo = function(stack) {\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\n    stack.isPseudoElement = true;\n    stack.before = this.before;\n};\n\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n\nPseudoElementContainer.prototype.appendToDOM = function() {\n    if (this.before) {\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n    } else {\n        this.parent.node.appendChild(this.node);\n    }\n    this.parent.node.className += \" \" + this.getHideClass();\n};\n\nPseudoElementContainer.prototype.cleanDOM = function() {\n    this.node.parentNode.removeChild(this.node);\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\n};\n\nPseudoElementContainer.prototype.getHideClass = function() {\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\n};\n\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\n\nmodule.exports = PseudoElementContainer;\n\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction Renderer(width, height, images, options, document) {\n    this.width = width;\n    this.height = height;\n    this.images = images;\n    this.options = options;\n    this.document = document;\n}\n\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\n    var paddingLeft = container.cssInt('paddingLeft'),\n        paddingTop = container.cssInt('paddingTop'),\n        paddingRight = container.cssInt('paddingRight'),\n        paddingBottom = container.cssInt('paddingBottom'),\n        borders = borderData.borders;\n\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n    this.drawImage(\n        imageContainer,\n        0,\n        0,\n        imageContainer.image.width || width,\n        imageContainer.image.height || height,\n        bounds.left + paddingLeft + borders[3].width,\n        bounds.top + paddingTop + borders[0].width,\n        width,\n        height\n    );\n};\n\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\n    if (bounds.height > 0 && bounds.width > 0) {\n        this.renderBackgroundColor(container, bounds);\n        this.renderBackgroundImage(container, bounds, borderData);\n    }\n};\n\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\n    var color = container.color(\"backgroundColor\");\n    if (!color.isTransparent()) {\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n    }\n};\n\nRenderer.prototype.renderShadows = function(container, shape) {\n    var boxShadow = container.css('boxShadow');\n    if (boxShadow !== 'none') {\n        var shadows = boxShadow.split(/,(?![^(]*\\))/);\n        this.shadow(shape, shadows);\n    }\n};\n\nRenderer.prototype.renderBorders = function(borders) {\n    borders.forEach(this.renderBorder, this);\n};\n\nRenderer.prototype.renderBorder = function(data) {\n    if (!data.color.isTransparent() && data.args !== null) {\n        if (data.style === 'dashed' || data.style === 'dotted') {\n            var dash = (data.style === 'dashed') ? 3 : data.width;\n            this.ctx.setLineDash([dash]);\n            this.path(data.pathArgs);\n            this.ctx.strokeStyle = data.color;\n            this.ctx.lineWidth = data.width;\n            this.ctx.stroke();\n        } else {\n            this.drawShape(data.args, data.color);\n        }\n    }\n};\n\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\n    var backgroundImages = container.parseBackgroundImages();\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\n        switch(backgroundImage.method) {\n        case \"url\":\n            var image = this.images.get(backgroundImage.args[0]);\n            if (image) {\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"linear-gradient\":\n        case \"gradient\":\n            var gradientImage = this.images.get(backgroundImage.value);\n            if (gradientImage) {\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"none\":\n            break;\n        default:\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\n        }\n    }, this);\n};\n\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n    var repeat = container.parseBackgroundRepeat(index);\n    switch (repeat) {\n    case \"repeat-x\":\n    case \"repeat no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\n        break;\n    case \"repeat-y\":\n    case \"no-repeat repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\n        break;\n    case \"no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\n        break;\n    default:\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\n        break;\n    }\n};\n\nmodule.exports = Renderer;\n\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\nvar Renderer = _dereq_('../renderer');\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\nvar log = _dereq_('../log');\n\nfunction CanvasRenderer(width, height) {\n    Renderer.apply(this, arguments);\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\n    this.ctx = this.canvas.getContext(\"2d\");\n    if (!this.options.canvas) {\n        if (this.options.dpi) {\n            this.options.scale = this.options.dpi / 96;   // 1 CSS inch = 96px.\n        }\n        if (this.options.scale) {\n            this.canvas.style.width = width + 'px';\n            this.canvas.style.height = height + 'px';\n            this.canvas.width = Math.floor(width * this.options.scale);\n            this.canvas.height = Math.floor(height * this.options.scale);\n            this.ctx.scale(this.options.scale, this.options.scale);\n        } else {\n            this.canvas.width = width;\n            this.canvas.height = height;\n        }\n    }\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\n    this.ctx.textBaseline = \"bottom\";\n    this.variables = {};\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\n}\n\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\n\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\n    this.setFillStyle(color).fillRect(left, top, width, height);\n};\n\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\n    this.setFillStyle(color);\n    this.ctx.beginPath();\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\n    this.ctx.closePath();\n    this.ctx.fill();\n};\n\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\n    this.circle(left, top, size, color);\n    this.ctx.strokeStyle = strokeColor.toString();\n    this.ctx.stroke();\n};\n\nCanvasRenderer.prototype.shadow = function(shape, shadows) {\n    var parseShadow = function(str) {\n        var propertyFilters = { color: /^(#|rgb|hsl|(?!(inset|initial|inherit))\\D+)/i, inset: /^inset/i, px: /px$/i };\n        var pxPropertyNames = [ 'x', 'y', 'blur', 'spread' ];\n        var properties = str.split(/ (?![^(]*\\))/);\n        var info = {};\n        for (var key in propertyFilters) {\n            info[key] = properties.filter(propertyFilters[key].test.bind(propertyFilters[key]));\n            info[key] = info[key].length === 0 ? null : info[key].length === 1 ? info[key][0] : info[key];\n        }\n        for (var i=0; i<info.px.length; i++) {\n            info[pxPropertyNames[i]] = parseInt(info.px[i]);\n        }\n        return info;\n    };\n    var drawShadow = function(shadow) {\n        var info = parseShadow(shadow);\n        if (!info.inset) {\n            context.shadowOffsetX = info.x;\n            context.shadowOffsetY = info.y;\n            context.shadowColor = info.color;\n            context.shadowBlur = info.blur;\n            context.fill();\n        }\n    };\n    var context = this.setFillStyle('white');\n    context.save();\n    this.shape(shape);\n    shadows.forEach(drawShadow, this);\n    context.restore();\n};\n\nCanvasRenderer.prototype.drawShape = function(shape, color) {\n    this.shape(shape);\n    this.setFillStyle(color).fill();\n};\n\nCanvasRenderer.prototype.taints = function(imageContainer) {\n    if (imageContainer.tainted === null) {\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\n        try {\n            this.taintCtx.getImageData(0, 0, 1, 1);\n            imageContainer.tainted = false;\n        } catch(e) {\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\n            imageContainer.tainted = true;\n        }\n    }\n\n    return imageContainer.tainted;\n};\n\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n};\n\nCanvasRenderer.prototype.clip = function(shapes, callback, context, container) {\n    this.ctx.save();\n    if (container && container.hasTransform()) {\n        this.setTransform(container.inverseTransform());\n        shapes.filter(hasEntries).forEach(function(shape) {\n            this.shape(shape).clip();\n        }, this);\n        this.setTransform(container.parseTransform());\n    } else {\n        shapes.filter(hasEntries).forEach(function(shape) {\n            this.shape(shape).clip();\n        }, this);\n    }\n    callback.call(context);\n    this.ctx.restore();\n};\n\nCanvasRenderer.prototype.mask = function(shapes, callback, context, container) {\n    var borderClip = shapes[shapes.length-1];\n    if (borderClip && borderClip.length) {\n        var canvasBorderCCW = [\"rect\", this.canvas.width, 0, -this.canvas.width, this.canvas.height];\n        var maskShape = [canvasBorderCCW].concat(borderClip).concat([borderClip[0]]);\n        shapes = shapes.slice(0,-1).concat([maskShape]);\n    }\n    this.clip(shapes, callback, context, container);\n};\n\nCanvasRenderer.prototype.shape = function(shape) {\n    this.ctx.beginPath();\n    shape.forEach(function(point, index) {\n        if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n        } else {\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\n        }\n    }, this);\n    this.ctx.closePath();\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.path = function(shape) {\n    this.ctx.beginPath();\n    shape.forEach(function(point, index) {\n        if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n        } else {\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\n        }\n    }, this);\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\n    variant = /^(normal|small-caps)$/i.test(variant) ? variant : '';\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\n};\n\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\n    this.setVariable(\"shadowColor\", color.toString())\n        .setVariable(\"shadowOffsetY\", offsetX)\n        .setVariable(\"shadowOffsetX\", offsetY)\n        .setVariable(\"shadowBlur\", blur);\n};\n\nCanvasRenderer.prototype.clearShadow = function() {\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\n};\n\nCanvasRenderer.prototype.setOpacity = function(opacity) {\n    this.ctx.globalAlpha = opacity;\n};\n\nCanvasRenderer.prototype.setTransform = function(transform) {\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\n    this.ctx.transform.apply(this.ctx, transform.matrix);\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n};\n\nCanvasRenderer.prototype.setVariable = function(property, value) {\n    if (this.variables[property] !== value) {\n        this.variables[property] = this.ctx[property] = value;\n    }\n\n    return this;\n};\n\nCanvasRenderer.prototype.text = function(text, left, bottom) {\n    this.ctx.fillText(text, left, bottom);\n};\n\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n    var shape = [\n        [\"line\", Math.round(left), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(height + top)],\n        [\"line\", Math.round(left), Math.round(height + top)]\n    ];\n    this.clip([shape], function() {\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n    }, this);\n};\n\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\n    this.ctx.translate(offsetX, offsetY);\n    this.ctx.fill();\n    this.ctx.translate(-offsetX, -offsetY);\n};\n\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\n    if (gradientImage instanceof LinearGradientContainer) {\n        var gradient = this.ctx.createLinearGradient(\n            bounds.left + bounds.width * gradientImage.x0,\n            bounds.top + bounds.height * gradientImage.y0,\n            bounds.left +  bounds.width * gradientImage.x1,\n            bounds.top +  bounds.height * gradientImage.y1);\n        gradientImage.colorStops.forEach(function(colorStop) {\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n        });\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n    }\n};\n\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\n    var image = imageContainer.image;\n    if(image.width === size.width && image.height === size.height) {\n        return image;\n    }\n\n    var ctx, canvas = document.createElement('canvas');\n    canvas.width = size.width;\n    canvas.height = size.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\n    return canvas;\n};\n\nfunction hasEntries(array) {\n    return array.length > 0;\n}\n\nmodule.exports = CanvasRenderer;\n\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\n    NodeContainer.call(this, element, parent);\n    this.ownStacking = hasOwnStacking;\n    this.contexts = [];\n    this.children = [];\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n}\n\nStackingContext.prototype = Object.create(NodeContainer.prototype);\n\nStackingContext.prototype.getParentStack = function(context) {\n    var parentStack = (this.parent) ? this.parent.stack : null;\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\n};\n\nmodule.exports = StackingContext;\n\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\nfunction Support(document) {\n    this.rangeBounds = this.testRangeBounds(document);\n    this.cors = this.testCORS();\n    this.svg = this.testSVG();\n}\n\nSupport.prototype.testRangeBounds = function(document) {\n    var range, testElement, rangeBounds, rangeHeight, support = false;\n\n    if (document.createRange) {\n        range = document.createRange();\n        if (range.getBoundingClientRect) {\n            testElement = document.createElement('boundtest');\n            testElement.style.height = \"123px\";\n            testElement.style.display = \"block\";\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            rangeBounds = range.getBoundingClientRect();\n            rangeHeight = rangeBounds.height;\n\n            if (rangeHeight === 123) {\n                support = true;\n            }\n            document.body.removeChild(testElement);\n        }\n    }\n\n    return support;\n};\n\nSupport.prototype.testCORS = function() {\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\n};\n\nSupport.prototype.testSVG = function() {\n    var img = new Image();\n    var canvas = document.createElement(\"canvas\");\n    var ctx =  canvas.getContext(\"2d\");\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch(e) {\n        return false;\n    }\n    return true;\n};\n\nmodule.exports = Support;\n\n},{}],23:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar decode64 = _dereq_('./utils').decode64;\n\nfunction SVGContainer(src) {\n    this.src = src;\n    this.image = null;\n    var self = this;\n\n    this.promise = this.hasFabric().then(function() {\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\n    }).then(function(svg) {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGContainer.prototype.hasFabric = function() {\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\n};\n\nSVGContainer.prototype.inlineFormatting = function(src) {\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n};\n\nSVGContainer.prototype.removeContentType = function(src) {\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\n};\n\nSVGContainer.prototype.isInline = function(src) {\n    return (/^data:image\\/svg\\+xml/i.test(src));\n};\n\nSVGContainer.prototype.createCanvas = function(resolve) {\n    var self = this;\n    return function (objects, options) {\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\n        self.image = canvas.lowerCanvasEl;\n        canvas\n            .setWidth(options.width)\n            .setHeight(options.height)\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\n            .renderAll();\n        resolve(canvas.lowerCanvasEl);\n    };\n};\n\nSVGContainer.prototype.decode64 = function(str) {\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\n};\n\nmodule.exports = SVGContainer;\n\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\nvar SVGContainer = _dereq_('./svgcontainer');\n\nfunction SVGNodeContainer(node, _native) {\n    this.src = node;\n    this.image = null;\n    var self = this;\n\n    this.promise = _native ? new Promise(function(resolve, reject) {\n        self.image = new Image();\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    }) : this.hasFabric().then(function() {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n\nmodule.exports = SVGNodeContainer;\n\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction TextContainer(node, parent) {\n    NodeContainer.call(this, node, parent);\n}\n\nTextContainer.prototype = Object.create(NodeContainer.prototype);\n\nTextContainer.prototype.applyTextTransform = function() {\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\n};\n\nTextContainer.prototype.transform = function(transform) {\n    var text = this.node.data;\n    switch(transform){\n        case \"lowercase\":\n            return text.toLowerCase();\n        case \"capitalize\":\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n        case \"uppercase\":\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nfunction capitalize(m, p1, p2) {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n}\n\nmodule.exports = TextContainer;\n\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\nexports.smallImage = function smallImage() {\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n};\n\nexports.bind = function(callback, context) {\n    return function() {\n        return callback.apply(context, arguments);\n    };\n};\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nexports.decode64 = function(base64) {\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\n\n    var output = \"\";\n\n    for (i = 0; i < len; i+=4) {\n        encoded1 = chars.indexOf(base64[i]);\n        encoded2 = chars.indexOf(base64[i+1]);\n        encoded3 = chars.indexOf(base64[i+2]);\n        encoded4 = chars.indexOf(base64[i+3]);\n\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\n        if (encoded3 === 64) {\n            output += String.fromCharCode(byte1);\n        } else if (encoded4 === 64 || encoded4 === -1) {\n            output += String.fromCharCode(byte1, byte2);\n        } else{\n            output += String.fromCharCode(byte1, byte2, byte3);\n        }\n    }\n\n    return output;\n};\n\nexports.getBounds = function(node) {\n    if (node.getBoundingClientRect) {\n        var clientRect = node.getBoundingClientRect();\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n        return {\n            top: clientRect.top,\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\n            right: clientRect.left + width,\n            left: clientRect.left,\n            width:  width,\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n        };\n    }\n    return {};\n};\n\nexports.offsetBounds = function(node) {\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\n\n    return {\n        top: node.offsetTop + parent.top,\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\n        right: node.offsetLeft + parent.left + node.offsetWidth,\n        left: node.offsetLeft + parent.left,\n        width: node.offsetWidth,\n        height: node.offsetHeight\n    };\n};\n\nexports.parseBackgrounds = function(backgroundImage) {\n    var whitespace = ' \\r\\n\\t',\n        method, definition, prefix, prefix_i, block, results = [],\n        mode = 0, numParen = 0, quote, args;\n    var appendResult = function() {\n        if(method) {\n            if (definition.substr(0, 1) === '\"') {\n                definition = definition.substr(1, definition.length - 2);\n            }\n            if (definition) {\n                args.push(definition);\n            }\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\n                prefix = method.substr(0, prefix_i);\n                method = method.substr(prefix_i);\n            }\n            results.push({\n                prefix: prefix,\n                method: method.toLowerCase(),\n                value: block,\n                args: args,\n                image: null\n            });\n        }\n        args = [];\n        method = prefix = definition = block = '';\n    };\n    args = [];\n    method = prefix = definition = block = '';\n    backgroundImage.split(\"\").forEach(function(c) {\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\n            return;\n        }\n        switch(c) {\n        case '\"':\n            if(!quote) {\n                quote = c;\n            } else if(quote === c) {\n                quote = null;\n            }\n            break;\n        case '(':\n            if(quote) {\n                break;\n            } else if(mode === 0) {\n                mode = 1;\n                block += c;\n                return;\n            } else {\n                numParen++;\n            }\n            break;\n        case ')':\n            if (quote) {\n                break;\n            } else if(mode === 1) {\n                if(numParen === 0) {\n                    mode = 0;\n                    block += c;\n                    appendResult();\n                    return;\n                } else {\n                    numParen--;\n                }\n            }\n            break;\n\n        case ',':\n            if (quote) {\n                break;\n            } else if(mode === 0) {\n                appendResult();\n                return;\n            } else if (mode === 1) {\n                if (numParen === 0 && !method.match(/^url$/i)) {\n                    args.push(definition);\n                    definition = '';\n                    block += c;\n                    return;\n                }\n            }\n            break;\n        }\n\n        block += c;\n        if (mode === 0) {\n            method += c;\n        } else {\n            definition += c;\n        }\n    });\n\n    appendResult();\n    return results;\n};\n\n},{}],27:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\n\nfunction WebkitGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\n}\n\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\nmodule.exports = WebkitGradientContainer;\n\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\nfunction XHR(url) {\n    return new Promise(function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n\n        xhr.onload = function() {\n            if (xhr.status === 200) {\n                resolve(xhr.responseText);\n            } else {\n                reject(new Error(xhr.statusText));\n            }\n        };\n\n        xhr.onerror = function() {\n            reject(new Error(\"Network Error\"));\n        };\n\n        xhr.send();\n    });\n}\n\nmodule.exports = XHR;\n\n},{}]},{},[4])(4)\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}