{"ast":null,"code":"import _defineProperty from\"/home/ashish/docpdf/pdfdoc/research-ranking-app/my-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/ashish/docpdf/pdfdoc/research-ranking-app/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/ashish/docpdf/pdfdoc/research-ranking-app/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ashish/docpdf/pdfdoc/research-ranking-app/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ashish/docpdf/pdfdoc/research-ranking-app/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";// import \"./App.css\";\nimport HtmlViewer from\"./HtmlViewer\";import CheckboxList from\"./CheckboxList\";import FileUpload from\"./FileUpload\";import{Provider}from\"react-redux\";import store from\"./store\";import SearchResults from\"./SearchResults\";import Box from\"./Box\";import pdfjsLib from\"pdfjs-dist\";import axios from\"axios\";import Loader from\"./Loader\";import styles from'./stylenew.css';import{useLocation}from'react-router-dom';import DocumentList from\"./DocumentList\";import AddTerm from\"./AddTerm\";import TextInput from\"./textinput\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var apiUrl=process.env.REACT_APP_API_URL;export default function App(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),pdf=_React$useState2[0],setPdf=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),width=_React$useState4[0],setWidth=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),images=_React$useState6[0],setImages=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),height=_React$useState8[0],setHeight=_React$useState8[1];var _React$useState9=React.useState(1),_React$useState10=_slicedToArray(_React$useState9,2),totalPages=_React$useState10[0],setTotalPages=_React$useState10[1];var _React$useState11=React.useState(1),_React$useState12=_slicedToArray(_React$useState11,2),currentPage=_React$useState12[0],setCurrentPage=_React$useState12[1];var _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),pdfRendering=_React$useState14[0],setPdfRendering=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),pageRendering=_React$useState16[0],setPageRendering=_React$useState16[1];var _React$useState17=React.useState(\"\"),_React$useState18=_slicedToArray(_React$useState17,2),searchQuery=_React$useState18[0],setSearchQuery=_React$useState18[1];var _React$useState19=React.useState([]),_React$useState20=_slicedToArray(_React$useState19,2),searchResults=_React$useState20[0],setSearchResults=_React$useState20[1];var _React$useState21=React.useState({}),_React$useState22=_slicedToArray(_React$useState21,2),fileText=_React$useState22[0],setFileText=_React$useState22[1];var _React$useState23=React.useState({}),_React$useState24=_slicedToArray(_React$useState23,2),docranks=_React$useState24[0],setDocRanks=_React$useState24[1];var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),alldocsready=_React$useState26[0],setAllDocsReady=_React$useState26[1];var _React$useState27=React.useState(false),_React$useState28=_slicedToArray(_React$useState27,2),isLoading=_React$useState28[0],setIsLoading=_React$useState28[1];var _React$useState29=React.useState(\"\"),_React$useState30=_slicedToArray(_React$useState29,2),currhtml=_React$useState30[0],setcurrhtml=_React$useState30[1];var _React$useState31=React.useState([]),_React$useState32=_slicedToArray(_React$useState31,2),queryterms=_React$useState32[0],setqueryterms=_React$useState32[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),fileData=_useState2[0],setFileData=_useState2[1];var _React$useState33=React.useState([]),_React$useState34=_slicedToArray(_React$useState33,2),querymap=_React$useState34[0],setquerymap=_React$useState34[1];var _React$useState35=React.useState([]),_React$useState36=_slicedToArray(_React$useState35,2),fileNames=_React$useState36[0],setFileNames=_React$useState36[1];var _React$useState37=React.useState([]),_React$useState38=_slicedToArray(_React$useState37,2),colorMap=_React$useState38[0],setcolorMap=_React$useState38[1];var _React$useState39=React.useState(false),_React$useState40=_slicedToArray(_React$useState39,2),showpage=_React$useState40[0],setshowpage=_React$useState40[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pdfUrls=_useState4[0],setPdfUrls=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showDocs=_useState6[0],setshowdocs=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),allHtmls=_useState8[0],setAllHtmls=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),currShowing=_useState10[0],setCurrShowing=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showtextinput=_useState12[0],setshowtextinput=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),showinitbox=_useState14[0],setshowinitbox=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),enablestartRanking=_useState16[0],setenablestartRanking=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showfileselector=_useState18[0],setshowfileselector=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),file=_useState20[0],setFile=_useState20[1];var handleChange=function handleChange(event){setFile(event.target.files[0]);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var reader;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();reader=new FileReader();reader.onload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var fileData,fileDataString,path;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:fileData=event.target.result;fileDataString=fileData.toString();console.log(fileDataString);path=\"./public/dataaaaaaaaaaaaaaaaaa.txt\";try{localStorage.setItem(path,fileDataString);console.log(\"Data written to localStorage!\");}catch(e){console.error(\"Error writing data to localStorage:\",e);}case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}();reader.readAsText(file);setFile(null);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var closetextinput=function closetextinput(){setshowtextinput(false);};var closefileinput=function closefileinput(){setshowfileselector(false);};var generateUniqueHighlightColors=function generateUniqueHighlightColors(){var result=[];var hues=[0,45,90,135,180,225,270,315];// More diverse hues\nvar saturation=70;// Fixed saturation for better consistency\nfor(var _i=0,_hues=hues;_i<_hues.length;_i++){var hue=_hues[_i];for(var lightness=60;lightness<=90;lightness+=10){var color=\"hsl(\".concat(hue,\", \").concat(saturation,\"%, \").concat(lightness,\"%)\");// Use HSL color model for bright and light colors\nresult.push(color);}}return result;};// const generateUniqueHighlightColors = () => {\n//   const result = [];\n//   const hues = [0, 60, 120, 180, 240, 300]; // More diverse hues\n//   const saturations = [50, 70, 90]; // Different saturation levels for variation\n//   for (let hue of hues) {\n//     for (let saturation of saturations) {\n//       const lightness = Math.floor(Math.random() * 30) + 60; // Random lightness between 60 and 90\n//       const color = `hsl(${hue}, ${saturation}%, ${lightness}%)`; // Use HSL color model for bright and light colors\n//       result.push(color);\n//     }\n//   }\n//   return result;\n// };\n// const brightColors = generateUniqueHighlightColors();\nvar _useState21=useState(generateUniqueHighlightColors()),_useState22=_slicedToArray(_useState21,2),brightColors=_useState22[0],setbrightColors=_useState22[1];var colorObject={};brightColors.forEach(function(color){colorObject[color]=false;});var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),documents=_useState24[0],setDocuments=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),param1=_useState26[0],setParam1=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),param2=_useState28[0],setParam2=_useState28[1];useEffect(function(){var queryParams=new URLSearchParams(window.location.search);var param1Value=queryParams.get('param1');var param2Value=queryParams.get('param2');console.log(\"---------onsole.log(param1Value)\");console.log(param1Value);console.log(\"---------onsole.log(param1Value)\");console.log(param2Value);setParam1(param1Value);setParam2(param2Value);},[]);var openReactAppInNewWindow=function openReactAppInNewWindow(){var url='http://sysrev2.cs.binghamton.edu:3001/openapp';var jsonString=JSON.stringify([{\"resultId\":1971,\"document\":{\"title\":\"Distributional Reinforcement Learning in the Brain.\",\"articleDate\":\"2020 Dec\",\"authorNames\":[\"Lowet AS\",\"Zheng Q\",\"Matias S\",\"Drugowitsch J\",\"Uchida N\"],\"affiliationCountry\":null,\"publicationName\":\"distributional reinforcement learning in the brain\",\"issn\":\"0166-2236\",\"affiliationNames\":null,\"url\":\"https://pubmed.ncbi.nlm.nih.gov/33092893\"},\"priority\":0,\"datasource\":\"PUBMED\"},{\"resultId\":1972,\"document\":{\"title\":\"Reinforcement Distributional Learning in the Brain.\",\"articleDate\":\"2020 Dec\",\"authorNames\":[\"Lowet AS\",\"Zheng Q\",\"Matias S\",\"Drugowitsch J\",\"Uchida N\"],\"affiliationCountry\":null,\"publicationName\":\"distributional reinforcement learning in the brain\",\"issn\":\"0166-2236\",\"affiliationNames\":null,\"url\":\"https://pubmed.ncbi.nlm.nih.gov/33092893\"},\"priority\":0,\"datasource\":\"PUBMED\"},{\"resultId\":1973,\"document\":{\"title\":\"Learning Distributional Reinforcement in the Brain.\",\"articleDate\":\"2020 Dec\",\"authorNames\":[\"Lowet AS\",\"Zheng Q\",\"Matias S\",\"Drugowitsch J\",\"Uchida N\"],\"affiliationCountry\":null,\"publicationName\":\"distributional reinforcement learning in the brain\",\"issn\":\"0166-2236\",\"affiliationNames\":null,\"url\":\"https://pubmed.ncbi.nlm.nih.gov/33092893\"},\"priority\":0,\"datasource\":\"PUBMED\"},{\"resultId\":1974,\"document\":{\"title\":\"Brain Distributional Reinforcement Learning in the.\",\"articleDate\":\"2020 Dec\",\"authorNames\":[\"Lowet AS\",\"Zheng Q\",\"Matias S\",\"Drugowitsch J\",\"Uchida N\"],\"affiliationCountry\":null,\"publicationName\":\"distributional reinforcement learning in the brain\",\"issn\":\"0166-2236\",\"affiliationNames\":null,\"url\":\"https://pubmed.ncbi.nlm.nih.gov/33092893\"},\"priority\":0,\"datasource\":\"PUBMED\"}]);var queryParams=\"json=\".concat(encodeURIComponent(jsonString));var finalUrl=\"\".concat(url,\"?\").concat(queryParams);var newWindow=window.open(finalUrl,'_blank','width=800,height=600');if(newWindow){// Optional: Add any additional logic if needed, such as handling popup blockers\n}else{// Handle case where the new window could not be opened, e.g., due to popup blockers\nconsole.error('Failed to open new window');}};var _React$useState41=React.useState(\"\"),_React$useState42=_slicedToArray(_React$useState41,2),htmls=_React$useState42[0],setHtmls=_React$useState42[1];var _useState29=useState({}),_useState30=_slicedToArray(_useState29,2),checkedTerms=_useState30[0],setCheckedTerms=_useState30[1];var onMount=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var queryParams,pdfUrlParam,jsonDataParam,jsonData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:queryParams=new URLSearchParams(window.location.search);pdfUrlParam=queryParams.get(\"pdf_urls\");jsonDataParam=queryParams.get(\"json\");if(jsonDataParam){try{jsonData=JSON.parse(decodeURIComponent(jsonDataParam));setDocuments(jsonData);console.log('Received JSON data:',jsonData);// Continue with your logic to process the received JSON data\n}catch(error){console.error('Error parsing JSON data:',error);}}console.log(\"data in api\",jsonDataParam);case 5:case\"end\":return _context3.stop();}},_callee3);}));return function onMount(){return _ref3.apply(this,arguments);};}();var downloadPdfFromUrl=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(pdfUrl){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;console.log(\"downloading\"+pdfUrl);// const response = await axios.get(pdfUrl, { responseType: \"arraybuffer\" });\n// const pdfData = response.data;\n// // Here, you can save the PDF data or perform any necessary processing.\nreturn _context4.abrupt(\"return\",pdfUrl);case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);console.error(\"Error downloading PDF from URL:\",pdfUrl,_context4.t0);return _context4.abrupt(\"return\",null);case 9:case\"end\":return _context4.stop();}},_callee4,null,[[0,5]]);}));return function downloadPdfFromUrl(_x3){return _ref4.apply(this,arguments);};}();useEffect(function(){onMount();},[]);// Call onMount when the component mounts\nvar handleCheckedTerms=function handleCheckedTerms(checkedTerms){console.log(\"Checked terms:\",checkedTerms);var trueTerms=Object.keys(checkedTerms).filter(function(term){return checkedTerms[term];});var falseTerms=Object.keys(checkedTerms).filter(function(term){return!checkedTerms[term];});// const colorMap = colormap;\n// let htmltemp = htmls;\nvar htmltemp=allHtmls[currShowing];// for (let i = 0; i < falseTerms.length; i++) {\n//   const backgroundStyle = `background-color: white;`;\n//   htmltemp = htmltemp.replace(\n//     new RegExp(falseTerms[i], \"gi\"),\n//     `<span style=\"${backgroundStyle}\">${falseTerms[i]}</span>`\n//   );\n// }\nvar _loop=function _loop(i){var backgroundColor=colorMap[trueTerms[i]];var backgroundStyle=checkedTerms[trueTerms[i]]?\"\\n          background-color: \".concat(backgroundColor,\";\\n          border-radius: 3px; /* Rounded corners */\\n          box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3); /* Drop shadow */\\n          padding: 2px 4px; /* Padding for better spacing */\\n          color: white; /* Text color on highlighted background */\\n          pointer-events: none;\\n        \"):\"background-color: white;\";var re=new RegExp(\">\".concat(trueTerms[i],\"<\"),\"gi\");htmltemp=htmltemp.replace(re,function(match){return match.replace(/<span name = \"highlightedtextdebug\" style=\"[^\"]*\">(.*?)<\\/span>/gi,\"$1\");});// htmltemp = htmltemp.replace(\n//   new RegExp(`>[^<]*(${trueTerms[i]})[^<]*<`, \"gi\"),\n//   (match) => {\n//     return match.replace(\n//       new RegExp(`(${trueTerms[i]})`, \"gi\"),\n//       `<span style=\"${backgroundStyle}\">$1</span>`\n//     );\n//   }\n// );\nvar iframe=document.getElementById('viewer-iframe');iframe.contentWindow.handleClick=function(event,term){event.preventDefault();// Prevent default behavior of clicking on the span tag\nvar targetId=term;var targetElement=document.getElementById(targetId);if(targetElement){// Scroll to the target element within the iframe\ntargetElement.scrollIntoView();}};// const stylePattern = /<style[^>]*>.*?<\\/style>/gs;\n// // Match and replace the style attribute\n// htmltemp = htmltemp.replace(stylePattern, (match) => {\n//     // Remove or modify the style for #page-container here\n//     return match.replace(/#page-container/g, '#mo-page-container');\n// });\n// const originalSubstring = \"#page-container{bottom:0;right:0;overflow:auto}\";\n// const replacementSubstring = \"#page-container{bottom:0;overflow:auto}\";\n// htmltemp = htmltemp.replace(originalSubstring, replacementSubstring);\nhtmltemp=htmltemp.replace(new RegExp(\"(?<![\\\\w</])(\".concat(trueTerms[i],\")(?![\\\\w/>:=])\"),\"gi\"),// new RegExp(`(?<=^|>)[^<]*(?<![:=])(${trueTerms[i]})(?![^<]*<|[:=])`, \"gi\"),\nfunction(match,word,index){var sentence=htmltemp.substring(index-15,index+20);console.log(\"Sentence:\",sentence);console.log(\"printing index\",index);var bodyStartIndex=htmltemp.indexOf('<body');var bodyEndIndex=htmltemp.indexOf('</body>');if(bodyStartIndex>index||bodyEndIndex<index){return match;}var lastopen=htmltemp.substring(bodyStartIndex,index).lastIndexOf(\"<\");var lastclosed=htmltemp.substring(bodyStartIndex,index).lastIndexOf(\">\");var firstopen=htmltemp.substring(index,bodyEndIndex).indexOf(\"<\");var firstclose=htmltemp.substring(index,bodyEndIndex).indexOf(\">\");console.log(\"lastopen words----\",lastopen);console.log(\"lastclosed words----\",lastclosed);console.log(\"firstopen words----\",firstopen);console.log(\"firstclose words----\",firstclose);if(lastopen>lastclosed||firstopen>firstclose){return match;}console.log(\"matched words----\",match);return match.replace(new RegExp(\"(?<![\\\\w</])(\".concat(trueTerms[i],\")(?![\\\\w/>:=])\"),\"gi\"),// new RegExp(`(?<=[>])(\\\\b${trueTerms[i]}\\\\b)(?![^<]*<)`, \"gi\"),\n// new RegExp(`(?<=^|>)[^<]*(?<![:=])(${trueTerms[i]})(?![^<]*<|[:=])`, \"gi\"),\n\"<span style=\\\"\".concat(backgroundStyle,\"\\\" >$1</span>\")// `<span style=\"${backgroundStyle}\" >$1</span>`\n// `<span style=\"${backgroundStyle}\" pointer-events: none;>$1</span>`\n// <span style=\"${backgroundStyle}; pointer-events: auto;\" onclick=\"window.location.href = 'http://sysrev2.cs.binghamton.edu:3001/#pf1'\">$1</span>\n);});// htmltemp = htmltemp.replace(\n//   new RegExp(`([^<>]*>)?([^<]*(${trueTerms[i]})([^<]*<)?[^<>]*)`, \"gi\"),\n//   (match, before, term, after) => {\n//     return `${before}<span style=\"${backgroundStyle}\">${term}</span>${after}`;\n//   }\n// );\n};for(var i=0;i<trueTerms.length;i++){_loop(i);}setHtmls(htmltemp);};function updateTermObject(){setquerymap(function(prevQueryMap){var updatedQueryMap=_objectSpread({},prevQueryMap);// Add new terms to the querymap with default value false\nqueryterms.forEach(function(term){if(!updatedQueryMap[term]){updatedQueryMap[term]=false;}});// Remove terms from the querymap that are missing from queryterms\nObject.keys(updatedQueryMap).forEach(function(term){if(!queryterms.includes(term)){delete updatedQueryMap[term];}});return updatedQueryMap;});}useEffect(function(){updateTermObject();},[queryterms]);function showPdf(_x4){return _showPdf.apply(this,arguments);}// const convertPDFToHTML = async () => {\n//   console.log(\"name of all files--=-=-=-=-\",fileNames);\n//   let pdfFilePath = \"./sample.pdf\";\n//   try {\n//     const response = await fetch(\n//       `${apiUrl}/api/convert-pdf-to-html?_=${new Date().getTime()}`,\n//       { timeout: 10000 }\n//     );\n//     return await response.text();\n//   } catch (error) {\n//     console.error(error);\n//     throw new Error(\"Failed to convert PDF to HTML\");\n//   }\n// };\nfunction _showPdf(){_showPdf=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(fnamme){var path;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:try{fnamme=fnamme.replace(\"pdf\",\"html\");path=fnamme;fetch(path).then(function(response){return response.text();}).then(function(html){html=html.replace(/<span class=\"_ _\\d+\"><\\/span>/g,\"\");setHtmls(html);});}catch(error){console.log(\"file not found\");}case 1:case\"end\":return _context9.stop();}},_callee9);}));return _showPdf.apply(this,arguments);}var convertPDFToHTML=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var pdfFilePath,response;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:console.log(\"name of all files--=-=-=-=-\",fileNames);pdfFilePath=\"./sample.pdf\";_context5.prev=2;_context5.next=5;return fetch(\"\".concat(apiUrl,\"/api/convert-pdf-to-html\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({fileNames:fileNames})});case 5:response=_context5.sent;_context5.next=8;return response.text();case 8:return _context5.abrupt(\"return\",_context5.sent);case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](2);console.error(_context5.t0);throw new Error(\"Failed to convert PDF to HTML\");case 15:case\"end\":return _context5.stop();}},_callee5,null,[[2,11]]);}));return function convertPDFToHTML(){return _ref5.apply(this,arguments);};}();var startconversion=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:setIsLoading(true);_context6.next=3;return convertPDFToHTML().then(function(html){// alert(\"yes\");\nsetFileText(cleanTexts(fileText));var resultsdemo=rankTextscos(queryterms,fileText);console.log(queryterms);// console.log(fileText);\nconsole.log(\"xxxxxx the results doc\"+JSON.stringify(resultsdemo));setAllDocsReady(true);setDocRanks(resultsdemo);console.log(resultsdemo);// getAllHTML();\nhandleFetchFile();setIsLoading(false);}).catch(function(error){setIsLoading(false);});case 3:case\"end\":return _context6.stop();}},_callee6);}));return function startconversion(){return _ref6.apply(this,arguments);};}();function rerankjacc(){setIsLoading(true);var resultsdemo=rankTextsjacc(queryterms,fileText);// openReactAppInNewWindow()\nconsole.log(queryterms);console.log(fileText);console.log(\"xxxxxx the results doc\"+JSON.stringify(resultsdemo));setAllDocsReady(true);setDocRanks(resultsdemo);setIsLoading(false);}function setshowingdocs(){setshowdocs(!showDocs);}function rerankbm25(){setIsLoading(true);var resultsdemo=rankTextsbm25(queryterms,fileText);console.log(queryterms);console.log(fileText);console.log(\"xxxxxx the results doc\"+JSON.stringify(resultsdemo));setAllDocsReady(true);setDocRanks(resultsdemo);setIsLoading(false);}function rerankcoss(){setIsLoading(true);var resultsdemo=rankTextscos(queryterms,fileText);console.log(queryterms);console.log(fileText);console.log(\"xxxxxx the results doc\"+JSON.stringify(resultsdemo));setAllDocsReady(true);setDocRanks(resultsdemo);setIsLoading(false);}function cleanTexts(obj){var cleanObj={};var regex=/[^a-zA-Z0-9 ]/g;// Regex to match non-alphanumeric characters\nfor(var _i2=0,_Object$entries=Object.entries(obj);_i2<_Object$entries.length;_i2++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i2],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];var cleanText=value.replace(regex,\" \");// Replace non-alphanumeric characters with spaces\ncleanObj[key]=cleanText.trim();// Trim leading and trailing spaces and add to new object\n}return cleanObj;}function renderPage(){return _renderPage.apply(this,arguments);}function _renderPage(){_renderPage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(){var imagesList,canvas,canv,i,page,viewport,render_context,img;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:setPageRendering(true);imagesList=[];canvas=document.createElement(\"canvas\");canvas.setAttribute(\"className\",\"canv\");canv=document.querySelector(\".canv\");i=1;case 6:if(!(i<=pdf.numPages)){_context10.next=24;break;}_context10.next=9;return pdf.getPage(i);case 9:page=_context10.sent;viewport=page.getViewport({scale:1});canvas.height=viewport.height;canvas.width=viewport.width;render_context={canvasContext:canvas.getContext(\"2d\"),viewport:viewport};console.log(\"page lenght\",pdf.numPages);setWidth(viewport.width);setHeight(viewport.height);_context10.next=19;return page.render(render_context).promise;case 19:img=canvas.toDataURL(\"image/png\");imagesList.push(img);case 21:i++;_context10.next=6;break;case 24:setImages(imagesList);setPageRendering(false);case 26:case\"end\":return _context10.stop();}},_callee10);}));return _renderPage.apply(this,arguments);}useEffect(function(){pdf&&renderPage();},[pdf,currentPage]);function rankTextsbm25(terms,texts){var docVectors={};// stores the term frequency vectors for each document\nvar docs=Object.keys(texts);// get an array of the document names\nvar wordSet=new Set(terms);// create a set of the terms to use for matching\n// calculate the inverse document frequency for each term\nvar idf={};docs.forEach(function(doc){var words=new Set(texts[doc].toLowerCase().match(/\\b\\w+\\b/g));// split the text into words and convert to a set\nwords.forEach(function(word){if(idf[word]){idf[word]++;}else{idf[word]=1;}});});Object.keys(idf).forEach(function(term){idf[term]=Math.log(docs.length/idf[term]);});// iterate over each document to calculate the term frequency vector\ndocs.forEach(function(doc){var words=texts[doc].toLowerCase().match(/\\b\\w+\\b/g);// split the text into words\nvar tf={};// stores the term frequency for each word\nwords.forEach(function(word){if(tf[word]){tf[word]++;}else{tf[word]=1;}});// store the vector and the word count for the document\ndocVectors[doc]={vector:tf,wordCount:words.length};});// calculate the Okapi BM25 score for each document\nvar results=docs.map(function(doc){var _docVectors$doc=docVectors[doc],docVector=_docVectors$doc.vector,wordCount=_docVectors$doc.wordCount;var score=0;var matchedWords=[];terms.forEach(function(term){if(docVector[term]){var tf=docVector[term];var k1=1.2;var b=0.75;var avgDocLength=docs.reduce(function(sum,doc){return sum+docVectors[doc].wordCount;},0)/docs.length;var idfScore=idf[term];var docLengthNorm=1-b+b*(wordCount/avgDocLength);var tfScore=(k1+1)*tf/(k1*docLengthNorm+tf);score+=idfScore*tfScore;matchedWords.push({word:term,count:docVector[term]});}});return{name:doc,score:score,matchedWords:matchedWords};});results.sort(function(a,b){return b.score-a.score;});return results;}function rankTextsjacc(terms,texts){var docVectors={};// stores the term frequency vectors for each document\nvar docs=Object.keys(texts);// get an array of the document names\nvar wordSet=new Set(terms);// create a set of the terms to use for matching\n// iterate over each document to calculate the term frequency vector\ndocs.forEach(function(doc){var words=texts[doc].toLowerCase().match(/\\b\\w+\\b/g);// split the text into words\nvar tf={};// stores the term frequency for each word\nwords.forEach(function(word){if(tf[word]){tf[word]++;}else{tf[word]=1;}});// store the vector and the word count for the document\ndocVectors[doc]={vector:tf,wordCount:words.length};});// calculate the Jaccard similarity between the term frequency vectors and the query vector\nvar queryVector={};terms.forEach(function(term){queryVector[term]=1;});var results=docs.map(function(doc){var _docVectors$doc2=docVectors[doc],docVector=_docVectors$doc2.vector,wordCount=_docVectors$doc2.wordCount;var intersection={};var intersectionSize=0;var unionSize=wordCount;Object.keys(queryVector).forEach(function(term){if(docVector[term]){intersection[term]=docVector[term];intersectionSize+=docVector[term];}else{unionSize+=1;}});var jaccardSimilarity=intersectionSize/unionSize;var matchedWords=Object.keys(intersection).map(function(word){return{word:word,count:intersection[word]};});return{name:doc,score:jaccardSimilarity,matchedWords:matchedWords};});results.sort(function(a,b){return b.score-a.score;});return results;}function rankTextscos(terms,texts){var docVectors={};// stores the term frequency vectors for each document\nvar docs=Object.keys(texts);// get an array of the document names\nvar wordSet=new Set(terms);// create a set of the terms to use for matching\nconsole.log(\"----docs in ranking\");console.log(texts);// iterate over each document to calculate the term frequency vector\ndocs.forEach(function(doc){var words=texts[doc].toLowerCase().match(/\\b\\w+\\b/g);// split the text into words\nconsole.log(\"--------\");console.log(words);console.log(\"--------\");var tf={};// stores the term frequency for each word\nvar maxFreq=0;// stores the highest frequency of any word in the document\nwords.forEach(function(word){if(tf[word]){tf[word]++;}else{tf[word]=1;}maxFreq=Math.max(maxFreq,tf[word]);});// normalize the term frequency vector by dividing each frequency by the max frequency\nvar docVector={};Object.keys(tf).forEach(function(word){docVector[word]=tf[word];});docVectors[doc]={vector:docVector,wordCount:words.length};// store the vector and the word count for the document\n});// calculate the cosine similarity between the term frequency vectors and the query vector\nvar queryVector={};terms.forEach(function(term){queryVector[term]=1;});var results=docs.map(function(doc){var _docVectors$doc3=docVectors[doc],docVector=_docVectors$doc3.vector,wordCount=_docVectors$doc3.wordCount;var dotProduct=Object.keys(queryVector).reduce(function(sum,term){if(docVector[term]){return sum+queryVector[term]*docVector[term];}else{return sum;}},0);var queryMagnitude=Math.sqrt(Object.keys(queryVector).reduce(function(sum,term){return sum+queryVector[term]*queryVector[term];},0));var docMagnitude=Math.sqrt(Object.keys(docVector).reduce(function(sum,term){return sum+docVector[term]*docVector[term];},0));var cosineSimilarity=dotProduct/(queryMagnitude*docMagnitude);// find the words in the text that match the query terms and calculate their frequency in the document\n// find the words in the text that match the query terms and calculate their frequency in the document\nvar matchedWords=Object.keys(docVector).filter(function(word){return wordSet.has(word);}).map(function(word){return{word:word,count:docVector[word]};// use the frequency directly\n});return{name:doc,score:cosineSimilarity,matchedWords:matchedWords};});results.sort(function(a,b){return b.score-a.score;});setAllDocsReady(true);return results;}// const handleFetchFile = async (fileName) => {\n//   try {\n//     const response = await axios.get(\n//       `${apiUrl}/api/getFile/${fileName}`\n//     );\n//     console.group(\"found html file \" + response.data);\n//     setHtmls(response.data);\n//   } catch (error) {\n//     console.error(`Error fetching file ${fileName}: ${error.message}`);\n//   }\n// };\nvar handleFetchFile=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){var fileName,promises,filesData,filesObject,_args8=arguments;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:fileName=_args8.length>0&&_args8[0]!==undefined?_args8[0]:\"\";console.log(\"handleFetchFile called\");if(!(fileName!=\"\"&&allHtmls.hasOwnProperty(fileName))){_context8.next=5;break;}setHtmls(allHtmls[fileName]);return _context8.abrupt(\"return\");case 5:_context8.prev=5;promises=fileNames.map(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(fn){var response,hml,originalSubstring,replacementSubstring;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:fn=fn.replace(\"pdf\",\"html\");_context7.next=3;return axios.get(\"\".concat(apiUrl,\"/api/getFile/\").concat(fn));case 3:response=_context7.sent;hml=response.data;originalSubstring=\"#page-container{bottom:0;right:0;overflow:auto}\";replacementSubstring=\"#page-container{bottom:0;overflow:auto}\";hml=hml.replace(originalSubstring,replacementSubstring);return _context7.abrupt(\"return\",_defineProperty({},fn,hml));case 9:case\"end\":return _context7.stop();}},_callee7);}));return function(_x5){return _ref8.apply(this,arguments);};}());_context8.next=9;return Promise.all(promises);case 9:filesData=_context8.sent;// Combine file data into a single object\nfilesObject=filesData.reduce(function(acc,cur){return _objectSpread(_objectSpread({},acc),cur);},{});setAllHtmls(filesObject);if(fileName!=\"\"){setHtmls(filesObject[fileName]);}_context8.next=18;break;case 15:_context8.prev=15;_context8.t0=_context8[\"catch\"](5);console.error(\"Error fetching files: \".concat(_context8.t0.message));case 18:case\"end\":return _context8.stop();}},_callee8,null,[[5,15]]);}));return function handleFetchFile(){return _ref7.apply(this,arguments);};}();function showranks(){setshowpage(false);}function showthispdf(fnamme){setshowpage(true);fnamme=fnamme.replace(\"pdf\",\"html\");setCurrShowing(fnamme);handleFetchFile(fnamme);}return/*#__PURE__*/_jsx(Provider,{store:store,children:/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mac-book-pro141-mac-book-pro141\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mac-book-pro141-frame1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mac-book-pro141-text\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Research Analyst\"})}),/*#__PURE__*/_jsx(\"img\",{src:\"/external/ictwotonereadmore2380-sg1m.svg\",alt:\"ictwotonereadmore2380\",className:\"mac-book-pro141-ictwotonereadmore\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-iconparkoutlinemoreapp\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mac-book-pro141-group\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/external/vector2392-vwv.svg\",alt:\"Vector2392\",className:\"mac-book-pro141-vector\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/external/vector2393-328f.svg\",alt:\"Vector2393\",className:\"mac-book-pro141-vector1\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/external/rectangle22i663-ebg4.svg\",alt:\"Rectangle22I663\",className:\"mac-book-pro141-rectangle22\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{}),showinitbox&&!showtextinput&&!showfileselector?/*#__PURE__*/_jsx(\"div\",{className:\"positioningrelative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mac-book-pro141-initcomp\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-searchboxmain\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setshowfileselector(true);},className:\"mac-book-pro141-rectangle22\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-materialsymbolsupload\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-text02\",children:/*#__PURE__*/_jsx(\"span\",{children:\"UPLOAD PAPERS\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-searchboxmain2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setshowtextinput(true);},className:\"mac-book-pro141-rectangle22\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-materialsymbolsupload\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-text02\",children:/*#__PURE__*/_jsx(\"span\",{children:\"ADD SEARCH TERMS\"})})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"mac-book-pro141-startbutton\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mac-book-pro141-text16\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Start Ranking\"})})})]})}):'',showfileselector?/*#__PURE__*/_jsx(FileInput,{setIsLoading:setIsLoading,setFileText:setFileText,setFileNames:setFileNames,closefileinput:closefileinput}):'',showtextinput?/*#__PURE__*/_jsx(TextInput,{queryterms:queryterms,brightColors:brightColors,setbrightColors:setbrightColors,setcolorMap:setcolorMap,setqueryterms:setqueryterms,closetextinput:closetextinput}):'']})})})});}","map":{"version":3,"names":["React","useState","useEffect","HtmlViewer","CheckboxList","FileUpload","Provider","store","SearchResults","Box","pdfjsLib","axios","Loader","styles","useLocation","DocumentList","AddTerm","TextInput","jsx","_jsx","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","App","_React$useState","_React$useState2","_slicedToArray","pdf","setPdf","_React$useState3","_React$useState4","width","setWidth","_React$useState5","_React$useState6","images","setImages","_React$useState7","_React$useState8","height","setHeight","_React$useState9","_React$useState10","totalPages","setTotalPages","_React$useState11","_React$useState12","currentPage","setCurrentPage","_React$useState13","_React$useState14","pdfRendering","setPdfRendering","_React$useState15","_React$useState16","pageRendering","setPageRendering","_React$useState17","_React$useState18","searchQuery","setSearchQuery","_React$useState19","_React$useState20","searchResults","setSearchResults","_React$useState21","_React$useState22","fileText","setFileText","_React$useState23","_React$useState24","docranks","setDocRanks","_React$useState25","_React$useState26","alldocsready","setAllDocsReady","_React$useState27","_React$useState28","isLoading","setIsLoading","_React$useState29","_React$useState30","currhtml","setcurrhtml","_React$useState31","_React$useState32","queryterms","setqueryterms","_useState","_useState2","fileData","setFileData","_React$useState33","_React$useState34","querymap","setquerymap","_React$useState35","_React$useState36","fileNames","setFileNames","_React$useState37","_React$useState38","colorMap","setcolorMap","_React$useState39","_React$useState40","showpage","setshowpage","_useState3","_useState4","pdfUrls","setPdfUrls","_useState5","_useState6","showDocs","setshowdocs","_useState7","_useState8","allHtmls","setAllHtmls","_useState9","_useState10","currShowing","setCurrShowing","_useState11","_useState12","showtextinput","setshowtextinput","_useState13","_useState14","showinitbox","setshowinitbox","_useState15","_useState16","enablestartRanking","setenablestartRanking","_useState17","_useState18","showfileselector","setshowfileselector","_useState19","_useState20","file","setFile","handleChange","event","target","files","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","reader","wrap","_callee2$","_context2","prev","next","preventDefault","FileReader","onload","_ref2","_callee","fileDataString","path","_callee$","_context","result","toString","console","log","localStorage","setItem","e","error","stop","_x2","apply","arguments","readAsText","_x","closetextinput","closefileinput","generateUniqueHighlightColors","hues","saturation","_i","_hues","length","hue","lightness","color","concat","push","_useState21","_useState22","brightColors","setbrightColors","colorObject","forEach","_useState23","_useState24","documents","setDocuments","_useState25","_useState26","param1","setParam1","_useState27","_useState28","param2","setParam2","queryParams","URLSearchParams","window","location","search","param1Value","get","param2Value","openReactAppInNewWindow","url","jsonString","JSON","stringify","encodeURIComponent","finalUrl","newWindow","open","_React$useState41","_React$useState42","htmls","setHtmls","_useState29","_useState30","checkedTerms","setCheckedTerms","onMount","_ref3","_callee3","pdfUrlParam","jsonDataParam","jsonData","_callee3$","_context3","parse","decodeURIComponent","downloadPdfFromUrl","_ref4","_callee4","pdfUrl","_callee4$","_context4","abrupt","t0","_x3","handleCheckedTerms","trueTerms","Object","keys","filter","term","falseTerms","htmltemp","_loop","i","backgroundColor","backgroundStyle","re","RegExp","replace","match","iframe","document","getElementById","contentWindow","handleClick","targetId","targetElement","scrollIntoView","word","index","sentence","substring","bodyStartIndex","indexOf","bodyEndIndex","lastopen","lastIndexOf","lastclosed","firstopen","firstclose","updateTermObject","prevQueryMap","updatedQueryMap","_objectSpread","includes","showPdf","_x4","_showPdf","_callee9","fnamme","_callee9$","_context9","fetch","then","response","text","html","convertPDFToHTML","_ref5","_callee5","pdfFilePath","_callee5$","_context5","method","headers","body","sent","Error","startconversion","_ref6","_callee6","_callee6$","_context6","cleanTexts","resultsdemo","rankTextscos","handleFetchFile","catch","rerankjacc","rankTextsjacc","setshowingdocs","rerankbm25","rankTextsbm25","rerankcoss","obj","cleanObj","regex","_i2","_Object$entries","entries","_Object$entries$_i","key","value","cleanText","trim","renderPage","_renderPage","_callee10","imagesList","canvas","canv","page","viewport","render_context","img","_callee10$","_context10","createElement","setAttribute","querySelector","numPages","getPage","getViewport","scale","canvasContext","getContext","render","promise","toDataURL","terms","texts","docVectors","docs","wordSet","Set","idf","doc","words","toLowerCase","Math","tf","vector","wordCount","results","map","_docVectors$doc","docVector","score","matchedWords","k1","b","avgDocLength","reduce","sum","idfScore","docLengthNorm","tfScore","count","name","sort","a","queryVector","_docVectors$doc2","intersection","intersectionSize","unionSize","jaccardSimilarity","maxFreq","max","_docVectors$doc3","dotProduct","queryMagnitude","sqrt","docMagnitude","cosineSimilarity","has","_ref7","_callee8","fileName","promises","filesData","filesObject","_args8","_callee8$","_context8","undefined","hasOwnProperty","_ref8","_callee7","fn","hml","originalSubstring","replacementSubstring","_callee7$","_context7","data","_defineProperty","_x5","Promise","all","acc","cur","message","showranks","showthispdf","children","className","src","alt","onClick","FileInput"],"sources":["/home/ashish/docpdf/pdfdoc/research-ranking-app/my-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n// import \"./App.css\";\nimport HtmlViewer from \"./HtmlViewer\";\nimport CheckboxList from \"./CheckboxList\";\nimport FileUpload from \"./FileUpload\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport SearchResults from \"./SearchResults\";\nimport Box from \"./Box\";\nimport pdfjsLib from \"pdfjs-dist\";\nimport axios from \"axios\";\nimport Loader from \"./Loader\";\nimport styles from './stylenew.css';\n\nimport { useLocation } from 'react-router-dom';\nimport DocumentList from \"./DocumentList\";\nimport AddTerm from \"./AddTerm\";\nimport TextInput from \"./textinput\";\n\nconst apiUrl = process.env.REACT_APP_API_URL;\n\nexport default function App() {\n\n  const [pdf, setPdf] = React.useState(\"\");\n  const [width, setWidth] = React.useState(0);\n  const [images, setImages] = React.useState([]);\n  const [height, setHeight] = React.useState(0);\n  const [totalPages, setTotalPages] = React.useState(1);\n  const [currentPage, setCurrentPage] = React.useState(1);\n  const [pdfRendering, setPdfRendering] = React.useState(\"\");\n  const [pageRendering, setPageRendering] = React.useState(\"\");\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\n  const [searchResults, setSearchResults] = React.useState([]);\n  const [fileText, setFileText] = React.useState({});\n  const [docranks, setDocRanks] = React.useState({});\n  const [alldocsready, setAllDocsReady] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [currhtml, setcurrhtml] = React.useState(\"\");\n  const [queryterms, setqueryterms] = React.useState([]);\n  const [fileData, setFileData] = useState(\"\");\n  const [querymap, setquerymap] = React.useState([]);\n  const [fileNames, setFileNames] = React.useState([]);\n  const [colorMap, setcolorMap] = React.useState([]);\n  const [showpage, setshowpage] = React.useState(false);\n  const [pdfUrls, setPdfUrls] = useState([]);\n  const [showDocs, setshowdocs] = useState(false);\n  const [allHtmls, setAllHtmls] = useState({});\n  const [currShowing, setCurrShowing] = useState(\"\");\n\n  const [showtextinput, setshowtextinput] = useState(false)\n  const [showinitbox, setshowinitbox] = useState(true);\n\n  const [enablestartRanking, setenablestartRanking] = useState(false);\n  const [showfileselector, setshowfileselector] = useState(false);\n  const [file, setFile] = useState(null);\n\n  const handleChange = (event) => {\n    setFile(event.target.files[0]);\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const reader = new FileReader();\n\n    reader.onload = async (event) => {\n      const fileData = event.target.result;\n      const fileDataString = fileData.toString();\n      console.log(fileDataString)\n\n      const path = \"./public/dataaaaaaaaaaaaaaaaaa.txt\";\n      try {\n        localStorage.setItem(path, fileDataString);\n        console.log(\"Data written to localStorage!\");\n      } catch (e) {\n        console.error(\"Error writing data to localStorage:\", e);\n      }\n    };\n\n    reader.readAsText(file);\n\n    setFile(null);\n  };\n\n\n\n  const closetextinput = () => {\n\n    setshowtextinput(false)\n\n  }\n  const closefileinput = () => {\n\n    setshowfileselector(false)\n\n  }\n  const generateUniqueHighlightColors = () => {\n    const result = [];\n    const hues = [0, 45, 90, 135, 180, 225, 270, 315]; // More diverse hues\n    const saturation = 70; // Fixed saturation for better consistency\n\n    for (let hue of hues) {\n      for (let lightness = 60; lightness <= 90; lightness += 10) {\n        const color = `hsl(${hue}, ${saturation}%, ${lightness}%)`; // Use HSL color model for bright and light colors\n        result.push(color);\n      }\n    }\n\n    return result;\n  };\n  // const generateUniqueHighlightColors = () => {\n  //   const result = [];\n  //   const hues = [0, 60, 120, 180, 240, 300]; // More diverse hues\n  //   const saturations = [50, 70, 90]; // Different saturation levels for variation\n\n  //   for (let hue of hues) {\n  //     for (let saturation of saturations) {\n  //       const lightness = Math.floor(Math.random() * 30) + 60; // Random lightness between 60 and 90\n  //       const color = `hsl(${hue}, ${saturation}%, ${lightness}%)`; // Use HSL color model for bright and light colors\n  //       result.push(color);\n  //     }\n  //   }\n\n  //   return result;\n  // };\n\n\n  // const brightColors = generateUniqueHighlightColors();\n\n  const [brightColors, setbrightColors] = useState(generateUniqueHighlightColors());\n\n  const colorObject = {};\n\n  brightColors.forEach(color => {\n    colorObject[color] = false;\n  });\n\n\n\n  const [documents, setDocuments] = useState(\n    []\n  );\n\n\n  const [param1, setParam1] = useState('');\n  const [param2, setParam2] = useState('');\n\n  useEffect(() => {\n    const queryParams = new URLSearchParams(window.location.search);\n    const param1Value = queryParams.get('param1');\n    const param2Value = queryParams.get('param2');\n\n    console.log(\"---------onsole.log(param1Value)\")\n    console.log(param1Value)\n    console.log(\"---------onsole.log(param1Value)\")\n    console.log(param2Value)\n    setParam1(param1Value);\n    setParam2(param2Value);\n\n\n  }, []);\n\n\n  const openReactAppInNewWindow = () => {\n    const url = 'http://sysrev2.cs.binghamton.edu:3001/openapp';\n    const jsonString = JSON.stringify([{\n      \"resultId\": 1971,\n      \"document\": {\n        \"title\": \"Distributional Reinforcement Learning in the Brain.\",\n        \"articleDate\": \"2020 Dec\",\n        \"authorNames\": [\n          \"Lowet AS\",\n          \"Zheng Q\",\n          \"Matias S\",\n          \"Drugowitsch J\",\n          \"Uchida N\"\n        ],\n        \"affiliationCountry\": null,\n        \"publicationName\": \"distributional reinforcement learning in the brain\",\n        \"issn\": \"0166-2236\",\n        \"affiliationNames\": null,\n        \"url\": \"https://pubmed.ncbi.nlm.nih.gov/33092893\"\n      },\n      \"priority\": 0,\n      \"datasource\": \"PUBMED\"\n    },\n    {\n      \"resultId\": 1972,\n      \"document\": {\n        \"title\": \"Reinforcement Distributional Learning in the Brain.\",\n        \"articleDate\": \"2020 Dec\",\n        \"authorNames\": [\n          \"Lowet AS\",\n          \"Zheng Q\",\n          \"Matias S\",\n          \"Drugowitsch J\",\n          \"Uchida N\"\n        ],\n        \"affiliationCountry\": null,\n        \"publicationName\": \"distributional reinforcement learning in the brain\",\n        \"issn\": \"0166-2236\",\n        \"affiliationNames\": null,\n        \"url\": \"https://pubmed.ncbi.nlm.nih.gov/33092893\"\n      },\n      \"priority\": 0,\n      \"datasource\": \"PUBMED\"\n    },\n    {\n      \"resultId\": 1973,\n      \"document\": {\n        \"title\": \"Learning Distributional Reinforcement in the Brain.\",\n        \"articleDate\": \"2020 Dec\",\n        \"authorNames\": [\n          \"Lowet AS\",\n          \"Zheng Q\",\n          \"Matias S\",\n          \"Drugowitsch J\",\n          \"Uchida N\"\n        ],\n        \"affiliationCountry\": null,\n        \"publicationName\": \"distributional reinforcement learning in the brain\",\n        \"issn\": \"0166-2236\",\n        \"affiliationNames\": null,\n        \"url\": \"https://pubmed.ncbi.nlm.nih.gov/33092893\"\n      },\n      \"priority\": 0,\n      \"datasource\": \"PUBMED\"\n    },\n    {\n      \"resultId\": 1974,\n      \"document\": {\n        \"title\": \"Brain Distributional Reinforcement Learning in the.\",\n        \"articleDate\": \"2020 Dec\",\n        \"authorNames\": [\n          \"Lowet AS\",\n          \"Zheng Q\",\n          \"Matias S\",\n          \"Drugowitsch J\",\n          \"Uchida N\"\n        ],\n        \"affiliationCountry\": null,\n        \"publicationName\": \"distributional reinforcement learning in the brain\",\n        \"issn\": \"0166-2236\",\n        \"affiliationNames\": null,\n        \"url\": \"https://pubmed.ncbi.nlm.nih.gov/33092893\"\n      },\n      \"priority\": 0,\n      \"datasource\": \"PUBMED\"\n    }]\n\n\n\n\n\n    );\n    const queryParams = `json=${encodeURIComponent(jsonString)}`;\n    const finalUrl = `${url}?${queryParams}`;\n    const newWindow = window.open(finalUrl, '_blank', 'width=800,height=600');\n\n    if (newWindow) {\n      // Optional: Add any additional logic if needed, such as handling popup blockers\n    } else {\n      // Handle case where the new window could not be opened, e.g., due to popup blockers\n      console.error('Failed to open new window');\n    }\n  };\n\n\n  const [htmls, setHtmls] = React.useState(\"\");\n\n  const [checkedTerms, setCheckedTerms] = useState({});\n\n\n  const onMount = async () => {\n    const queryParams = new URLSearchParams(window.location.search);\n    const pdfUrlParam = queryParams.get(\"pdf_urls\");\n\n    const jsonDataParam = queryParams.get(\"json\");\n\n    if (jsonDataParam) {\n      try {\n        const jsonData = JSON.parse(decodeURIComponent(jsonDataParam));\n\n        setDocuments(jsonData)\n        console.log('Received JSON data:', jsonData);\n        // Continue with your logic to process the received JSON data\n      } catch (error) {\n        console.error('Error parsing JSON data:', error);\n      }\n    }\n\n\n    console.log(\"data in api\", jsonDataParam);\n\n  };\n\n  const downloadPdfFromUrl = async (pdfUrl) => {\n    try {\n\n      console.log(\"downloading\" + pdfUrl)\n      // const response = await axios.get(pdfUrl, { responseType: \"arraybuffer\" });\n      // const pdfData = response.data;\n      // // Here, you can save the PDF data or perform any necessary processing.\n      return pdfUrl;\n    } catch (error) {\n      console.error(\"Error downloading PDF from URL:\", pdfUrl, error);\n      return null;\n    }\n  };\n\n\n  useEffect(() => {\n    onMount();\n  }, []); // Call onMount when the component mounts\n\n\n  const handleCheckedTerms = (checkedTerms) => {\n    console.log(\"Checked terms:\", checkedTerms);\n    const trueTerms = Object.keys(checkedTerms).filter(\n      (term) => checkedTerms[term]\n    );\n\n    const falseTerms = Object.keys(checkedTerms).filter(\n      (term) => !checkedTerms[term]\n    );\n\n    // const colorMap = colormap;\n\n    // let htmltemp = htmls;\n    let htmltemp = allHtmls[currShowing];\n\n    // for (let i = 0; i < falseTerms.length; i++) {\n    //   const backgroundStyle = `background-color: white;`;\n\n\n\n\n    //   htmltemp = htmltemp.replace(\n    //     new RegExp(falseTerms[i], \"gi\"),\n    //     `<span style=\"${backgroundStyle}\">${falseTerms[i]}</span>`\n    //   );\n    // }\n\n    for (let i = 0; i < trueTerms.length; i++) {\n      const backgroundColor = colorMap[trueTerms[i]];\n      const backgroundStyle = checkedTerms[trueTerms[i]]\n        ? `\n          background-color: ${backgroundColor};\n          border-radius: 3px; /* Rounded corners */\n          box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3); /* Drop shadow */\n          padding: 2px 4px; /* Padding for better spacing */\n          color: white; /* Text color on highlighted background */\n          pointer-events: none;\n        `\n        : `background-color: white;`;\n\n      const re = new RegExp(`>${trueTerms[i]}<`, \"gi\");\n      htmltemp = htmltemp.replace(re, (match) => {\n        return match.replace(/<span name = \"highlightedtextdebug\" style=\"[^\"]*\">(.*?)<\\/span>/gi, \"$1\");\n      });\n\n      // htmltemp = htmltemp.replace(\n      //   new RegExp(`>[^<]*(${trueTerms[i]})[^<]*<`, \"gi\"),\n      //   (match) => {\n      //     return match.replace(\n      //       new RegExp(`(${trueTerms[i]})`, \"gi\"),\n      //       `<span style=\"${backgroundStyle}\">$1</span>`\n      //     );\n      //   }\n      // );\n\n      const iframe = document.getElementById('viewer-iframe');\n\n\n      iframe.contentWindow.handleClick = function (event, term) {\n        event.preventDefault(); // Prevent default behavior of clicking on the span tag\n        const targetId = term;\n        const targetElement = document.getElementById(targetId);\n        if (targetElement) {\n          // Scroll to the target element within the iframe\n          targetElement.scrollIntoView();\n        }\n      };\n\n      // const stylePattern = /<style[^>]*>.*?<\\/style>/gs;\n\n      // // Match and replace the style attribute\n      // htmltemp = htmltemp.replace(stylePattern, (match) => {\n\n      //     // Remove or modify the style for #page-container here\n      //     return match.replace(/#page-container/g, '#mo-page-container');\n      // });\n\n      // const originalSubstring = \"#page-container{bottom:0;right:0;overflow:auto}\";\n      // const replacementSubstring = \"#page-container{bottom:0;overflow:auto}\";\n\n      // htmltemp = htmltemp.replace(originalSubstring, replacementSubstring);\n\n\n\n      htmltemp = htmltemp.replace(\n        new RegExp(`(?<![\\\\w</])(${trueTerms[i]})(?![\\\\w/>:=])`, \"gi\"),\n\n\n        // new RegExp(`(?<=^|>)[^<]*(?<![:=])(${trueTerms[i]})(?![^<]*<|[:=])`, \"gi\"),\n\n\n\n        (match, word, index) => {\n\n          const sentence = htmltemp.substring(index - 15, index + 20);\n          console.log(\"Sentence:\", sentence);\n          console.log(\"printing index\", index);\n          const bodyStartIndex = htmltemp.indexOf('<body');\n          const bodyEndIndex = htmltemp.indexOf('</body>');\n\n          if (bodyStartIndex > index || bodyEndIndex < index) {\n            return match;\n          }\n\n\n          const lastopen = htmltemp.substring(bodyStartIndex, index).lastIndexOf(\"<\");\n          const lastclosed = htmltemp.substring(bodyStartIndex, index).lastIndexOf(\">\");\n          const firstopen = htmltemp.substring(index, bodyEndIndex).indexOf(\"<\");\n          const firstclose = htmltemp.substring(index, bodyEndIndex).indexOf(\">\");\n\n          console.log(\"lastopen words----\", lastopen);\n          console.log(\"lastclosed words----\", lastclosed);\n          console.log(\"firstopen words----\", firstopen);\n          console.log(\"firstclose words----\", firstclose);\n\n          if (lastopen > lastclosed || firstopen > firstclose) {\n            return match;\n          }\n\n          console.log(\"matched words----\", match)\n\n          return match.replace(\n            new RegExp(`(?<![\\\\w</])(${trueTerms[i]})(?![\\\\w/>:=])`, \"gi\"),\n            // new RegExp(`(?<=[>])(\\\\b${trueTerms[i]}\\\\b)(?![^<]*<)`, \"gi\"),\n            // new RegExp(`(?<=^|>)[^<]*(?<![:=])(${trueTerms[i]})(?![^<]*<|[:=])`, \"gi\"),\n\n            `<span style=\"${backgroundStyle}\" >$1</span>`\n            // `<span style=\"${backgroundStyle}\" >$1</span>`\n            // `<span style=\"${backgroundStyle}\" pointer-events: none;>$1</span>`\n            // <span style=\"${backgroundStyle}; pointer-events: auto;\" onclick=\"window.location.href = 'http://sysrev2.cs.binghamton.edu:3001/#pf1'\">$1</span>\n\n          );\n        }\n      );\n\n      // htmltemp = htmltemp.replace(\n      //   new RegExp(`([^<>]*>)?([^<]*(${trueTerms[i]})([^<]*<)?[^<>]*)`, \"gi\"),\n      //   (match, before, term, after) => {\n      //     return `${before}<span style=\"${backgroundStyle}\">${term}</span>${after}`;\n      //   }\n      // );\n\n\n    }\n\n    setHtmls(htmltemp);\n  };\n\n\n\n\n  function updateTermObject() {\n    setquerymap((prevQueryMap) => {\n      const updatedQueryMap = { ...prevQueryMap };\n      // Add new terms to the querymap with default value false\n      queryterms.forEach((term) => {\n        if (!updatedQueryMap[term]) {\n          updatedQueryMap[term] = false;\n        }\n      });\n      // Remove terms from the querymap that are missing from queryterms\n      Object.keys(updatedQueryMap).forEach((term) => {\n        if (!queryterms.includes(term)) {\n          delete updatedQueryMap[term];\n        }\n      });\n      return updatedQueryMap;\n    });\n  }\n\n  useEffect(() => {\n    updateTermObject();\n  }, [queryterms]);\n\n  async function showPdf(fnamme) {\n    try {\n      fnamme = fnamme.replace(\"pdf\", \"html\");\n      const path = fnamme;\n\n      fetch(path)\n        .then((response) => response.text())\n        .then((html) => {\n          html = html.replace(/<span class=\"_ _\\d+\"><\\/span>/g, \"\");\n\n          setHtmls(html);\n        });\n    } catch (error) {\n      console.log(\"file not found\");\n    }\n  }\n\n  // const convertPDFToHTML = async () => {\n  //   console.log(\"name of all files--=-=-=-=-\",fileNames);\n  //   let pdfFilePath = \"./sample.pdf\";\n  //   try {\n  //     const response = await fetch(\n  //       `${apiUrl}/api/convert-pdf-to-html?_=${new Date().getTime()}`,\n  //       { timeout: 10000 }\n  //     );\n  //     return await response.text();\n  //   } catch (error) {\n  //     console.error(error);\n  //     throw new Error(\"Failed to convert PDF to HTML\");\n  //   }\n  // };\n\n  const convertPDFToHTML = async () => {\n    console.log(\"name of all files--=-=-=-=-\", fileNames);\n    let pdfFilePath = \"./sample.pdf\";\n    try {\n      const response = await fetch(\n        `${apiUrl}/api/convert-pdf-to-html`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ fileNames })\n        }\n      );\n      return await response.text();\n    } catch (error) {\n      console.error(error);\n      throw new Error(\"Failed to convert PDF to HTML\");\n    }\n  };\n\n\n  const startconversion = async () => {\n    setIsLoading(true);\n    await convertPDFToHTML()\n      .then((html) => {\n        // alert(\"yes\");\n        setFileText(cleanTexts(fileText));\n        const resultsdemo = rankTextscos(queryterms, fileText);\n\n        console.log(queryterms);\n        // console.log(fileText);\n        console.log(\"xxxxxx the results doc\" + JSON.stringify(resultsdemo));\n        setAllDocsReady(true);\n        setDocRanks(resultsdemo);\n        console.log(resultsdemo);\n        // getAllHTML();\n        handleFetchFile();\n        setIsLoading(false);\n      })\n      .catch((error) => {\n        setIsLoading(false);\n      });\n  };\n\n  function rerankjacc() {\n    setIsLoading(true);\n    const resultsdemo = rankTextsjacc(queryterms, fileText);\n    // openReactAppInNewWindow()\n    console.log(queryterms);\n    console.log(fileText);\n    console.log(\"xxxxxx the results doc\" + JSON.stringify(resultsdemo));\n    setAllDocsReady(true);\n    setDocRanks(resultsdemo);\n    setIsLoading(false);\n  }\n\n\n  function setshowingdocs() {\n    setshowdocs(!showDocs)\n  }\n\n\n  function rerankbm25() {\n    setIsLoading(true);\n    const resultsdemo = rankTextsbm25(queryterms, fileText);\n\n    console.log(queryterms);\n    console.log(fileText);\n    console.log(\"xxxxxx the results doc\" + JSON.stringify(resultsdemo));\n    setAllDocsReady(true);\n    setDocRanks(resultsdemo);\n    setIsLoading(false);\n  }\n\n  function rerankcoss() {\n    setIsLoading(true);\n    const resultsdemo = rankTextscos(queryterms, fileText);\n\n    console.log(queryterms);\n    console.log(fileText);\n    console.log(\"xxxxxx the results doc\" + JSON.stringify(resultsdemo));\n    setAllDocsReady(true);\n    setDocRanks(resultsdemo);\n    setIsLoading(false);\n  }\n\n  function cleanTexts(obj) {\n    const cleanObj = {};\n    const regex = /[^a-zA-Z0-9 ]/g; // Regex to match non-alphanumeric characters\n    for (const [key, value] of Object.entries(obj)) {\n      const cleanText = value.replace(regex, \" \"); // Replace non-alphanumeric characters with spaces\n      cleanObj[key] = cleanText.trim(); // Trim leading and trailing spaces and add to new object\n    }\n    return cleanObj;\n  }\n\n\n\n\n  async function renderPage() {\n    setPageRendering(true);\n    const imagesList = [];\n    const canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"className\", \"canv\");\n    let canv = document.querySelector(\".canv\");\n\n    for (let i = 1; i <= pdf.numPages; i++) {\n      var page = await pdf.getPage(i);\n      var viewport = page.getViewport({ scale: 1 });\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n      var render_context = {\n        canvasContext: canvas.getContext(\"2d\"),\n        viewport: viewport,\n      };\n      console.log(\"page lenght\", pdf.numPages);\n      setWidth(viewport.width);\n      setHeight(viewport.height);\n      await page.render(render_context).promise;\n      let img = canvas.toDataURL(\"image/png\");\n      imagesList.push(img);\n    }\n    setImages(imagesList);\n    setPageRendering(false);\n  }\n\n  useEffect(() => {\n    pdf && renderPage();\n  }, [pdf, currentPage]);\n\n  function rankTextsbm25(terms, texts) {\n    const docVectors = {}; // stores the term frequency vectors for each document\n    const docs = Object.keys(texts); // get an array of the document names\n    const wordSet = new Set(terms); // create a set of the terms to use for matching\n\n    // calculate the inverse document frequency for each term\n    const idf = {};\n    docs.forEach((doc) => {\n      const words = new Set(texts[doc].toLowerCase().match(/\\b\\w+\\b/g)); // split the text into words and convert to a set\n      words.forEach((word) => {\n        if (idf[word]) {\n          idf[word]++;\n        } else {\n          idf[word] = 1;\n        }\n      });\n    });\n    Object.keys(idf).forEach((term) => {\n      idf[term] = Math.log(docs.length / idf[term]);\n    });\n\n    // iterate over each document to calculate the term frequency vector\n    docs.forEach((doc) => {\n      const words = texts[doc].toLowerCase().match(/\\b\\w+\\b/g); // split the text into words\n      const tf = {}; // stores the term frequency for each word\n      words.forEach((word) => {\n        if (tf[word]) {\n          tf[word]++;\n        } else {\n          tf[word] = 1;\n        }\n      });\n      // store the vector and the word count for the document\n      docVectors[doc] = { vector: tf, wordCount: words.length };\n    });\n\n    // calculate the Okapi BM25 score for each document\n    const results = docs.map((doc) => {\n      const { vector: docVector, wordCount } = docVectors[doc];\n      let score = 0;\n      const matchedWords = [];\n      terms.forEach((term) => {\n        if (docVector[term]) {\n          const tf = docVector[term];\n          const k1 = 1.2;\n          const b = 0.75;\n          const avgDocLength =\n            docs.reduce((sum, doc) => {\n              return sum + docVectors[doc].wordCount;\n            }, 0) / docs.length;\n          const idfScore = idf[term];\n          const docLengthNorm = 1 - b + b * (wordCount / avgDocLength);\n          const tfScore = ((k1 + 1) * tf) / (k1 * docLengthNorm + tf);\n          score += idfScore * tfScore;\n          matchedWords.push({ word: term, count: docVector[term] });\n        }\n      });\n      return {\n        name: doc,\n        score: score,\n        matchedWords: matchedWords,\n      };\n    });\n\n    results.sort((a, b) => {\n      return b.score - a.score;\n    });\n\n    return results;\n  }\n\n  function rankTextsjacc(terms, texts) {\n    const docVectors = {}; // stores the term frequency vectors for each document\n    const docs = Object.keys(texts); // get an array of the document names\n    const wordSet = new Set(terms); // create a set of the terms to use for matching\n\n    // iterate over each document to calculate the term frequency vector\n    docs.forEach((doc) => {\n      const words = texts[doc].toLowerCase().match(/\\b\\w+\\b/g); // split the text into words\n      const tf = {}; // stores the term frequency for each word\n      words.forEach((word) => {\n        if (tf[word]) {\n          tf[word]++;\n        } else {\n          tf[word] = 1;\n        }\n      });\n      // store the vector and the word count for the document\n      docVectors[doc] = { vector: tf, wordCount: words.length };\n    });\n\n    // calculate the Jaccard similarity between the term frequency vectors and the query vector\n    const queryVector = {};\n    terms.forEach((term) => {\n      queryVector[term] = 1;\n    });\n\n    const results = docs.map((doc) => {\n      const { vector: docVector, wordCount } = docVectors[doc];\n      const intersection = {};\n      let intersectionSize = 0;\n      let unionSize = wordCount;\n      Object.keys(queryVector).forEach((term) => {\n        if (docVector[term]) {\n          intersection[term] = docVector[term];\n          intersectionSize += docVector[term];\n        } else {\n          unionSize += 1;\n        }\n      });\n\n      const jaccardSimilarity = intersectionSize / unionSize;\n\n      const matchedWords = Object.keys(intersection).map((word) => {\n        return { word: word, count: intersection[word] };\n      });\n\n      return {\n        name: doc,\n        score: jaccardSimilarity,\n        matchedWords: matchedWords,\n      };\n    });\n\n    results.sort((a, b) => {\n      return b.score - a.score;\n    });\n\n    return results;\n  }\n\n  function rankTextscos(terms, texts) {\n    const docVectors = {}; // stores the term frequency vectors for each document\n    const docs = Object.keys(texts); // get an array of the document names\n    const wordSet = new Set(terms); // create a set of the terms to use for matching\n    console.log(\"----docs in ranking\");\n\n    console.log(texts);\n    // iterate over each document to calculate the term frequency vector\n    docs.forEach((doc) => {\n      const words = texts[doc].toLowerCase().match(/\\b\\w+\\b/g); // split the text into words\n      console.log(\"--------\");\n      console.log(words);\n      console.log(\"--------\");\n      const tf = {}; // stores the term frequency for each word\n      var maxFreq = 0; // stores the highest frequency of any word in the document\n      words.forEach((word) => {\n        if (tf[word]) {\n          tf[word]++;\n        } else {\n          tf[word] = 1;\n        }\n        maxFreq = Math.max(maxFreq, tf[word]);\n      });\n      // normalize the term frequency vector by dividing each frequency by the max frequency\n      const docVector = {};\n      Object.keys(tf).forEach((word) => {\n        docVector[word] = tf[word];\n      });\n      docVectors[doc] = { vector: docVector, wordCount: words.length }; // store the vector and the word count for the document\n    });\n\n    // calculate the cosine similarity between the term frequency vectors and the query vector\n    const queryVector = {};\n    terms.forEach((term) => {\n      queryVector[term] = 1;\n    });\n    const results = docs.map((doc) => {\n      const { vector: docVector, wordCount } = docVectors[doc];\n      const dotProduct = Object.keys(queryVector).reduce((sum, term) => {\n        if (docVector[term]) {\n          return sum + queryVector[term] * docVector[term];\n        } else {\n          return sum;\n        }\n      }, 0);\n      const queryMagnitude = Math.sqrt(\n        Object.keys(queryVector).reduce((sum, term) => {\n          return sum + queryVector[term] * queryVector[term];\n        }, 0)\n      );\n      const docMagnitude = Math.sqrt(\n        Object.keys(docVector).reduce((sum, term) => {\n          return sum + docVector[term] * docVector[term];\n        }, 0)\n      );\n      const cosineSimilarity = dotProduct / (queryMagnitude * docMagnitude);\n      // find the words in the text that match the query terms and calculate their frequency in the document\n      // find the words in the text that match the query terms and calculate their frequency in the document\n      const matchedWords = Object.keys(docVector)\n        .filter((word) => {\n          return wordSet.has(word);\n        })\n        .map((word) => {\n          return { word: word, count: docVector[word] }; // use the frequency directly\n        });\n\n      return {\n        name: doc,\n        score: cosineSimilarity,\n        matchedWords: matchedWords,\n      };\n    });\n\n    results.sort((a, b) => {\n      return b.score - a.score;\n    });\n    setAllDocsReady(true);\n    return results;\n  }\n\n  // const handleFetchFile = async (fileName) => {\n  //   try {\n  //     const response = await axios.get(\n  //       `${apiUrl}/api/getFile/${fileName}`\n  //     );\n  //     console.group(\"found html file \" + response.data);\n  //     setHtmls(response.data);\n  //   } catch (error) {\n  //     console.error(`Error fetching file ${fileName}: ${error.message}`);\n  //   }\n  // };\n\n  const handleFetchFile = async (fileName = \"\") => {\n    console.log(\"handleFetchFile called\")\n\n    if (fileName != \"\" && allHtmls.hasOwnProperty(fileName)) {\n      setHtmls(allHtmls[fileName]);\n      return;\n    }\n    try {\n      const promises = fileNames.map(async (fn) => {\n        fn = fn.replace(\"pdf\", \"html\");\n        const response = await axios.get(`${apiUrl}/api/getFile/${fn}`);\n        let hml = response.data;\n        const originalSubstring = \"#page-container{bottom:0;right:0;overflow:auto}\";\n        const replacementSubstring = \"#page-container{bottom:0;overflow:auto}\";\n\n        hml = hml.replace(originalSubstring, replacementSubstring);\n\n\n        return { [fn]: hml }; // Return an object with file name as key and file content as value\n      });\n\n      const filesData = await Promise.all(promises);\n\n      // Combine file data into a single object\n      const filesObject = filesData.reduce((acc, cur) => ({ ...acc, ...cur }), {});\n      setAllHtmls(filesObject)\n      if (fileName != \"\") {\n        setHtmls(filesObject[fileName]);\n      }\n\n    } catch (error) {\n      console.error(`Error fetching files: ${error.message}`);\n    }\n  };\n\n\n  function showranks() {\n    setshowpage(false);\n  }\n  function showthispdf(fnamme) {\n    setshowpage(true);\n    fnamme = fnamme.replace(\"pdf\", \"html\");\n    setCurrShowing(fnamme);\n    handleFetchFile(fnamme);\n  }\n\n  return (\n    <Provider store={store}>\n      {/* <div className=\"container\">\n        <div className=\"first-row\">\n          <div className=\"header\">\n            <h2>PaperRank</h2>\n            <h5>\"Accelerate Your Research\"</h5>\n\n          </div>\n\n          <div className=\"queryupload\">\n            <Loader isLoading={isLoading} />\n            <div class=\"section\">\n              <div class=\"container-fluid\">\n                <div class=\"row\">\n                  <div class=\"q col-sm-6\">\n                    <h4>Query</h4>\n                    <Box queryterms={queryterms} brightColors={brightColors} setbrightColors={setbrightColors} setcolorMap={setcolorMap} setqueryterms={setqueryterms} />\n                  </div>\n                  <div class=\"f col-sm-6\">\n                    <h4>File Upload</h4>\n                    <i class=\"fa-solid fa-cloud-arrow-up\"></i> <FileUpload setIsLoading={setIsLoading} setFileText={setFileText} setFileNames={setFileNames} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"right-column\">\n            <div class=\"row\">\n              <div id=\"pdf-contents\">\n                <div id=\"pdf-meta\">\n                  <div id=\"pdf-buttons\">\n                    <div class=\"terms col-sm-1\"></div>\n                    <div class=\"terms col-sm-2\">\n                      <button onClick={startconversion}>Start Ranking</button>\n                    </div>\n\n                    <div class=\"terms col-sm-2\">\n                      <button onClick={rerankcoss}>Start cosine ranking</button>\n                    </div>\n\n                    <div class=\"terms col-sm-2\">\n                      <button onClick={rerankjacc}>Start jaccard ranking</button>\n                    </div>\n\n                 \n\n                    {documents.length > 0 && <div class=\"terms col-sm-2\">\n                      <button onClick={() => { setshowingdocs() }}>Show docs</button>\n                    </div>}\n\n                    <div class=\"terms col-sm-2\">\n                      <button onClick={showranks}>{\"< Back to document ranks\"}</button>\n                    </div>\n                    <div class=\"terms col-sm-1\"></div>\n\n\n                  </div>\n\n                  <div></div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n        <div className=\"second-row\">\n          <div className=\"afterupload\">\n            <div class=\"p row\">\n              <div class=\"first-column\">\n\n\n\n                {(documents.length > 0) && showDocs ? (<div id=\"pdf-main-container\">\n\n                  <DocumentList handleCheckboxChange={() => { console.log(\"hc---\") }} documents={documents} />\n\n                </div>)\n\n                  :\n\n\n                  (showpage ?\n\n                    <div id=\"pdf-main-container\">\n\n                      <HtmlViewer html={htmls} />\n\n                    </div>\n                    // )\n                    :\n                    alldocsready ? (\n                      <div id=\"pdf-main-container\"> <div>\n                        <SearchResults results={docranks} showthispdf={showthispdf} />\n                      </div></div>\n                    ) : (\n                      \"\"\n                    )\n                  )}\n              </div>\n              <div className=\"second-column\">\n                <div class=\"terms col-sm-3\">\n\n                  <h1>Terms</h1>\n                  <CheckboxList\n                    terms={querymap}\n                    colorMap={colorMap}\n                    checkedTerms={checkedTerms}\n                    setCheckedTerms={setCheckedTerms}\n                    onCheckedTerms={handleCheckedTerms}\n                  />\n                </div>\n\n\n              </div>\n            </div>\n\n\n\n          </div>\n\n        </div>\n      </div> */}\n      {/* <div class=\"fotter\">\n      </div> */}\n\n      {/* new ui */}\n\n      <div className=\"app-container\">\n\n        <div className=\"mac-book-pro141-container\">\n          <div className=\"mac-book-pro141-mac-book-pro141\">\n            <div className=\"mac-book-pro141-frame1\">\n              <span className=\"mac-book-pro141-text\">\n                <span>Research Analyst</span>\n              </span>\n              <img\n                src=\"/external/ictwotonereadmore2380-sg1m.svg\"\n                alt=\"ictwotonereadmore2380\"\n                className=\"mac-book-pro141-ictwotonereadmore\"\n              />\n              <div className=\"mac-book-pro141-iconparkoutlinemoreapp\">\n                <div className=\"mac-book-pro141-group\">\n                  <img\n                    src=\"/external/vector2392-vwv.svg\"\n                    alt=\"Vector2392\"\n                    className=\"mac-book-pro141-vector\"\n                  />\n                  <img\n                    src=\"/external/vector2393-328f.svg\"\n                    alt=\"Vector2393\"\n                    className=\"mac-book-pro141-vector1\"\n                  />\n\n                  <img\n                    src=\"/external/rectangle22i663-ebg4.svg\"\n                    alt=\"Rectangle22I663\"\n                    className=\"mac-book-pro141-rectangle22\"\n\n                  />\n                </div>\n              </div>\n            </div>\n            <div>\n\n            </div>\n\n            {/* component 1 upload and input screen ---- */}\n\n            {showinitbox && !showtextinput && !showfileselector ?\n\n              <div className=\"positioningrelative\">\n                <div className=\"mac-book-pro141-initcomp\">\n\n\n\n                  <div className=\"mac-book-pro141-searchboxmain\">\n\n                    {/* \n                    <label for=\"file-input\" class=\"file-input-label\">\n                      <button className=\"mac-book-pro141-rectangle22\">\n                        <div className=\"mac-book-pro141-materialsymbolsupload\"></div>\n\n                        <div className=\"mac-book-pro141-text02\">\n                          <span>UPLOAD PAPERS</span>\n                        </div>\n                      </button>\n                      <input id=\"file-input\" type=\"file\" name=\"file\" accept=\"application/pdf\" onChange={handleChange} />\n                    </label> */}\n\n\n\n\n                    {/* <form onSubmit={handleSubmit}> */}\n\n\n                    <button onClick={() => setshowfileselector(true)} className=\"mac-book-pro141-rectangle22\">\n                      <div className=\"mac-book-pro141-materialsymbolsupload\"></div>\n\n                      <div className=\"mac-book-pro141-text02\">\n                        <span>UPLOAD PAPERS</span>\n                      </div>\n                    </button>\n\n                    {/* </form> */}\n\n\n\n                  </div>\n\n\n\n\n\n                  <div className=\"mac-book-pro141-searchboxmain2\">\n\n                    <button onClick={() => {\n\n                      setshowtextinput(true)\n                    }} className=\"mac-book-pro141-rectangle22\">\n                      <div className=\"mac-book-pro141-materialsymbolsupload\"></div>\n\n                      <div className=\"mac-book-pro141-text02\">\n                        <span>ADD SEARCH TERMS</span>\n                      </div>\n\n\n                      {/* <div className=\"mac-book-pro141-akariconsedit\">\n\n                      <img\n                        src=\"/external/edittext.png\"\n                        alt=\"VectorI663\"\n                        className=\"mac-book-pro141-vector2\"\n                      />\n                  \n                    </div> */}\n                    </button>\n                  </div>\n\n\n                  <button className=\"mac-book-pro141-startbutton\">\n\n                    <div className=\"mac-book-pro141-text16\">\n                      <span>Start Ranking</span>\n                    </div>\n\n                  </button>\n\n                </div>\n              </div> : ''}\n\n\n            {showfileselector ?\n              <FileInput setIsLoading={setIsLoading} setFileText={setFileText} setFileNames={setFileNames} closefileinput={closefileinput} />\n              : ''}\n\n            {showtextinput ?\n              <TextInput queryterms={queryterms} brightColors={brightColors} setbrightColors={setbrightColors} setcolorMap={setcolorMap} setqueryterms={setqueryterms} closetextinput={closetextinput} />\n              : ''}\n            {/* add text container end ----*/}\n          </div>\n        </div>\n      </div>\n    </Provider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}